module.exports=[8249,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944),e=a.i(50429),f=a.i(90669),g=a.i(41710),h=a.i(24669),i=a.i(53277),j=a.i(23025),k=a.i(73570),l=a.i(41675),m=a.i(4720),n=a.i(63588);let o={auto:{border:"#e2e8f0",label:"Cálculo automático",dot:"#cbd5e1"},professional:{border:"#bbf7d0",label:"Registro do Profissional",dot:"#86efac"},attention:{border:"#fde68a",label:"Atenção",dot:"#fcd34d"}};function p({type:a,children:c,className:d=""}){let e=o[a];return(0,b.jsx)("div",{className:`rounded-xl overflow-hidden ${d}`,style:{border:`1px solid ${"attention"===a?"#fde68a":"#e5e7eb"}`},children:(0,b.jsxs)("div",{style:{display:"flex"},children:[(0,b.jsx)("div",{style:{width:"3px",flexShrink:0,backgroundColor:e.border,borderRadius:"3px 0 0 3px"}}),(0,b.jsx)("div",{style:{flex:1},children:c})]})})}function q({type:a}){let c=o[a];return(0,b.jsxs)("span",{className:"flex items-center gap-1.5",children:[(0,b.jsx)("span",{style:{width:6,height:6,borderRadius:"50%",backgroundColor:c.dot,display:"inline-block"}}),(0,b.jsx)("span",{className:"text-xs text-gray-400",children:c.label})]})}function r(){let a,r,s,t=(0,d.useParams)().patientId,[u,v]=(0,c.useState)(null),[w,x]=(0,c.useState)(""),[y,z]=(0,c.useState)(null),[A,B]=(0,c.useState)(""),[C,D]=(0,c.useState)(!0);(0,c.useEffect)(()=>{E()},[t]);let E=async()=>{try{let[a,b,c,d]=await Promise.all([fetch(`/api/patients/${t}/evolution`),fetch(`/api/patients/${t}`),fetch(`/api/patients/${t}/clinical-record`),fetch(`/api/patients/${t}/supervision`)]);if(a.ok&&v(await a.json()),b.ok){let a=await b.json();x(a.patient?.full_name||"")}if(c.ok){let a=await c.json();a.exists&&z(a.record)}if(d.ok){let a=await d.json();a.context&&B(a.context)}}catch(a){console.error("Erro:",a)}finally{D(!1)}};if(C)return(0,b.jsx)("div",{className:"min-h-screen bg-white flex items-center justify-center",children:(0,b.jsx)("div",{className:"animate-pulse space-y-4 w-full max-w-4xl px-8",children:(0,b.jsx)("div",{className:"h-8 bg-gray-100 rounded w-1/3"})})});if(!u)return(0,b.jsx)("div",{className:"min-h-screen bg-white flex items-center justify-center",children:(0,b.jsx)("p",{className:"text-gray-500",children:"Erro ao carregar dados"})});let F=Math.max(u.event_percentages.EVITOU,u.event_percentages.ENFRENTOU,u.event_percentages.AJUSTOU,u.event_percentages.RECUPEROU,1),G=[{label:"Evitou",value:u.event_percentages.EVITOU,angle:-90,color:"#d97706"},{label:"Enfrentou",value:u.event_percentages.ENFRENTOU,angle:0,color:"#059669"},{label:"Recuperou",value:u.event_percentages.RECUPEROU,angle:90,color:"#7c3aed"},{label:"Ajustou",value:u.event_percentages.AJUSTOU,angle:180,color:"#0891b2"}],H=(a,b)=>{let c=a/100*60,d=b*Math.PI/180;return{x:90+c*Math.cos(d),y:90+c*Math.sin(d)}},I=G.map((a,b)=>{let c=H(a.value,a.angle);return`${0===b?"M":"L"} ${c.x} ${c.y}`}).join(" ")+" Z";return(0,b.jsxs)("div",{className:"min-h-screen bg-white p-8 max-w-4xl mx-auto",children:[(0,b.jsxs)("div",{className:"border-b border-gray-200 pb-6 mb-8",children:[(0,b.jsx)("h1",{className:"font-serif text-3xl text-gray-800 mb-1",children:"Evolução do Processo"}),(0,b.jsxs)("p",{className:"text-gray-500 italic",children:["Relatório longitudinal • ",u.total_sessions," sessões analisadas"]}),(0,b.jsxs)("p",{className:"text-lg text-gray-700 mt-3",children:["Paciente: ",w]}),(0,b.jsxs)("p",{className:"text-xs text-gray-400 mt-2",children:["Gerado em ",new Date().toLocaleDateString("pt-BR")," às ",new Date().toLocaleTimeString("pt-BR",{hour:"2-digit",minute:"2-digit"})," — AXIS TCC"]})]}),(0,b.jsx)("div",{className:"bg-gray-50 rounded-xl p-4 mb-6 border border-gray-200",children:(0,b.jsx)("p",{className:"text-sm text-gray-600",children:"Este relatório descreve padrões observáveis ao longo do tempo. Não contém inferência diagnóstica, interpretação psicológica ou juízo clínico."})}),(0,b.jsxs)("div",{className:"mb-8 flex items-center gap-5 px-1",children:[(0,b.jsx)("span",{className:"text-xs text-gray-400 uppercase tracking-wide",style:{fontSize:"10px"},children:"Autoria:"}),Object.entries(o).map(([a,c])=>(0,b.jsxs)("span",{className:"flex items-center gap-1.5",children:[(0,b.jsx)("span",{style:{width:6,height:6,borderRadius:"50%",backgroundColor:c.dot,display:"inline-block"}}),(0,b.jsx)("span",{className:"text-xs text-gray-400",children:c.label})]},a))]}),(0,b.jsxs)("div",{className:"space-y-6",children:[y&&(0,b.jsx)(p,{type:"professional",children:(0,b.jsxs)("div",{className:"p-5 bg-white",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,b.jsxs)("h3",{className:"text-sm font-medium text-gray-900 uppercase tracking-wide flex items-center gap-2",children:[(0,b.jsx)(m.FileText,{className:"w-4 h-4 text-gray-400"}),"Contexto Clínico Inicial"]}),(0,b.jsx)(q,{type:"professional"})]}),(0,b.jsx)("p",{className:"text-xs text-gray-500 mb-4",children:"Registro retrospectivo informado pelo profissional antes do início das sessões no sistema."}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[y.complaint&&(0,b.jsxs)("div",{children:[(0,b.jsx)("h4",{className:"text-xs font-medium text-gray-500 mb-1 uppercase tracking-wide",children:"Evento ou contexto inicial"}),(0,b.jsx)("p",{className:"text-sm text-gray-700",children:y.complaint})]}),y.patterns&&(0,b.jsxs)("div",{children:[(0,b.jsx)("h4",{className:"text-xs font-medium text-gray-500 mb-1 uppercase tracking-wide",children:"Aspectos mencionados no histórico"}),(0,b.jsx)("p",{className:"text-sm text-gray-700",children:y.patterns})]}),y.interventions&&(0,b.jsxs)("div",{children:[(0,b.jsx)("h4",{className:"text-xs font-medium text-gray-500 mb-1 uppercase tracking-wide",children:"Intervenções prévias relatadas"}),(0,b.jsx)("p",{className:"text-sm text-gray-700",children:y.interventions})]}),y.current_state&&(0,b.jsxs)("div",{children:[(0,b.jsx)("h4",{className:"text-xs font-medium text-gray-500 mb-1 uppercase tracking-wide",children:"Situação atual conforme relato"}),(0,b.jsx)("p",{className:"text-sm text-gray-700",children:y.current_state})]})]})]})}),(0,b.jsx)(p,{type:"auto",children:(0,b.jsxs)("div",{className:"p-5",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,b.jsx)("h3",{className:"text-sm font-medium text-gray-900 uppercase tracking-wide",children:"Indicadores"}),(0,b.jsx)(q,{type:"auto"})]}),(0,b.jsxs)("div",{className:"grid grid-cols-4 gap-4",children:[(0,b.jsxs)("div",{className:"bg-white rounded-xl p-4 border border-gray-200",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,b.jsx)(e.Target,{className:"w-4 h-4 text-gray-400"}),(0,b.jsx)("span",{className:"text-xs text-gray-500 uppercase tracking-wide",children:"Sessões"})]}),(0,b.jsx)("p",{className:"text-3xl font-light text-gray-900",children:u.total_sessions}),(0,b.jsx)("p",{className:"text-xs text-gray-400 mt-1",children:"finalizadas"})]}),(0,b.jsxs)("div",{className:"bg-white rounded-xl p-4 border border-gray-200",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,b.jsx)(f.Activity,{className:"w-4 h-4 text-gray-400"}),(0,b.jsx)("span",{className:"text-xs text-gray-500 uppercase tracking-wide",children:"Eventos"})]}),(0,b.jsx)("p",{className:"text-3xl font-light text-gray-900",children:u.total_events}),(0,b.jsx)("p",{className:"text-xs text-gray-400 mt-1",children:"registrados"})]}),(0,b.jsxs)("div",{className:"bg-white rounded-xl p-4 border border-gray-200",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,b.jsx)(g.Clock,{className:"w-4 h-4 text-gray-400"}),(0,b.jsx)("span",{className:"text-xs text-gray-500 uppercase tracking-wide",children:"Recuperação"})]}),(0,b.jsx)("p",{className:"text-3xl font-light text-gray-900",children:u.avg_recovery_time||"-"}),(0,b.jsx)("p",{className:"text-xs text-gray-400 mt-1",children:"min (média)"})]}),(0,b.jsxs)("div",{className:"bg-white rounded-xl p-4 border border-gray-200",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:["up"===u.trend?(0,b.jsx)(h.TrendingUp,{className:"w-4 h-4 text-gray-400"}):"down"===u.trend?(0,b.jsx)(i.TrendingDown,{className:"w-4 h-4 text-gray-400"}):(0,b.jsx)(j.Minus,{className:"w-4 h-4 text-gray-400"}),(0,b.jsx)("span",{className:"text-xs text-gray-500 uppercase tracking-wide",children:"Tendência"})]}),(0,b.jsx)("p",{className:"text-xl font-medium text-gray-900",children:"up"===u.trend?"Positiva":"down"===u.trend?"Observada":"Estável"}),(0,b.jsx)("p",{className:"text-xs text-gray-400 mt-1",children:"últimas sessões"})]})]})]})}),(0,b.jsx)(p,{type:"auto",children:(0,b.jsxs)("div",{className:"p-5",style:{backgroundColor:"#f8fafc"},children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,b.jsx)("h3",{className:"text-sm font-medium text-gray-900 uppercase tracking-wide",children:"Tendência de Processo"}),(0,b.jsx)(q,{type:"auto"})]}),(0,b.jsx)("p",{className:"text-sm text-gray-600 leading-relaxed",children:(u.trend,a=Object.entries(u.event_counts).sort((a,b)=>b[1]-a[1]),u.total_events<3?"Dados insuficientes para caracterização de tendência no período analisado.":`Ao longo das sess\xf5es analisadas, a distribui\xe7\xe3o dos micro-eventos manteve configura\xe7\xe3o semelhante, com predomin\xe2ncia relativa de ${({EVITOU:"Evitação",ENFRENTOU:"Enfrentamento",AJUSTOU:"Ajuste",RECUPEROU:"Recuperação"})[a[0][0]]}. N\xe3o foram identificadas varia\xe7\xf5es progressivas sustentadas no perfil de eventos no per\xedodo.`)})]})}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-6",children:[u.total_events>=2&&(0,b.jsx)(p,{type:"auto",children:(0,b.jsxs)("div",{className:"p-5",style:{backgroundColor:"#f8fafc"},children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,b.jsx)("h3",{className:"text-sm font-medium text-gray-900 uppercase tracking-wide",children:"Perfil de Distribuição"}),(0,b.jsx)(q,{type:"auto"})]}),(0,b.jsx)("div",{className:"flex justify-center",children:(0,b.jsxs)("svg",{width:180,height:180,className:"overflow-visible",children:[[25,50,75,100].map(a=>(0,b.jsx)("circle",{cx:90,cy:90,r:a/100*60,fill:"none",stroke:"#e5e7eb",strokeWidth:"1"},a)),G.map((a,c)=>{let d=H(100,a.angle);return(0,b.jsx)("line",{x1:90,y1:90,x2:d.x,y2:d.y,stroke:"#e5e7eb",strokeWidth:"1"},c)}),(0,b.jsx)("path",{d:I,fill:"rgba(107, 114, 128, 0.1)",stroke:"#6b7280",strokeWidth:"1.5"}),G.map((a,c)=>{let d=H(a.value,a.angle);return(0,b.jsx)("circle",{cx:d.x,cy:d.y,r:"4",fill:a.color},c)}),G.map((a,c)=>{let d=H(120,a.angle);return(0,b.jsx)("text",{x:d.x,y:d.y,textAnchor:"middle",dominantBaseline:"middle",className:"text-xs fill-gray-500",children:a.label},c)})]})})]})}),(0,b.jsx)(p,{type:"auto",children:(0,b.jsxs)("div",{className:"p-5",style:{backgroundColor:"#f8fafc"},children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,b.jsx)("h3",{className:"text-sm font-medium text-gray-900 uppercase tracking-wide",children:"Distribuição de Eventos"}),(0,b.jsx)(q,{type:"auto"})]}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{className:"flex justify-between text-sm mb-1",children:[(0,b.jsx)("span",{className:"text-gray-600",children:"Evitou"}),(0,b.jsxs)("span",{className:"text-gray-500",children:[u.event_counts.EVITOU," (",u.event_percentages.EVITOU,"%)"]})]}),(0,b.jsx)("div",{className:"h-2 bg-gray-200 rounded-full overflow-hidden",children:(0,b.jsx)("div",{className:"h-full rounded-full",style:{width:`${u.event_percentages.EVITOU/F*100}%`,backgroundColor:"#d97706"}})})]}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{className:"flex justify-between text-sm mb-1",children:[(0,b.jsx)("span",{className:"text-gray-600",children:"Enfrentou"}),(0,b.jsxs)("span",{className:"text-gray-500",children:[u.event_counts.ENFRENTOU," (",u.event_percentages.ENFRENTOU,"%)"]})]}),(0,b.jsx)("div",{className:"h-2 bg-gray-200 rounded-full overflow-hidden",children:(0,b.jsx)("div",{className:"h-full rounded-full",style:{width:`${u.event_percentages.ENFRENTOU/F*100}%`,backgroundColor:"#059669"}})})]}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{className:"flex justify-between text-sm mb-1",children:[(0,b.jsx)("span",{className:"text-gray-600",children:"Ajustou"}),(0,b.jsxs)("span",{className:"text-gray-500",children:[u.event_counts.AJUSTOU," (",u.event_percentages.AJUSTOU,"%)"]})]}),(0,b.jsx)("div",{className:"h-2 bg-gray-200 rounded-full overflow-hidden",children:(0,b.jsx)("div",{className:"h-full rounded-full",style:{width:`${u.event_percentages.AJUSTOU/F*100}%`,backgroundColor:"#0891b2"}})})]}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{className:"flex justify-between text-sm mb-1",children:[(0,b.jsx)("span",{className:"text-gray-600",children:"Recuperou"}),(0,b.jsxs)("span",{className:"text-gray-500",children:[u.event_counts.RECUPEROU," (",u.event_percentages.RECUPEROU,"%)"]})]}),(0,b.jsx)("div",{className:"h-2 bg-gray-200 rounded-full overflow-hidden",children:(0,b.jsx)("div",{className:"h-full rounded-full",style:{width:`${u.event_percentages.RECUPEROU/F*100}%`,backgroundColor:"#7c3aed"}})})]})]}),(0,b.jsx)("p",{className:"text-xs text-gray-500 mt-4",children:(r=Object.entries(u.event_counts).sort((a,b)=>b[1]-a[1]),s={EVITOU:"Evitação",ENFRENTOU:"Enfrentamento",AJUSTOU:"Ajuste",RECUPEROU:"Recuperação"},`Maior frequ\xeancia de ${s[r[0][0]]} (${u.event_percentages[r[0][0]]}%), seguido por ${s[r[1][0]]} (${u.event_percentages[r[1][0]]}%).`)})]})})]}),u.sessions_early&&u.sessions_recent&&u.total_sessions>=4&&(0,b.jsx)(p,{type:"auto",children:(0,b.jsxs)("div",{className:"p-5",style:{backgroundColor:"#f8fafc"},children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,b.jsx)("h3",{className:"text-sm font-medium text-gray-900 uppercase tracking-wide",children:"Comparativo Temporal"}),(0,b.jsx)(q,{type:"auto"})]}),(0,b.jsxs)("table",{className:"w-full text-sm",children:[(0,b.jsx)("thead",{children:(0,b.jsxs)("tr",{className:"border-b border-gray-200",children:[(0,b.jsx)("th",{className:"text-left py-2 text-gray-500 font-medium",children:"Período"}),(0,b.jsx)("th",{className:"text-center py-2 text-gray-500 font-medium",children:"Sessões"}),(0,b.jsx)("th",{className:"text-center py-2 text-gray-500 font-medium",children:"Eventos"}),(0,b.jsx)("th",{className:"text-center py-2 text-gray-500 font-medium",children:"Recuperação"})]})}),(0,b.jsxs)("tbody",{children:[(0,b.jsxs)("tr",{className:"border-b border-gray-100",children:[(0,b.jsx)("td",{className:"py-3 text-gray-700",children:"Sessões iniciais"}),(0,b.jsx)("td",{className:"py-3 text-center text-gray-600",children:u.sessions_early.count}),(0,b.jsx)("td",{className:"py-3 text-center text-gray-600",children:u.sessions_early.events}),(0,b.jsxs)("td",{className:"py-3 text-center text-gray-600",children:[u.sessions_early.avg_recovery," min"]})]}),(0,b.jsxs)("tr",{children:[(0,b.jsx)("td",{className:"py-3 text-gray-700",children:"Sessões recentes"}),(0,b.jsx)("td",{className:"py-3 text-center text-gray-600",children:u.sessions_recent.count}),(0,b.jsx)("td",{className:"py-3 text-center text-gray-600",children:u.sessions_recent.events}),(0,b.jsxs)("td",{className:"py-3 text-center text-gray-600",children:[u.sessions_recent.avg_recovery," min"]})]})]})]})]})}),u.outlier_sessions&&u.outlier_sessions.length>0&&(0,b.jsx)(p,{type:"attention",children:(0,b.jsxs)("div",{className:"p-5",style:{backgroundColor:"#fffbeb"},children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,b.jsxs)("h3",{className:"text-sm font-medium uppercase tracking-wide flex items-center gap-2",style:{color:"#92400e"},children:[(0,b.jsx)(k.AlertTriangle,{className:"w-4 h-4"}),"Sessões com Variação"]}),(0,b.jsx)(q,{type:"attention"})]}),(0,b.jsx)("ul",{className:"space-y-1",children:u.outlier_sessions.map((a,c)=>(0,b.jsxs)("li",{className:"text-sm",style:{color:"#92400e"},children:[(0,b.jsxs)("span",{className:"font-medium",children:["Sessão #",a.session_number]})," — ",a.reason]},c))})]})}),(0,b.jsx)(p,{type:"auto",children:(0,b.jsxs)("div",{className:"p-5",style:{backgroundColor:"#f8fafc"},children:[(0,b.jsxs)("h3",{className:"text-sm font-medium text-gray-900 uppercase tracking-wide mb-4 flex items-center gap-2",children:[(0,b.jsx)(l.Calendar,{className:"w-4 h-4 text-gray-400"}),"Linha do Tempo"]}),(0,b.jsx)("div",{className:"grid grid-cols-4 gap-3",children:u.timeline.map((a,c)=>(0,b.jsxs)("div",{className:"flex items-center gap-2 bg-white rounded-lg p-2 border border-gray-200",children:[(0,b.jsx)("div",{className:"w-6 h-6 bg-white border-2 border-gray-300 rounded-full flex items-center justify-center text-xs text-gray-600 font-medium",children:a.session_number}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-xs text-gray-700",children:new Date(a.date).toLocaleDateString("pt-BR")}),(0,b.jsx)("p",{className:"text-xs text-gray-400",children:a.duration?`${a.duration} min`:""})]})]},c))})]})}),A&&(0,b.jsx)(p,{type:"professional",children:(0,b.jsxs)("div",{className:"p-5 bg-white",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,b.jsxs)("h3",{className:"text-sm font-medium text-gray-900 uppercase tracking-wide flex items-center gap-2",children:[(0,b.jsx)(n.MessageSquare,{className:"w-4 h-4 text-gray-400"}),"Contexto para Supervisão"]}),(0,b.jsx)(q,{type:"professional"})]}),(0,b.jsx)("p",{className:"text-sm text-gray-700 leading-relaxed",children:A})]})})]}),(0,b.jsx)("div",{className:"border-t border-gray-200 pt-6 mt-8",children:(0,b.jsx)("p",{className:"text-xs text-gray-500 text-center",children:"Este relatório não substitui avaliação clínica profissional. Interpretação exclusiva do profissional responsável."})}),(0,b.jsx)("div",{className:"mt-8 flex justify-center print:hidden",children:(0,b.jsx)("button",{onClick:()=>window.print(),className:"px-6 py-3 text-white rounded-xl text-sm font-medium transition-all hover:opacity-90",style:{backgroundColor:"#16a34a"},children:"Imprimir / Salvar PDF"})})]})}a.s(["default",()=>r])}];

//# sourceMappingURL=app_relatorio_%5BpatientId%5D_page_tsx_4e6cb57f._.js.map