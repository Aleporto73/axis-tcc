module.exports=[41137,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944),e=a.i(38246);let f={scheduled:"Agendada",in_progress:"Em andamento",completed:"Concluída",cancelled:"Cancelada"},g={scheduled:"bg-blue-50 text-blue-600",in_progress:"bg-aba-500/10 text-aba-500",completed:"bg-green-50 text-green-600",cancelled:"bg-slate-100 text-slate-400"},h={independent:"Independente",gestural:"Gestual",verbal:"Verbal",modeling:"Modelagem",partial_physical:"Física parcial",full_physical:"Física total"},i={leve:"Leve",moderada:"Moderada",alta:"Alta",severa:"Severa"};function j(){let a=(0,d.useParams)();(0,d.useRouter)();let j=a.id,[k,l]=(0,c.useState)(null),[m,n]=(0,c.useState)([]),[o,p]=(0,c.useState)([]),[q,r]=(0,c.useState)([]),[s,t]=(0,c.useState)([]),[u,v]=(0,c.useState)(!0),[w,x]=(0,c.useState)(!1),[y,z]=(0,c.useState)(null),[A,B]=(0,c.useState)("trials"),[C,D]=(0,c.useState)({protocol_id:"",target_name:"",trials_total:10,trials_correct:0,prompt_level:"full_physical",notes:""}),[E,F]=(0,c.useState)({behavior_type:"",antecedent:"",behavior:"",consequence:"",intensity:"leve",duration_seconds:"",location:""}),[G,H]=(0,c.useState)(!1),[I,J]=(0,c.useState)(!1),[K,L]=(0,c.useState)(!1),[M,N]=(0,c.useState)(!1),[O,P]=(0,c.useState)(""),[Q,R]=(0,c.useState)(""),[S,T]=(0,c.useState)([]),[U,V]=(0,c.useState)(!1),[W,X]=(0,c.useState)("idle"),[Y,Z]=(0,c.useState)(null),$=async()=>{if(k){P(""),R(""),X("idle"),Z(null);try{let a=await fetch("/api/aba/guardians?learner_id="+k.learner_id),b=(await a.json()).guardians||[];T(b),b.length>0&&b[0].email&&R(b[0].email)}catch{}N(!0)}},_=async()=>{if(!O.trim())return void Z("Escreva o resumo antes de enviar.");if(!Q.trim())return void Z("Informe o email do destinatário.");V(!0),Z(null);try{let a=await fetch("/api/aba/sessions/"+j+"/summary",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({content:O})}),b=await a.json();if(!b.summary_id)throw Error(b.error||"Erro ao criar resumo");let c=b.summary_id;if(!(await fetch("/api/aba/sessions/"+j+"/summary",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({summary_id:c,action:"approve"})})).ok)throw Error("Erro ao aprovar resumo");let d=await fetch("/api/aba/sessions/"+j+"/summary",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({summary_id:c,action:"send",recipient_email:Q})}),e=await d.json();if(!d.ok)throw Error(e.error||"Erro ao enviar email");X("sent")}catch(a){Z(a.message||"Erro ao enviar"),X("error")}V(!1)},[aa,ab]=(0,c.useState)(!1),[ac,ad]=(0,c.useState)({title:"",ebp_practice_id:7,domain:"Aquisição",objective:"",mastery_criteria_pct:80,mastery_criteria_sessions:3,mastery_criteria_trials:10}),ae=(0,c.useCallback)(async()=>{try{let a=await fetch(`/api/aba/sessions/${j}`);if(!a.ok){z("Sessão não encontrada"),v(!1);return}let b=await a.json();if(l(b.session),n(b.targets||[]),p(b.behaviors||[]),b.session?.learner_id){let a=await fetch(`/api/aba/protocols?learner_id=${b.session.learner_id}`),c=await a.json();r(c.protocols||[])}v(!1)}catch{z("Falha de conexão"),v(!1)}},[j]),af=(0,c.useCallback)(async()=>{try{let a=await fetch("/api/aba/ebp-practices");if(a.ok){let b=await a.json();t(b.practices||[])}}catch{}},[]);(0,c.useEffect)(()=>{ae(),af()},[ae,af]);let ag=async a=>{x(!0),z(null);try{let b=await fetch(`/api/aba/sessions/${j}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:a})});if(!b.ok){let a=await b.json();z(a.error||"Erro na ação"),x(!1);return}await ae(),x(!1)}catch{z("Falha de conexão"),x(!1)}},ah=async()=>{if(!C.protocol_id||!C.target_name)return void z("Selecione o protocolo e nome do alvo");H(!0),z(null);try{let a=await fetch(`/api/aba/sessions/${j}/trials`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({protocol_id:C.protocol_id,target_name:C.target_name.trim(),trials_total:C.trials_total,trials_correct:C.trials_correct,prompt_level:C.prompt_level,notes:C.notes.trim()||null})});if(!a.ok){let b=await a.json();z(b.error||"Erro ao registrar trial"),H(!1);return}D({...C,target_name:"",trials_correct:0,notes:""}),await ae(),H(!1)}catch{z("Falha de conexão"),H(!1)}},ai=async()=>{if(!E.behavior_type||!E.antecedent||!E.behavior||!E.consequence)return void z("Preencha todos os campos ABC");J(!0),z(null);try{let a=await fetch(`/api/aba/sessions/${j}/behaviors`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({behavior_type:E.behavior_type.trim(),antecedent:E.antecedent.trim(),behavior:E.behavior.trim(),consequence:E.consequence.trim(),intensity:E.intensity,duration_seconds:E.duration_seconds?parseInt(E.duration_seconds):null,location:E.location.trim()||null})});if(!a.ok){let b=await a.json();z(b.error||"Erro ao registrar comportamento"),J(!1);return}F({behavior_type:"",antecedent:"",behavior:"",consequence:"",intensity:"leve",duration_seconds:"",location:""}),await ae(),J(!1)}catch{z("Falha de conexão"),J(!1)}},aj=async()=>{if(!ac.title||!ac.objective)return void z("Título e objetivo são obrigatórios");ab(!0),z(null);try{let a=await fetch("/api/aba/protocols",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({learner_id:k?.learner_id,title:ac.title.trim(),ebp_practice_id:ac.ebp_practice_id,domain:ac.domain.trim(),objective:ac.objective.trim(),mastery_criteria_pct:ac.mastery_criteria_pct,mastery_criteria_sessions:ac.mastery_criteria_sessions,mastery_criteria_trials:ac.mastery_criteria_trials})});if(!a.ok){let b=await a.json();z(b.error||"Erro ao criar protocolo"),ab(!1);return}L(!1),ad({title:"",ebp_practice_id:7,domain:"Aquisição",objective:"",mastery_criteria_pct:80,mastery_criteria_sessions:3,mastery_criteria_trials:10}),ab(!1),await ae()}catch{z("Falha de conexão"),ab(!1)}};if(u)return(0,b.jsx)("div",{className:"flex items-center justify-center min-h-[50vh]",children:(0,b.jsx)("div",{className:"animate-pulse text-slate-400 text-sm",children:"Carregando sessão..."})});if(!k)return(0,b.jsx)("div",{className:"flex items-center justify-center min-h-[50vh]",children:(0,b.jsx)("p",{className:"text-slate-400 text-sm",children:y||"Sessão não encontrada"})});let ak="in_progress"===k.status,al="scheduled"===k.status,am="completed"===k.status;return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:"px-4 md:px-8 lg:px-12 xl:px-16 pt-5 md:pt-6",children:[(0,b.jsx)(e.default,{href:"/aba/sessoes",className:"text-xs text-slate-400 hover:text-aba-500 transition-colors",children:"← Voltar para sessões"}),(0,b.jsxs)("div",{className:"mt-4 flex items-start justify-between mb-6",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-lg font-normal text-slate-800 tracking-tight",children:k.learner_name}),(0,b.jsxs)("p",{className:"text-xs text-slate-400 mt-0.5",children:[new Date(k.scheduled_at).toLocaleDateString("pt-BR")," às ",new Date(k.scheduled_at).toLocaleTimeString("pt-BR",{hour:"2-digit",minute:"2-digit"}),k.location&&` \xb7 ${k.location}`]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${g[k.status]||"bg-slate-100 text-slate-500"}`,children:f[k.status]||k.status}),al&&(0,b.jsx)("button",{onClick:()=>ag("open"),disabled:w,className:"px-4 py-2 bg-aba-500 text-white text-sm font-medium rounded-lg hover:bg-aba-600 transition-colors disabled:opacity-50",children:w?"Iniciando...":"Iniciar Sessão"}),ak&&(0,b.jsx)("button",{onClick:()=>ag("close"),disabled:w,className:"px-4 py-2 bg-green-600 text-white text-sm font-medium rounded-lg hover:bg-green-700 transition-colors disabled:opacity-50",children:w?"Finalizando...":"Finalizar Sessão"})]})]}),y&&(0,b.jsx)("div",{className:"mb-4 p-3 bg-red-50 rounded-lg",children:(0,b.jsx)("p",{className:"text-xs text-red-500",children:y})}),am&&(0,b.jsxs)("div",{className:"mb-6 p-4 bg-green-50 border border-green-200 rounded-xl flex items-center justify-between gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-green-700 font-medium",children:"Sessão finalizada"}),(0,b.jsxs)("p",{className:"text-xs text-green-600 mt-1",children:[m.length," ",1===m.length?"trial registrado":"trials registrados"," · ",o.length," ",1===o.length?"comportamento":"comportamentos",k.started_at&&k.ended_at&&` \xb7 Dura\xe7\xe3o: ${Math.round((new Date(k.ended_at).getTime()-new Date(k.started_at).getTime())/6e4)} min`]})]}),(0,b.jsxs)("button",{onClick:$,className:"flex-shrink-0 inline-flex items-center gap-1.5 px-3 py-2 bg-white border border-green-300 text-green-700 text-xs font-medium rounded-lg hover:bg-green-100 transition-colors",children:[(0,b.jsx)("svg",{className:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),"Enviar Resumo"]})]}),ak&&0===q.length&&(0,b.jsxs)("div",{className:"mb-6 p-4 bg-amber-50 border border-amber-200 rounded-xl flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-amber-700 font-medium",children:"Nenhum protocolo ativo"}),(0,b.jsx)("p",{className:"text-xs text-amber-600 mt-0.5",children:"Crie um protocolo para registrar trials"})]}),(0,b.jsx)("button",{onClick:()=>L(!0),className:"px-4 py-2 bg-aba-500 text-white text-sm font-medium rounded-lg hover:bg-aba-600 transition-colors",children:"+ Protocolo"})]}),(ak||am)&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:"flex gap-1 mb-6 border-b border-slate-200",children:[(0,b.jsxs)("button",{onClick:()=>B("trials"),className:`px-4 py-2 text-sm font-medium border-b-2 transition-colors ${"trials"===A?"border-aba-500 text-aba-500":"border-transparent text-slate-400 hover:text-slate-600"}`,children:["Trials (",m.length,")"]}),(0,b.jsxs)("button",{onClick:()=>B("behaviors"),className:`px-4 py-2 text-sm font-medium border-b-2 transition-colors ${"behaviors"===A?"border-aba-500 text-aba-500":"border-transparent text-slate-400 hover:text-slate-600"}`,children:["Comportamentos (",o.length,")"]})]}),"trials"===A&&(0,b.jsxs)("div",{className:"space-y-4",children:[ak&&q.length>0&&(0,b.jsxs)("div",{className:"border border-slate-200 rounded-xl p-4 space-y-3",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("h3",{className:"text-xs font-medium text-slate-600",children:"Registrar Trial (DTT)"}),(0,b.jsx)("button",{onClick:()=>L(!0),className:"text-[11px] text-aba-500 hover:underline",children:"+ Protocolo"})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-[11px] text-slate-500 mb-1",children:"Protocolo *"}),(0,b.jsxs)("select",{value:C.protocol_id,onChange:a=>D({...C,protocol_id:a.target.value}),className:"w-full px-3 py-2 border border-slate-200 rounded-lg text-sm focus:outline-none focus:border-aba-500 bg-white",children:[(0,b.jsx)("option",{value:"",children:"Selecione..."}),q.filter(a=>"active"===a.status||"draft"===a.status).map(a=>(0,b.jsxs)("option",{value:a.id,children:[a.title," (",a.domain,")"]},a.id))]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-[11px] text-slate-500 mb-1",children:"Alvo *"}),(0,b.jsx)("input",{type:"text",value:C.target_name,onChange:a=>D({...C,target_name:a.target.value}),className:"w-full px-3 py-2 border border-slate-200 rounded-lg text-sm focus:outline-none focus:border-aba-500",placeholder:"Ex: Apontar para copo"})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-3 gap-3",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-[11px] text-slate-500 mb-1",children:"Total tentativas"}),(0,b.jsx)("input",{type:"number",min:"1",max:"100",value:C.trials_total,onChange:a=>D({...C,trials_total:parseInt(a.target.value)||0}),className:"w-full px-3 py-2 border border-slate-200 rounded-lg text-sm focus:outline-none focus:border-aba-500"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-[11px] text-slate-500 mb-1",children:"Corretas"}),(0,b.jsx)("input",{type:"number",min:"0",max:C.trials_total,value:C.trials_correct,onChange:a=>D({...C,trials_correct:parseInt(a.target.value)||0}),className:"w-full px-3 py-2 border border-slate-200 rounded-lg text-sm focus:outline-none focus:border-aba-500"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-[11px] text-slate-500 mb-1",children:"Nível de dica"}),(0,b.jsx)("select",{value:C.prompt_level,onChange:a=>D({...C,prompt_level:a.target.value}),className:"w-full px-3 py-2 border border-slate-200 rounded-lg text-sm focus:outline-none focus:border-aba-500 bg-white",children:Object.entries(h).map(([a,c])=>(0,b.jsx)("option",{value:a,children:c},a))})]})]}),(0,b.jsx)("div",{className:"flex justify-end",children:(0,b.jsx)("button",{onClick:ah,disabled:G,className:"px-4 py-2 bg-aba-500 text-white text-sm font-medium rounded-lg hover:bg-aba-600 transition-colors disabled:opacity-50",children:G?"Salvando...":"Registrar Trial"})})]}),m.length>0?(0,b.jsx)("div",{className:"space-y-2",children:m.map(a=>(0,b.jsxs)("div",{className:"flex items-center justify-between p-3 rounded-xl border border-slate-200",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm font-medium text-slate-800",children:a.target_name}),(0,b.jsx)("p",{className:"text-[11px] text-slate-400 mt-0.5",children:h[a.prompt_level]||a.prompt_level})]}),(0,b.jsxs)("div",{className:"text-right",children:[(0,b.jsxs)("p",{className:"text-sm font-medium text-aba-500",children:[a.trials_correct,"/",a.trials_total]}),(0,b.jsxs)("p",{className:"text-[11px] text-slate-400",children:[a.score_pct,"%"]})]})]},a.id))}):(0,b.jsx)("p",{className:"text-xs text-slate-400 text-center py-8",children:"Nenhum trial registrado"})]}),"behaviors"===A&&(0,b.jsxs)("div",{className:"space-y-4",children:[ak&&(0,b.jsxs)("div",{className:"border border-slate-200 rounded-xl p-4 space-y-3",children:[(0,b.jsx)("h3",{className:"text-xs font-medium text-slate-600",children:"Registrar Comportamento (ABC)"}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-[11px] text-slate-500 mb-1",children:"Tipo *"}),(0,b.jsx)("input",{type:"text",value:E.behavior_type,onChange:a=>F({...E,behavior_type:a.target.value}),className:"w-full px-3 py-2 border border-slate-200 rounded-lg text-sm focus:outline-none focus:border-aba-500",placeholder:"Ex: Autolesão, Estereotipia"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-[11px] text-slate-500 mb-1",children:"Intensidade *"}),(0,b.jsx)("select",{value:E.intensity,onChange:a=>F({...E,intensity:a.target.value}),className:"w-full px-3 py-2 border border-slate-200 rounded-lg text-sm focus:outline-none focus:border-aba-500 bg-white",children:Object.entries(i).map(([a,c])=>(0,b.jsx)("option",{value:a,children:c},a))})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-[11px] text-slate-500 mb-1",children:"Antecedente (A) *"}),(0,b.jsx)("input",{type:"text",value:E.antecedent,onChange:a=>F({...E,antecedent:a.target.value}),className:"w-full px-3 py-2 border border-slate-200 rounded-lg text-sm focus:outline-none focus:border-aba-500",placeholder:"O que aconteceu antes"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-[11px] text-slate-500 mb-1",children:"Comportamento (B) *"}),(0,b.jsx)("input",{type:"text",value:E.behavior,onChange:a=>F({...E,behavior:a.target.value}),className:"w-full px-3 py-2 border border-slate-200 rounded-lg text-sm focus:outline-none focus:border-aba-500",placeholder:"O que o aprendiz fez"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-[11px] text-slate-500 mb-1",children:"Consequência (C) *"}),(0,b.jsx)("input",{type:"text",value:E.consequence,onChange:a=>F({...E,consequence:a.target.value}),className:"w-full px-3 py-2 border border-slate-200 rounded-lg text-sm focus:outline-none focus:border-aba-500",placeholder:"O que aconteceu depois"})]}),(0,b.jsx)("div",{className:"flex justify-end",children:(0,b.jsx)("button",{onClick:ai,disabled:I,className:"px-4 py-2 bg-aba-500 text-white text-sm font-medium rounded-lg hover:bg-aba-600 transition-colors disabled:opacity-50",children:I?"Salvando...":"Registrar"})})]}),o.length>0?(0,b.jsx)("div",{className:"space-y-2",children:o.map(a=>(0,b.jsxs)("div",{className:"p-3 rounded-xl border border-slate-200",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,b.jsx)("span",{className:"text-sm font-medium text-slate-800",children:a.behavior_type}),(0,b.jsx)("span",{className:`px-2 py-0.5 rounded-full text-[10px] font-medium ${"severa"===a.intensity?"bg-red-50 text-red-600":"alta"===a.intensity?"bg-orange-50 text-orange-600":"moderada"===a.intensity?"bg-amber-50 text-amber-600":"bg-slate-50 text-slate-500"}`,children:i[a.intensity]||a.intensity})]}),(0,b.jsxs)("div",{className:"grid grid-cols-3 gap-2 text-[11px]",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"text-slate-400",children:"A:"})," ",(0,b.jsx)("span",{className:"text-slate-600",children:a.antecedent})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"text-slate-400",children:"B:"})," ",(0,b.jsx)("span",{className:"text-slate-600",children:a.behavior})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"text-slate-400",children:"C:"})," ",(0,b.jsx)("span",{className:"text-slate-600",children:a.consequence})]})]})]},a.id))}):(0,b.jsx)("p",{className:"text-xs text-slate-400 text-center py-8",children:"Nenhum comportamento registrado"})]})]})]}),K&&(0,b.jsx)("div",{className:"fixed inset-0 bg-black/30 z-50 flex items-center justify-center p-4",children:(0,b.jsxs)("div",{className:"bg-white rounded-2xl w-full max-w-lg shadow-xl",children:[(0,b.jsx)("div",{className:"p-6 border-b border-slate-100",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("h2",{className:"font-serif text-lg font-light text-slate-800",children:"Novo Protocolo"}),(0,b.jsx)("button",{onClick:()=>L(!1),className:"text-slate-400 hover:text-slate-600",children:(0,b.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),(0,b.jsxs)("div",{className:"p-6 space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-xs font-medium text-slate-600 mb-1",children:"Título *"}),(0,b.jsx)("input",{type:"text",value:ac.title,onChange:a=>ad({...ac,title:a.target.value}),className:"w-full px-3 py-2 border border-slate-200 rounded-lg text-sm focus:outline-none focus:border-aba-500",placeholder:"Ex: Mando - Solicitar itens preferidos"})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-xs font-medium text-slate-600 mb-1",children:"Prática EBP"}),(0,b.jsx)("select",{value:ac.ebp_practice_id,onChange:a=>ad({...ac,ebp_practice_id:parseInt(a.target.value)}),className:"w-full px-3 py-2 border border-slate-200 rounded-lg text-sm focus:outline-none focus:border-aba-500 bg-white",children:s.length>0?s.map(a=>(0,b.jsx)("option",{value:a.id,children:a.name_pt},a.id)):(0,b.jsx)("option",{children:"Carregando..."})})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-xs font-medium text-slate-600 mb-1",children:"Domínio"}),(0,b.jsx)("input",{type:"text",value:ac.domain,onChange:a=>ad({...ac,domain:a.target.value}),className:"w-full px-3 py-2 border border-slate-200 rounded-lg text-sm focus:outline-none focus:border-aba-500",placeholder:"Ex: Comunicação"})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-xs font-medium text-slate-600 mb-1",children:"Objetivo *"}),(0,b.jsx)("textarea",{value:ac.objective,onChange:a=>ad({...ac,objective:a.target.value}),rows:2,className:"w-full px-3 py-2 border border-slate-200 rounded-lg text-sm focus:outline-none focus:border-aba-500 resize-none",placeholder:"Ex: O aprendiz solicitará itens preferidos usando mando vocal em 80% das tentativas"})]}),(0,b.jsxs)("div",{className:"grid grid-cols-3 gap-3",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-[11px] text-slate-500 mb-1",children:"Critério %"}),(0,b.jsx)("input",{type:"number",min:"50",max:"100",value:ac.mastery_criteria_pct,onChange:a=>ad({...ac,mastery_criteria_pct:parseInt(a.target.value)||80}),className:"w-full px-3 py-2 border border-slate-200 rounded-lg text-sm focus:outline-none focus:border-aba-500"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-[11px] text-slate-500 mb-1",children:"Sessões consecutivas"}),(0,b.jsx)("input",{type:"number",min:"1",max:"10",value:ac.mastery_criteria_sessions,onChange:a=>ad({...ac,mastery_criteria_sessions:parseInt(a.target.value)||3}),className:"w-full px-3 py-2 border border-slate-200 rounded-lg text-sm focus:outline-none focus:border-aba-500"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-[11px] text-slate-500 mb-1",children:"Min tentativas"}),(0,b.jsx)("input",{type:"number",min:"1",max:"50",value:ac.mastery_criteria_trials,onChange:a=>ad({...ac,mastery_criteria_trials:parseInt(a.target.value)||10}),className:"w-full px-3 py-2 border border-slate-200 rounded-lg text-sm focus:outline-none focus:border-aba-500"})]})]})]}),(0,b.jsxs)("div",{className:"p-6 border-t border-slate-100 flex justify-end gap-3",children:[(0,b.jsx)("button",{onClick:()=>L(!1),className:"px-4 py-2 text-sm text-slate-500 hover:text-slate-700 transition-colors",children:"Cancelar"}),(0,b.jsx)("button",{onClick:aj,disabled:aa,className:"px-5 py-2 bg-aba-500 text-white text-sm font-medium rounded-lg hover:bg-aba-600 transition-colors disabled:opacity-50",children:aa?"Criando...":"Criar Protocolo"})]})]})}),M&&(0,b.jsx)("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",onClick:()=>{U||N(!1)},children:(0,b.jsxs)("div",{className:"bg-white rounded-2xl w-full max-w-lg shadow-xl",onClick:a=>a.stopPropagation(),children:[(0,b.jsxs)("div",{className:"p-5 border-b border-slate-100 flex items-center justify-between",children:[(0,b.jsx)("h3",{className:"text-base font-medium text-slate-800",children:"Enviar Resumo aos Pais"}),(0,b.jsx)("button",{onClick:()=>N(!1),className:"text-slate-400 hover:text-slate-600",children:(0,b.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,b.jsx)("div",{className:"p-5 space-y-4",children:"sent"===W?(0,b.jsxs)("div",{className:"text-center py-6",children:[(0,b.jsx)("div",{className:"w-12 h-12 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-3",children:(0,b.jsx)("svg",{className:"w-6 h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),(0,b.jsx)("p",{className:"text-sm font-medium text-slate-700",children:"Resumo enviado com sucesso!"}),(0,b.jsxs)("p",{className:"text-xs text-slate-400 mt-1",children:["Email enviado para ",Q]}),(0,b.jsx)("button",{onClick:()=>N(!1),className:"mt-4 px-4 py-2 text-sm text-slate-500 hover:text-slate-700",children:"Fechar"})]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-xs font-medium text-slate-600 mb-1",children:"Para"}),S.length>0&&(0,b.jsxs)("select",{value:Q,onChange:a=>R(a.target.value),className:"w-full px-3 py-2 border border-slate-200 rounded-lg text-sm focus:outline-none focus:border-aba-500 bg-white mb-2",children:[S.filter(a=>a.email).map(a=>(0,b.jsxs)("option",{value:a.email,children:[a.name," — ",a.email]},a.id)),(0,b.jsx)("option",{value:"",children:"Outro email..."})]}),(0===S.length||""===Q)&&(0,b.jsx)("input",{type:"email",value:Q,onChange:a=>R(a.target.value),className:"w-full px-3 py-2 border border-slate-200 rounded-lg text-sm focus:outline-none focus:border-aba-500",placeholder:"email@exemplo.com"})]}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("label",{className:"block text-xs font-medium text-slate-600 mb-1",children:["Resumo da sessão ",(0,b.jsx)("span",{className:"text-slate-400",children:"(o que os pais verão)"})]}),(0,b.jsx)("textarea",{value:O,onChange:a=>P(a.target.value),rows:6,className:"w-full px-3 py-2 border border-slate-200 rounded-lg text-sm focus:outline-none focus:border-aba-500 resize-none",placeholder:"Hoje trabalhamos em... "+(k?.learner_name||"")+" demonstrou... Os próximos passos são..."}),(0,b.jsx)("p",{className:"text-[10px] text-slate-400 mt-1",children:"Não inclua scores, percentuais ou notas clínicas. Este texto será enviado diretamente aos pais."})]}),Y&&(0,b.jsx)("p",{className:"text-xs text-red-500 bg-red-50 px-3 py-2 rounded-lg",children:Y}),(0,b.jsxs)("div",{className:"flex justify-end gap-3 pt-1",children:[(0,b.jsx)("button",{onClick:()=>N(!1),className:"px-4 py-2 text-sm text-slate-500 hover:text-slate-700",children:"Cancelar"}),(0,b.jsx)("button",{onClick:_,disabled:U,className:"px-5 py-2 bg-aba-500 text-white text-sm font-medium rounded-lg hover:bg-aba-600 disabled:opacity-50 transition-colors",children:U?"Enviando...":"Aprovar e Enviar"})]})]})})]})})]})}a.s(["default",()=>j])}];

//# sourceMappingURL=app_aba_sessoes_%5Bid%5D_page_tsx_eff71ffb._.js.map