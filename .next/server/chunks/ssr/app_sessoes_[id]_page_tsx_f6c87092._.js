module.exports=[59404,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(29662),e=a.i(50944),f=a.i(38246),g=a.i(14942),h=a.i(4720),i=a.i(41710),j=a.i(41675),k=a.i(90669),l=a.i(33508);let m=(0,a.i(70106).default)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);function n({sessionId:a,onClose:d}){let[e,f]=(0,c.useState)(null),[g,n]=(0,c.useState)(!0),[o,p]=(0,c.useState)("");(0,c.useEffect)(()=>{q()},[]);let q=async()=>{try{n(!0);let b=await fetch(`/api/sessions/${a}/report`);if(b.ok){let c=await b.json();f(c),fetch("/api/audit",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"REPORT_VIEW",entity_type:"report",entity_id:a,metadata:{report_type:"session"}})})}else p("Erro ao carregar dados")}catch(a){p("Erro ao carregar dados")}finally{n(!1)}};return g?(0,b.jsx)("div",{className:"bg-white rounded-lg p-8 shadow-sm border border-blue-200 mt-6",children:(0,b.jsx)("div",{className:"flex items-center justify-center py-8",children:(0,b.jsx)("div",{className:"w-8 h-8 border-4 border-blue-600 border-t-transparent rounded-full animate-spin"})})}):o||!e?(0,b.jsx)("div",{className:"bg-white rounded-lg p-6 shadow-sm border border-red-200 mt-6",children:(0,b.jsx)("p",{className:"text-red-600",children:o||"Erro ao carregar dados"})}):(0,b.jsxs)("div",{className:"bg-gradient-to-br from-indigo-50 to-white rounded-xl p-6 shadow-sm border border-indigo-100 mt-6",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"w-10 h-10 bg-indigo-600 rounded-lg flex items-center justify-center",children:(0,b.jsx)(h.FileText,{className:"w-5 h-5 text-white"})}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("h2",{className:"text-xl font-semibold text-neutral-900",children:["Relatorio da Sessao #",e.session_number]}),(0,b.jsx)("p",{className:"text-sm text-neutral-500",children:"Registro tecnico do processo observado"})]})]}),(0,b.jsx)("button",{onClick:d,className:"p-2 hover:bg-neutral-100 rounded-lg",children:(0,b.jsx)(l.X,{className:"w-5 h-5 text-neutral-400"})})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[(0,b.jsxs)("div",{className:"bg-white rounded-lg p-4 border border-neutral-200",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,b.jsx)(j.Calendar,{className:"w-4 h-4 text-indigo-500"}),(0,b.jsx)("span",{className:"text-xs font-medium text-neutral-500 uppercase",children:"Data"})]}),(0,b.jsx)("p",{className:"text-lg font-semibold text-neutral-900",children:new Date(e.date).toLocaleDateString("pt-BR")})]}),(0,b.jsxs)("div",{className:"bg-white rounded-lg p-4 border border-neutral-200",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,b.jsx)(i.Clock,{className:"w-4 h-4 text-indigo-500"}),(0,b.jsx)("span",{className:"text-xs font-medium text-neutral-500 uppercase",children:"Duracao"})]}),(0,b.jsx)("p",{className:"text-lg font-semibold text-neutral-900",children:e.duration?`${e.duration} min`:"-"})]}),(0,b.jsxs)("div",{className:"bg-white rounded-lg p-4 border border-neutral-200",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,b.jsx)(k.Activity,{className:"w-4 h-4 text-indigo-500"}),(0,b.jsx)("span",{className:"text-xs font-medium text-neutral-500 uppercase",children:"Eventos"})]}),(0,b.jsx)("p",{className:"text-lg font-semibold text-neutral-900",children:e.total_events})]})]}),e.events.length>0&&(0,b.jsxs)("div",{className:"bg-white rounded-lg p-5 border border-neutral-200 mb-6",children:[(0,b.jsx)("h3",{className:"text-sm font-semibold text-neutral-700 mb-4 uppercase tracking-wide",children:"Eventos Registrados"}),(0,b.jsx)("div",{className:"flex flex-wrap gap-2",children:e.events.map((a,c)=>{var d;return(0,b.jsxs)("span",{className:`px-3 py-2 rounded-lg text-sm font-medium ${{AVOIDANCE_OBSERVED:"bg-red-100 text-red-700",CONFRONTATION_OBSERVED:"bg-amber-100 text-amber-700",ADJUSTMENT_OBSERVED:"bg-blue-100 text-blue-700",RECOVERY_OBSERVED:"bg-emerald-100 text-emerald-700"}[a.type]||"bg-neutral-100 text-neutral-700"}`,children:[{AVOIDANCE_OBSERVED:"Evitou",CONFRONTATION_OBSERVED:"Enfrentou",ADJUSTMENT_OBSERVED:"Ajustou",RECOVERY_OBSERVED:"Recuperou"}[d=a.type]||d,": ",a.count]},c)})})]}),e.cso&&(0,b.jsxs)("div",{className:"bg-white rounded-lg p-5 border border-neutral-200 mb-6",children:[(0,b.jsx)("h3",{className:"text-sm font-semibold text-neutral-700 mb-4 uppercase tracking-wide",children:"Indicadores de Processo (CSO)"}),(0,b.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-xs text-neutral-500 mb-1",children:"Ativacao"}),(0,b.jsx)("p",{className:"text-lg font-semibold text-neutral-900",children:null!==e.cso.activation_level?e.cso.activation_level.toFixed(1):"-"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-xs text-neutral-500 mb-1",children:"Rigidez Cognitiva"}),(0,b.jsx)("p",{className:"text-lg font-semibold text-neutral-900",children:null!==e.cso.cognitive_rigidity?e.cso.cognitive_rigidity.toFixed(1):"-"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-xs text-neutral-500 mb-1",children:"Carga Emocional"}),(0,b.jsx)("p",{className:"text-lg font-semibold text-neutral-900",children:null!==e.cso.emotional_load?e.cso.emotional_load.toFixed(1):"-"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-xs text-neutral-500 mb-1",children:"Tendencia"}),(0,b.jsx)("p",{className:"text-lg font-semibold text-neutral-900",children:"improving"===e.cso.flex_trend?"↑ Melhora":"declining"===e.cso.flex_trend?"↓ Declinio":"→ Estavel"})]})]})]}),!e.has_transcription&&(0,b.jsxs)("div",{className:"bg-amber-50 rounded-lg p-4 border border-amber-200 flex items-center gap-3",children:[(0,b.jsx)(m,{className:"w-5 h-5 text-amber-600"}),(0,b.jsx)("p",{className:"text-sm text-amber-700",children:"Nenhuma transcricao disponivel para esta sessao."})]}),(0,b.jsx)("div",{className:"mt-4 pt-4 border-t border-neutral-200",children:(0,b.jsx)("p",{className:"text-xs text-neutral-400 text-center",children:"Este relatório descreve eventos pontuais da sessão. Não contém inferência diagnóstica ou interpretação psicológica."})})]})}function o({params:a}){let{id:h}=(0,c.use)(a),i=(0,e.useRouter)(),{isLoaded:j,userId:k}=(0,d.useAuth)(),[l,m]=(0,c.useState)(null),[o,p]=(0,c.useState)(null),[q,r]=(0,c.useState)(null),[s,t]=(0,c.useState)(!0),[u,v]=(0,c.useState)(!1),[w,x]=(0,c.useState)(!1),[y,z]=(0,c.useState)(!1),[A,B]=(0,c.useState)(""),[C,D]=(0,c.useState)(!1),[E,F]=(0,c.useState)(0),[G,H]=(0,c.useState)([]),[I,J]=(0,c.useState)(!1),[K,L]=(0,c.useState)(""),[M,N]=(0,c.useState)(.5),[O,P]=(0,c.useState)(""),[Q,R]=(0,c.useState)(!1),[S,T]=(0,c.useState)(!1),[U,V]=(0,c.useState)(null),[W,X]=(0,c.useState)(null),Y=(0,c.useRef)(null),Z=(0,c.useRef)([]),$=(0,c.useRef)(null);(0,c.useEffect)(()=>{j&&k&&_()},[j,k,h]),(0,c.useEffect)(()=>()=>{$.current&&clearInterval($.current)},[]);let _=async()=>{try{t(!0);let a=await fetch(`/api/sessions/${h}`);if(a.ok){let b=await a.json();m(b.session),b.transcript&&p(b.transcript)}else i.push("/sessoes")}catch(a){console.error(a)}finally{t(!1)}},aa=async()=>{try{v(!0);let a=await fetch(`/api/sessions/${h}/finish`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({notes:A})});if(a.ok){let b=await a.json();b.pipeline&&V(b.pipeline),_()}}catch(a){console.error(a)}finally{v(!1)}},ab=async a=>{try{x(!0),X({type:"status",message:"Enviando audio...",percent:0});let b=await fetch("/api/transcribe",{method:"POST",body:a}),c=b.headers.get("content-type")||"";if(c.includes("application/json")){if(b.ok){let a=await b.json();p(a.transcript),X(null)}else{let a=await b.json();alert(a.error||"Erro"),X(null)}return}if(c.includes("text/event-stream")){let a=b.body?.getReader(),c=new TextDecoder;if(!a){alert("Erro ao ler resposta"),X(null);return}let d="";for(;;){let{done:b,value:e}=await a.read();if(b)break;let f=(d+=c.decode(e,{stream:!0})).split("\n\n");for(let a of(d=f.pop()||"",f))if(a.startsWith("data: "))try{let b=JSON.parse(a.slice(6));("progress"===b.type||"status"===b.type)&&X(b),"done"===b.type&&b.transcript&&(p(b.transcript),X(null)),"error"===b.type&&(alert(b.message||"Erro na transcricao"),X(null))}catch(a){console.error("Erro ao parsear progresso:",a)}}return}alert("Resposta inesperada do servidor"),X(null)}catch(a){console.error(a),alert("Erro ao enviar audio"),X(null)}finally{x(!1)}},ac=async a=>{let b=a.target.files?.[0];if(!b||!l)return;let c=new FormData;c.append("audio",b),c.append("session_id",l.id),c.append("patient_id",l.patient_id),await ab(c)},ad=async()=>{try{let a=await navigator.mediaDevices.getUserMedia({audio:!0}),b=new MediaRecorder(a,{mimeType:"audio/webm"});Y.current=b,Z.current=[],b.ondataavailable=a=>{a.data.size>0&&Z.current.push(a.data)},b.onstop=async()=>{a.getTracks().forEach(a=>a.stop());let b=new Blob(Z.current,{type:"audio/webm"});await ae(b)},b.start(),D(!0),F(0),$.current=setInterval(()=>F(a=>a+1),1e3)}catch(a){alert("Erro ao acessar microfone")}},ae=async a=>{if(!l)return;let b=new File([a],"gravacao.webm",{type:"audio/webm"}),c=new FormData;c.append("audio",b),c.append("session_id",l.id),c.append("patient_id",l.patient_id),await ab(c)},af=async()=>{if(o&&l)try{z(!0);let a=await fetch("/api/analyze-tcc",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({transcript_id:o.id,text:o.text,session_id:l.id,patient_id:l.patient_id})});if(a.ok){let b=await a.json();r(b.analysis)}}catch(a){console.error(a)}finally{z(!1)}},ag=async()=>{if(l)try{R(!0),(await fetch("/api/events/create",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({patient_id:l.patient_id,event_type:K,payload:{intensity:M,note:O,context:"session"},related_entity_id:l.id})})).ok&&(H(a=>[...a,{type:K,intensity:M,note:O,created_at:new Date().toISOString()}]),J(!1))}catch(a){console.error(a)}finally{R(!1)}},ah=a=>{switch(a){case"AVOIDANCE_OBSERVED":return"Evitou";case"CONFRONTATION_OBSERVED":return"Enfrentou";case"ADJUSTMENT_OBSERVED":return"Ajustou";case"RECOVERY_OBSERVED":return"Recuperou";default:return a}};return!j||s?(0,b.jsxs)("div",{className:"min-h-screen bg-white",children:[(0,b.jsx)(g.default,{}),(0,b.jsx)("main",{className:"md:ml-20 min-h-screen flex items-center justify-center",children:(0,b.jsx)("div",{className:"w-6 h-6 border-2 border-sky-500 border-t-transparent rounded-full animate-spin"})})]}):l?(0,b.jsxs)("div",{className:"min-h-screen bg-white",children:[(0,b.jsx)(g.default,{}),(0,b.jsx)("main",{className:"md:ml-20 min-h-screen pb-20 md:pb-8",children:(0,b.jsx)("div",{className:"px-4 md:px-8 lg:px-12 xl:px-16 pt-6",children:(0,b.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,b.jsxs)(f.default,{href:"/sessoes",className:"inline-flex items-center gap-2 text-slate-500 hover:text-sky-600 transition-colors mb-6 text-sm",children:[(0,b.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Voltar"]}),(0,b.jsxs)("header",{className:"flex items-start justify-between mb-8",children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)("h1",{className:"text-lg font-normal text-slate-400 tracking-tight mb-0",children:["Sessão #",l.session_number]}),(0,b.jsx)("p",{className:"text-base text-slate-400 italic font-light",children:l.patient_name})]}),(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[l.google_meet_link&&(0,b.jsxs)("a",{href:l.google_meet_link,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 px-4 py-2 bg-emerald-50 text-emerald-600 border border-emerald-200 rounded-lg hover:bg-emerald-100 transition-colors text-sm font-medium",children:[(0,b.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"})}),"Entrar no Meet"]}),"finalizada"===l.status&&(0,b.jsxs)("button",{onClick:()=>T(!S),className:"flex items-center gap-2 px-4 py-2 bg-slate-100 text-slate-700 rounded-lg hover:bg-slate-200 transition-colors text-sm font-medium",children:[(0,b.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Relatório"]}),(0,b.jsx)("span",{className:`px-3 py-1.5 rounded-lg text-sm font-medium border ${(a=>{switch(a){case"em_andamento":return"text-sky-600 bg-sky-50 border-sky-200";case"agendada":default:return"text-slate-600 bg-slate-50 border-slate-200";case"finalizada":return"text-slate-500 bg-slate-50 border-slate-200"}})(l.status)}`,children:(a=>{switch(a){case"em_andamento":return"Em andamento";case"agendada":return"Agendada";case"finalizada":return"Finalizada";default:return a}})(l.status)})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-3 gap-4 mb-8 pb-8 border-b border-slate-100",children:[(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("p",{className:"text-xs text-slate-400 uppercase tracking-wider mb-1",children:"Paciente"}),(0,b.jsx)("p",{className:"text-slate-900 font-medium",children:l.patient_name})]}),(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("p",{className:"text-xs text-slate-400 uppercase tracking-wider mb-1",children:"Data"}),(0,b.jsx)("p",{className:"text-slate-900 font-medium",children:new Date(l.scheduled_at).toLocaleDateString("pt-BR")})]}),(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("p",{className:"text-xs text-slate-400 uppercase tracking-wider mb-1",children:"Duração"}),(0,b.jsx)("p",{className:"text-slate-900 font-medium",children:l.duration_minutes?`${l.duration_minutes} min`:"agendada"===l.status?"Aguardando":"Em andamento"})]})]}),S&&(0,b.jsx)(n,{sessionId:h,onClose:()=>T(!1)}),"em_andamento"===l.status&&(0,b.jsxs)("section",{className:"mb-8 pb-8 border-b border-slate-100",children:[(0,b.jsx)("h2",{className:"text-sm font-medium text-slate-500 uppercase tracking-wide mb-2",children:"Micro-eventos de Flexibilidade"}),(0,b.jsx)("p",{className:"text-sm text-slate-400 mb-4",children:"Marque comportamentos observados durante a sessão"}),(0,b.jsx)("div",{className:"grid grid-cols-4 gap-3 mb-4",children:[{type:"AVOIDANCE_OBSERVED",label:"Evitou",color:"amber"},{type:"CONFRONTATION_OBSERVED",label:"Enfrentou",color:"emerald"},{type:"ADJUSTMENT_OBSERVED",label:"Ajustou",color:"sky"},{type:"RECOVERY_OBSERVED",label:"Recuperou",color:"violet"}].map(a=>(0,b.jsx)("button",{onClick:()=>{L(a.type),N(.5),P(""),J(!0)},className:`flex flex-col items-center gap-2 p-4 rounded-lg border-2 border-${a.color}-200 bg-${a.color}-50 hover:bg-${a.color}-100 transition-colors`,children:(0,b.jsx)("span",{className:`text-sm font-medium text-${a.color}-700`,children:a.label})},a.type))}),G.length>0&&(0,b.jsx)("div",{className:"flex flex-wrap gap-2",children:G.map((a,c)=>(0,b.jsxs)("span",{className:`inline-flex items-center gap-1 px-3 py-1 rounded-full text-xs font-medium border ${(a=>{switch(a){case"AVOIDANCE_OBSERVED":return"bg-amber-50 text-amber-700 border-amber-200";case"CONFRONTATION_OBSERVED":return"bg-emerald-50 text-emerald-700 border-emerald-200";case"ADJUSTMENT_OBSERVED":return"bg-sky-50 text-sky-700 border-sky-200";case"RECOVERY_OBSERVED":return"bg-violet-50 text-violet-700 border-violet-200";default:return"bg-slate-50 text-slate-700 border-slate-200"}})(a.type)}`,children:[ah(a.type)," (",(10*a.intensity).toFixed(0),"/10)",a.note&&(0,b.jsxs)("span",{className:"text-slate-400",children:["- ",a.note]})]},c))})]}),(0,b.jsxs)("section",{className:"mb-8 pb-8 border-b border-slate-100",children:[(0,b.jsx)("h2",{className:"text-sm font-medium text-slate-500 uppercase tracking-wide mb-4",children:"Transcrição"}),W&&(0,b.jsxs)("div",{className:"mb-4 p-4 bg-sky-50 rounded-lg border border-sky-200",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,b.jsx)("p",{className:"text-sm font-medium text-sky-800",children:W.message}),void 0!==W.percent&&(0,b.jsxs)("span",{className:"text-sm font-semibold text-sky-700",children:[W.percent,"%"]})]}),(0,b.jsx)("div",{className:"w-full bg-sky-100 rounded-full h-2.5",children:(0,b.jsx)("div",{className:"bg-sky-500 h-2.5 rounded-full transition-all duration-500",style:{width:`${W.percent||0}%`}})}),void 0!==W.minutesLeft&&W.minutesLeft>0&&(0,b.jsxs)("p",{className:"text-xs text-sky-600 mt-2",children:["Tempo estimado: ~",W.minutesLeft," min restante",W.minutesLeft>1?"s":""]})]}),o?(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"bg-slate-50 rounded-lg p-4 border border-slate-200 max-h-48 overflow-y-auto mb-4",children:(0,b.jsx)("p",{className:"whitespace-pre-wrap text-sm text-slate-700",children:o.text})}),(0,b.jsxs)("p",{className:"text-xs text-slate-400 mb-4",children:["Transcrito em ",new Date(o.created_at).toLocaleString("pt-BR")]}),!q&&(0,b.jsxs)("button",{onClick:af,disabled:y,className:"flex items-center gap-2 px-5 py-2.5 bg-violet-500 text-white rounded-lg hover:bg-violet-600 disabled:opacity-50 transition-colors text-sm font-medium",children:[y?(0,b.jsx)("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}):(0,b.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})}),y?"Analisando...":"Analisar TCC"]})]}):!W&&(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-slate-400 italic mb-4 text-sm",children:"Nenhuma transcrição"}),(0,b.jsxs)("div",{className:"flex gap-3",children:[C?(0,b.jsxs)("button",{onClick:()=>{Y.current&&C&&(Y.current.stop(),D(!1),$.current&&clearInterval($.current))},className:"flex items-center gap-2 px-5 py-2.5 bg-slate-800 text-white rounded-lg animate-pulse text-sm font-medium",children:[(0,b.jsx)("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("rect",{x:"6",y:"6",width:"12",height:"12"})}),"Parar (",`${Math.floor(E/60).toString().padStart(2,"0")}:${(E%60).toString().padStart(2,"0")}`,")"]}):(0,b.jsxs)("button",{onClick:ad,disabled:w,className:"flex items-center gap-2 px-5 py-2.5 bg-rose-50 text-rose-600 border border-rose-200 rounded-lg hover:bg-rose-100 disabled:opacity-50 transition-colors text-sm font-medium",children:[(0,b.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 11a7 7 0 01-7 7m0 0a7 7 0 01-7-7m7 7v4m0 0H8m4 0h4m-4-8a3 3 0 01-3-3V5a3 3 0 116 0v6a3 3 0 01-3 3z"})}),"Gravar"]}),(0,b.jsxs)("label",{className:`flex items-center gap-2 px-5 py-2.5 bg-sky-50 text-sky-600 border border-sky-200 rounded-lg cursor-pointer hover:bg-sky-100 transition-colors text-sm font-medium ${w?"opacity-50":""}`,children:[w?(0,b.jsx)("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}):(0,b.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"})}),w?"Enviando...":"Upload",(0,b.jsx)("input",{type:"file",accept:"audio/*",onChange:ac,disabled:w,className:"hidden"})]})]})]})]}),q&&(0,b.jsxs)("section",{className:"mb-8 pb-8 border-b border-slate-100",children:[(0,b.jsx)("h2",{className:"text-sm font-medium text-slate-500 uppercase tracking-wide mb-4",children:"Análise TCC"}),(0,b.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,b.jsxs)("div",{className:"bg-sky-50 rounded-lg p-4 border border-sky-200",children:[(0,b.jsx)("h3",{className:"font-medium text-sky-800 mb-3 text-sm",children:"Fatos"}),(0,b.jsx)("ul",{className:"space-y-2",children:q.fatos.map((a,c)=>(0,b.jsx)("li",{className:"text-sm bg-white rounded p-2 border border-sky-100",children:a},c))})]}),(0,b.jsxs)("div",{className:"bg-amber-50 rounded-lg p-4 border border-amber-200",children:[(0,b.jsx)("h3",{className:"font-medium text-amber-800 mb-3 text-sm",children:"Pensamentos"}),(0,b.jsx)("ul",{className:"space-y-2",children:q.pensamentos.map((a,c)=>(0,b.jsx)("li",{className:"text-sm bg-white rounded p-2 border border-amber-100",children:a},c))})]}),(0,b.jsxs)("div",{className:"bg-rose-50 rounded-lg p-4 border border-rose-200",children:[(0,b.jsx)("h3",{className:"font-medium text-rose-800 mb-3 text-sm",children:"Emoções"}),(0,b.jsx)("ul",{className:"space-y-2",children:q.emocoes.map((a,c)=>(0,b.jsx)("li",{className:"text-sm bg-white rounded p-2 border border-rose-100",children:a},c))})]})]})]}),U&&(0,b.jsxs)("section",{className:"mb-8 pb-8 border-b border-slate-100",children:[(0,b.jsx)("h2",{className:"text-sm font-medium text-slate-500 uppercase tracking-wide mb-4",children:"Pipeline TCC Processado"}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[U.event_created?(0,b.jsx)("svg",{className:"w-4 h-4 text-emerald-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}):(0,b.jsx)("span",{className:"w-4 h-4 rounded-full bg-slate-200"}),(0,b.jsx)("span",{className:"text-slate-600",children:"Evento SESSION_END criado"})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[U.cso_updated?(0,b.jsx)("svg",{className:"w-4 h-4 text-emerald-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}):(0,b.jsx)("span",{className:"w-4 h-4 rounded-full bg-slate-200"}),(0,b.jsx)("span",{className:"text-slate-600",children:"CSO atualizado"})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[U.suggestion_generated?(0,b.jsx)("svg",{className:"w-4 h-4 text-emerald-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}):(0,b.jsx)("span",{className:"w-4 h-4 rounded-full bg-slate-200"}),(0,b.jsx)("span",{className:"text-slate-600",children:"Sugestão gerada"})]}),(0,b.jsx)("div",{className:"flex items-center gap-2",children:(0,b.jsxs)("span",{className:`px-2 py-1 rounded text-xs font-medium ${"up"===U.flex_trend?"bg-emerald-50 text-emerald-700":"down"===U.flex_trend?"bg-amber-50 text-amber-700":"bg-slate-50 text-slate-600"}`,children:["Flexibilidade: ",U.flex_trend]})})]}),U.micro_events.confrontations+U.micro_events.avoidances+U.micro_events.adjustments+U.micro_events.recoveries>0&&(0,b.jsxs)("div",{className:"mt-4 flex gap-3 text-xs",children:[(0,b.jsxs)("span",{className:"px-2 py-1 bg-emerald-50 rounded border border-emerald-200 text-emerald-700",children:["Enfrentou: ",U.micro_events.confrontations]}),(0,b.jsxs)("span",{className:"px-2 py-1 bg-amber-50 rounded border border-amber-200 text-amber-700",children:["Evitou: ",U.micro_events.avoidances]}),(0,b.jsxs)("span",{className:"px-2 py-1 bg-sky-50 rounded border border-sky-200 text-sky-700",children:["Ajustou: ",U.micro_events.adjustments]}),(0,b.jsxs)("span",{className:"px-2 py-1 bg-violet-50 rounded border border-violet-200 text-violet-700",children:["Recuperou: ",U.micro_events.recoveries]})]})]}),"em_andamento"===l.status&&(0,b.jsxs)("section",{children:[(0,b.jsx)("h2",{className:"text-sm font-medium text-slate-500 uppercase tracking-wide mb-4",children:"Finalizar Sessão"}),(0,b.jsx)("textarea",{value:A,onChange:a=>B(a.target.value),placeholder:"Observações finais...",className:"w-full px-4 py-3 border border-slate-200 rounded-lg mb-4 h-32 resize-none text-sm focus:outline-none focus:ring-2 focus:ring-sky-500 focus:border-transparent"}),(0,b.jsxs)("button",{onClick:aa,disabled:u,className:"flex items-center gap-2 px-5 py-2.5 bg-emerald-50 text-emerald-600 border border-emerald-200 rounded-lg hover:bg-emerald-100 disabled:opacity-50 transition-colors text-sm font-medium",children:[u?(0,b.jsx)("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}):(0,b.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),u?"Finalizando...":"Finalizar Sessão"]})]})]})})}),I&&(0,b.jsx)("div",{className:"fixed inset-0 bg-slate-900/50 flex items-center justify-center z-50 p-4",children:(0,b.jsxs)("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-md",children:[(0,b.jsx)("div",{className:"p-6 border-b border-slate-100",children:(0,b.jsxs)("h3",{className:"font-serif text-xl font-light text-slate-900",children:["Registrar: ",ah(K)]})}),(0,b.jsxs)("div",{className:"p-6 space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:["Intensidade: ",(10*M).toFixed(0),"/10"]}),(0,b.jsx)("input",{type:"range",min:"0",max:"1",step:"0.1",value:M,onChange:a=>N(parseFloat(a.target.value)),className:"w-full"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Nota curta (opcional)"}),(0,b.jsx)("input",{type:"text",value:O,onChange:a=>P(a.target.value),placeholder:"Ex: evitou contato visual ao falar do pai",className:"w-full px-3 py-2 border border-slate-200 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-sky-500",maxLength:200})]})]}),(0,b.jsxs)("div",{className:"flex gap-3 p-6 border-t border-slate-100 bg-slate-50 rounded-b-xl",children:[(0,b.jsx)("button",{onClick:()=>J(!1),className:"flex-1 px-4 py-2 border border-slate-200 rounded-lg hover:bg-slate-100 text-sm text-slate-600",children:"Cancelar"}),(0,b.jsx)("button",{onClick:ag,disabled:Q,className:"flex-1 px-4 py-2 bg-sky-500 text-white rounded-lg hover:bg-sky-600 disabled:opacity-50 text-sm font-medium",children:Q?"Salvando...":"Salvar"})]})]})})]}):(0,b.jsxs)("div",{className:"min-h-screen bg-white",children:[(0,b.jsx)(g.default,{}),(0,b.jsx)("main",{className:"md:ml-20 min-h-screen flex items-center justify-center",children:(0,b.jsx)("p",{className:"text-slate-500 italic",children:"Sessão não encontrada"})})]})}a.s(["default",()=>o],59404)}];

//# sourceMappingURL=app_sessoes_%5Bid%5D_page_tsx_f6c87092._.js.map