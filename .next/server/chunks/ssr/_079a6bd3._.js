module.exports=[91735,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d={assign:function(){return i},searchParamsToUrlQuery:function(){return f},urlQueryToSearchParams:function(){return h}};for(var e in d)Object.defineProperty(c,e,{enumerable:!0,get:d[e]});function f(a){let b={};for(let[c,d]of a.entries()){let a=b[c];void 0===a?b[c]=d:Array.isArray(a)?a.push(d):b[c]=[a,d]}return b}function g(a){return"string"==typeof a?a:("number"!=typeof a||isNaN(a))&&"boolean"!=typeof a?"":String(a)}function h(a){let b=new URLSearchParams;for(let[c,d]of Object.entries(a))if(Array.isArray(d))for(let a of d)b.append(c,g(a));else b.set(c,g(d));return b}function i(a,...b){for(let c of b){for(let b of c.keys())a.delete(b);for(let[b,d]of c.entries())a.append(b,d)}return a}},43087,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d={formatUrl:function(){return h},formatWithValidation:function(){return j},urlObjectKeys:function(){return i}};for(var e in d)Object.defineProperty(c,e,{enumerable:!0,get:d[e]});let f=a.r(46058)._(a.r(91735)),g=/https?|ftp|gopher|file/;function h(a){let{auth:b,hostname:c}=a,d=a.protocol||"",e=a.pathname||"",h=a.hash||"",i=a.query||"",j=!1;b=b?encodeURIComponent(b).replace(/%3A/i,":")+"@":"",a.host?j=b+a.host:c&&(j=b+(~c.indexOf(":")?`[${c}]`:c),a.port&&(j+=":"+a.port)),i&&"object"==typeof i&&(i=String(f.urlQueryToSearchParams(i)));let k=a.search||i&&`?${i}`||"";return d&&!d.endsWith(":")&&(d+=":"),a.slashes||(!d||g.test(d))&&!1!==j?(j="//"+(j||""),e&&"/"!==e[0]&&(e="/"+e)):j||(j=""),h&&"#"!==h[0]&&(h="#"+h),k&&"?"!==k[0]&&(k="?"+k),e=e.replace(/[?#]/g,encodeURIComponent),k=k.replace("#","%23"),`${d}${j}${e}${k}${h}`}let i=["auth","hash","host","hostname","href","path","pathname","port","protocol","query","search","slashes"];function j(a){return h(a)}},46272,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d={DecodeError:function(){return r},MiddlewareNotFoundError:function(){return v},MissingStaticPage:function(){return u},NormalizeError:function(){return s},PageNotFoundError:function(){return t},SP:function(){return p},ST:function(){return q},WEB_VITALS:function(){return f},execOnce:function(){return g},getDisplayName:function(){return l},getLocationOrigin:function(){return j},getURL:function(){return k},isAbsoluteUrl:function(){return i},isResSent:function(){return m},loadGetInitialProps:function(){return o},normalizeRepeatedSlashes:function(){return n},stringifyError:function(){return w}};for(var e in d)Object.defineProperty(c,e,{enumerable:!0,get:d[e]});let f=["CLS","FCP","FID","INP","LCP","TTFB"];function g(a){let b,c=!1;return(...d)=>(c||(c=!0,b=a(...d)),b)}let h=/^[a-zA-Z][a-zA-Z\d+\-.]*?:/,i=a=>h.test(a);function j(){let{protocol:a,hostname:b,port:c}=window.location;return`${a}//${b}${c?":"+c:""}`}function k(){let{href:a}=window.location,b=j();return a.substring(b.length)}function l(a){return"string"==typeof a?a:a.displayName||a.name||"Unknown"}function m(a){return a.finished||a.headersSent}function n(a){let b=a.split("?");return b[0].replace(/\\/g,"/").replace(/\/\/+/g,"/")+(b[1]?`?${b.slice(1).join("?")}`:"")}async function o(a,b){let c=b.res||b.ctx&&b.ctx.res;if(!a.getInitialProps)return b.ctx&&b.Component?{pageProps:await o(b.Component,b.ctx)}:{};let d=await a.getInitialProps(b);if(c&&m(c))return d;if(!d)throw Object.defineProperty(Error(`"${l(a)}.getInitialProps()" should resolve to an object. But found "${d}" instead.`),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0});return d}let p="u">typeof performance,q=p&&["mark","measure","getEntriesByName"].every(a=>"function"==typeof performance[a]);class r extends Error{}class s extends Error{}class t extends Error{constructor(a){super(),this.code="ENOENT",this.name="PageNotFoundError",this.message=`Cannot find module for page: ${a}`}}class u extends Error{constructor(a,b){super(),this.message=`Failed to load static file for page: ${a} ${b}`}}class v extends Error{constructor(){super(),this.code="ENOENT",this.message="Cannot find the middleware module"}}function w(a){return JSON.stringify({message:a.message,stack:a.stack})}},8868,(a,b,c)=>{"use strict";function d(a){let b=a.indexOf("#"),c=a.indexOf("?"),d=c>-1&&(b<0||c<b);return d||b>-1?{pathname:a.substring(0,d?c:b),query:d?a.substring(c,b>-1?b:void 0):"",hash:b>-1?a.slice(b):""}:{pathname:a,query:"",hash:""}}Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"parsePath",{enumerable:!0,get:function(){return d}})},5407,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"addPathPrefix",{enumerable:!0,get:function(){return e}});let d=a.r(8868);function e(a,b){if(!a.startsWith("/")||!b)return a;let{pathname:c,query:e,hash:f}=(0,d.parsePath)(a);return`${b}${c}${e}${f}`}},46112,(a,b,c)=>{"use strict";function d(a){return a.replace(/\/$/,"")||"/"}Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"removeTrailingSlash",{enumerable:!0,get:function(){return d}})},25075,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"normalizePathTrailingSlash",{enumerable:!0,get:function(){return f}});let d=a.r(46112),e=a.r(8868),f=a=>{if(!a.startsWith("/"))return a;let{pathname:b,query:c,hash:f}=(0,e.parsePath)(a);return`${(0,d.removeTrailingSlash)(b)}${c}${f}`};("function"==typeof c.default||"object"==typeof c.default&&null!==c.default)&&void 0===c.default.__esModule&&(Object.defineProperty(c.default,"__esModule",{value:!0}),Object.assign(c.default,c),b.exports=c.default)},38243,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"addBasePath",{enumerable:!0,get:function(){return f}});let d=a.r(5407),e=a.r(25075);function f(a,b){return(0,e.normalizePathTrailingSlash)((0,d.addPathPrefix)(a,""))}("function"==typeof c.default||"object"==typeof c.default&&null!==c.default)&&void 0===c.default.__esModule&&(Object.defineProperty(c.default,"__esModule",{value:!0}),Object.assign(c.default,c),b.exports=c.default)},92434,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"warnOnce",{enumerable:!0,get:function(){return d}});let d=a=>{}},19924,(a,b,c)=>{"use strict";function d(a){return a.startsWith("/")?a:`/${a}`}Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"ensureLeadingSlash",{enumerable:!0,get:function(){return d}})},53808,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d={normalizeAppPath:function(){return h},normalizeRscURL:function(){return i}};for(var e in d)Object.defineProperty(c,e,{enumerable:!0,get:d[e]});let f=a.r(19924),g=a.r(39118);function h(a){return(0,f.ensureLeadingSlash)(a.split("/").reduce((a,b,c,d)=>!b||(0,g.isGroupSegment)(b)||"@"===b[0]||("page"===b||"route"===b)&&c===d.length-1?a:`${a}/${b}`,""))}function i(a){return a.replace(/\.rsc($|\?)/,"$1")}},18099,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d={INTERCEPTION_ROUTE_MARKERS:function(){return g},extractInterceptionRouteInformation:function(){return i},isInterceptionRouteAppPath:function(){return h}};for(var e in d)Object.defineProperty(c,e,{enumerable:!0,get:d[e]});let f=a.r(53808),g=["(..)(..)","(.)","(..)","(...)"];function h(a){return void 0!==a.split("/").find(a=>g.find(b=>a.startsWith(b)))}function i(a){let b,c,d;for(let e of a.split("/"))if(c=g.find(a=>e.startsWith(a))){[b,d]=a.split(c,2);break}if(!b||!c||!d)throw Object.defineProperty(Error(`Invalid interception route: ${a}. Must be in the format /<intercepting route>/(..|...|..)(..)/<intercepted route>`),"__NEXT_ERROR_CODE",{value:"E269",enumerable:!1,configurable:!0});switch(b=(0,f.normalizeAppPath)(b),c){case"(.)":d="/"===b?`/${d}`:b+"/"+d;break;case"(..)":if("/"===b)throw Object.defineProperty(Error(`Invalid interception route: ${a}. Cannot use (..) marker at the root level, use (.) instead.`),"__NEXT_ERROR_CODE",{value:"E207",enumerable:!1,configurable:!0});d=b.split("/").slice(0,-1).concat(d).join("/");break;case"(...)":d="/"+d;break;case"(..)(..)":let e=b.split("/");if(e.length<=2)throw Object.defineProperty(Error(`Invalid interception route: ${a}. Cannot use (..)(..) marker at the root level or one level up.`),"__NEXT_ERROR_CODE",{value:"E486",enumerable:!1,configurable:!0});d=e.slice(0,-2).concat(d).join("/");break;default:throw Object.defineProperty(Error("Invariant: unexpected marker"),"__NEXT_ERROR_CODE",{value:"E112",enumerable:!1,configurable:!0})}return{interceptingRoute:b,interceptedRoute:d}}},11679,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"pathHasPrefix",{enumerable:!0,get:function(){return e}});let d=a.r(8868);function e(a,b){if("string"!=typeof a)return!1;let{pathname:c}=(0,d.parsePath)(a);return c===b||c.startsWith(b+"/")}},78897,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"hasBasePath",{enumerable:!0,get:function(){return e}});let d=a.r(11679);function e(a){return(0,d.pathHasPrefix)(a,"")}("function"==typeof c.default||"object"==typeof c.default&&null!==c.default)&&void 0===c.default.__esModule&&(Object.defineProperty(c.default,"__esModule",{value:!0}),Object.assign(c.default,c),b.exports=c.default)},11762,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"isLocalURL",{enumerable:!0,get:function(){return f}});let d=a.r(46272),e=a.r(78897);function f(a){if(!(0,d.isAbsoluteUrl)(a))return!0;try{let b=(0,d.getLocationOrigin)(),c=new URL(a,b);return c.origin===b&&(0,e.hasBasePath)(c.pathname)}catch(a){return!1}}},3314,a=>{"use strict";let b=(0,a.i(70106).default)("shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);a.s(["Shield",()=>b],3314)},96221,a=>{"use strict";let b=(0,a.i(70106).default)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);a.s(["Loader2",()=>b],96221)},88367,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944),e=a.i(38246),f=a.i(210),g=a.i(3314),h=a.i(96221);let i=(0,a.i(70106).default)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]]);function j(){let[a,j]=(0,c.useState)([]),[k,l]=(0,c.useState)(!0),[m,n]=(0,c.useState)(!1),[o,p]=(0,c.useState)(""),q=(0,d.useRouter)();(0,c.useEffect)(()=>{(async()=>{try{let a=await fetch("/api/user/tenant");if(!(await a.json()).isAdmin)return void q.push("/dashboard");n(!0);let b=await fetch("/api/admin/tenants");if(b.ok){let a=await b.json();j(a.tenants||[])}}catch(a){console.error("[ADMIN] Erro:",a)}finally{l(!1)}})()},[]);let r=async(a,b)=>{try{(await fetch("/api/admin/tenants",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({tenantId:a,trialStatus:b})})).ok&&j(c=>c.map(c=>c.id===a?{...c,trial_status:b}:c))}catch(a){console.error("[ADMIN] Erro ao atualizar:",a)}},s=a.filter(a=>a.name?.toLowerCase().includes(o.toLowerCase())||a.email?.toLowerCase().includes(o.toLowerCase())||a.crp?.toLowerCase().includes(o.toLowerCase()));return k?(0,b.jsx)("div",{className:"min-h-screen bg-neutral-50 flex items-center justify-center",children:(0,b.jsx)(h.Loader2,{className:"w-8 h-8 animate-spin text-blue-600"})}):m?(0,b.jsxs)("div",{className:"min-h-screen bg-neutral-50",children:[(0,b.jsx)("header",{className:"bg-white border-b border-neutral-200 sticky top-0 z-40",children:(0,b.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:(0,b.jsx)("div",{className:"flex items-center justify-between",children:(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)(e.default,{href:"/dashboard",className:"text-neutral-400 hover:text-neutral-600",children:(0,b.jsx)(f.ArrowLeft,{className:"w-5 h-5"})}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("h1",{className:"text-2xl font-bold text-neutral-900 flex items-center gap-2",children:[(0,b.jsx)(g.Shield,{className:"w-6 h-6 text-blue-600"})," Painel Admin"]}),(0,b.jsxs)("p",{className:"text-sm text-neutral-500",children:[a.length," profissionais cadastrados"]})]})]})})})}),(0,b.jsxs)("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-8",children:[(0,b.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-4 border border-neutral-200",children:[(0,b.jsx)("p",{className:"text-sm text-neutral-500",children:"Total"}),(0,b.jsx)("p",{className:"text-2xl font-bold",children:a.length})]}),(0,b.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-4 border border-emerald-200",children:[(0,b.jsx)("p",{className:"text-sm text-neutral-500",children:"Pagos"}),(0,b.jsx)("p",{className:"text-2xl font-bold text-emerald-600",children:a.filter(a=>"paid"===a.trial_status).length})]}),(0,b.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-4 border border-amber-200",children:[(0,b.jsx)("p",{className:"text-sm text-neutral-500",children:"Em Trial"}),(0,b.jsx)("p",{className:"text-2xl font-bold text-amber-600",children:a.filter(a=>"trial"===a.trial_status).length})]}),(0,b.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-4 border border-red-200",children:[(0,b.jsx)("p",{className:"text-sm text-neutral-500",children:"Expirados"}),(0,b.jsx)("p",{className:"text-2xl font-bold text-red-600",children:a.filter(a=>"expired"===a.trial_status).length})]})]}),(0,b.jsx)("div",{className:"mb-6",children:(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)(i,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-neutral-400"}),(0,b.jsx)("input",{type:"text",placeholder:"Buscar por nome, email ou CRP...",value:o,onChange:a=>p(a.target.value),className:"w-full pl-10 pr-4 py-3 border border-neutral-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})}),(0,b.jsx)("div",{className:"bg-white rounded-lg shadow-sm border border-neutral-200 overflow-hidden",children:(0,b.jsx)("div",{className:"overflow-x-auto",children:(0,b.jsxs)("table",{className:"w-full",children:[(0,b.jsx)("thead",{className:"bg-neutral-50 border-b border-neutral-200",children:(0,b.jsxs)("tr",{children:[(0,b.jsx)("th",{className:"text-left px-4 py-3 text-sm font-medium text-neutral-600",children:"Profissional"}),(0,b.jsx)("th",{className:"text-left px-4 py-3 text-sm font-medium text-neutral-600",children:"CRP"}),(0,b.jsx)("th",{className:"text-left px-4 py-3 text-sm font-medium text-neutral-600",children:"Status"}),(0,b.jsx)("th",{className:"text-left px-4 py-3 text-sm font-medium text-neutral-600",children:"Trial"}),(0,b.jsx)("th",{className:"text-left px-4 py-3 text-sm font-medium text-neutral-600",children:"Pacientes"}),(0,b.jsx)("th",{className:"text-left px-4 py-3 text-sm font-medium text-neutral-600",children:"Sessões"}),(0,b.jsx)("th",{className:"text-left px-4 py-3 text-sm font-medium text-neutral-600",children:"Acoes"})]})}),(0,b.jsx)("tbody",{className:"divide-y divide-neutral-100",children:s.map(a=>(0,b.jsxs)("tr",{className:"hover:bg-neutral-50",children:[(0,b.jsxs)("td",{className:"px-4 py-3",children:[(0,b.jsx)("p",{className:"font-medium text-neutral-900",children:a.name}),(0,b.jsx)("p",{className:"text-sm text-neutral-500",children:a.email})]}),(0,b.jsx)("td",{className:"px-4 py-3 text-sm text-neutral-700",children:a.crp?`${a.crp}/${a.crp_uf||""}`:"-"}),(0,b.jsx)("td",{className:"px-4 py-3",children:(0,b.jsx)("span",{className:`inline-block px-2 py-1 rounded-full text-xs font-medium ${(a=>{switch(a){case"paid":return"bg-emerald-100 text-emerald-700";case"trial":return"bg-amber-100 text-amber-700";case"expired":return"bg-red-100 text-red-700";case"blocked":return"bg-neutral-200 text-neutral-600";default:return"bg-neutral-100 text-neutral-600"}})(a.trial_status)}`,children:(a=>{switch(a){case"paid":return"Pago";case"trial":return"Trial";case"expired":return"Expirado";case"blocked":return"Bloqueado";default:return a}})(a.trial_status)})}),(0,b.jsx)("td",{className:"px-4 py-3 text-sm text-neutral-700",children:"trial"===a.trial_status?(a=>{if(!a)return"-";let b=Math.ceil((new Date(a).getTime()-Date.now())/864e5);return b<0?"Expirado":`${b} dias`})(a.trial_end):"-"}),(0,b.jsxs)("td",{className:"px-4 py-3 text-sm text-neutral-700",children:[a.patient_count,"/",999999===a.max_patients?"∞":a.max_patients]}),(0,b.jsxs)("td",{className:"px-4 py-3 text-sm text-neutral-700",children:[a.session_count,"/",999999===a.max_sessions?"∞":a.max_sessions]}),(0,b.jsx)("td",{className:"px-4 py-3",children:!a.is_admin&&(0,b.jsxs)("select",{value:a.trial_status,onChange:b=>r(a.id,b.target.value),className:"text-sm border border-neutral-300 rounded px-2 py-1",children:[(0,b.jsx)("option",{value:"trial",children:"Trial"}),(0,b.jsx)("option",{value:"paid",children:"Pago"}),(0,b.jsx)("option",{value:"expired",children:"Expirado"}),(0,b.jsx)("option",{value:"blocked",children:"Bloqueado"})]})})]},a.id))})]})})})]})]}):null}a.s(["default",()=>j],88367)}];

//# sourceMappingURL=_079a6bd3._.js.map