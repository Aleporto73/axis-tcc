module.exports=[85262,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944),e=a.i(38246);let f={draft:"Rascunho",active:"Ativo",mastered:"Dominado",generalization:"GeneralizaÃ§Ã£o",maintained:"Mantido",archived:"Arquivado",suspended:"Suspenso",discontinued:"Descontinuado"},g={draft:"bg-slate-100 text-slate-500",active:"bg-blue-50 text-blue-600",mastered:"bg-green-50 text-green-600",generalization:"bg-purple-50 text-purple-600",maintained:"bg-emerald-50 text-emerald-600",archived:"bg-slate-50 text-slate-400",suspended:"bg-amber-50 text-amber-600",discontinued:"bg-red-50 text-red-500"},h={scheduled:"bg-blue-50 text-blue-600",in_progress:"bg-aba-500/10 text-aba-500",completed:"bg-green-50 text-green-600",cancelled:"bg-slate-100 text-slate-400"},i={scheduled:"Agendada",in_progress:"Em andamento",completed:"ConcluÃ­da",cancelled:"Cancelada"},j={draft:["active","archived"],active:["mastered","suspended","discontinued"],mastered:["generalization","regression"],generalization:["maintenance","regression"],maintenance:["maintained","regression"],maintained:["archived","regression"],regression:["active"],suspended:["active","discontinued"]},k=[{value:"comunicacao",label:"ComunicaÃ§Ã£o"},{value:"social",label:"Social"},{value:"academico",label:"AcadÃªmico"},{value:"autocuidado",label:"Autocuidado"},{value:"motor",label:"Motor"},{value:"comportamento",label:"Comportamento"},{value:"brincar",label:"Brincar"},{value:"cognitivo",label:"Cognitivo"}];function l(){var a;let l=(0,d.useParams)().id,[m,n]=(0,c.useState)(null),[o,p]=(0,c.useState)([]),[q,r]=(0,c.useState)([]),[s,t]=(0,c.useState)([]),[u,v]=(0,c.useState)(!0),[w,x]=(0,c.useState)(null),[y,z]=(0,c.useState)("protocols"),[A,B]=(0,c.useState)(null),[C,D]=(0,c.useState)(!1),[E,F]=(0,c.useState)(null),[G,H]=(0,c.useState)([]),[I,J]=(0,c.useState)(!1),[K,L]=(0,c.useState)(!1),[M,N]=(0,c.useState)({name:"",email:"",phone:"",relationship:""}),[O,P]=(0,c.useState)(!1),Q=async()=>{J(!0);try{let a=await fetch("/api/aba/guardians?learner_id="+l),b=await a.json();H(b.guardians||[])}catch{}J(!1)},R=async()=>{if(M.name){P(!0);try{(await fetch("/api/aba/guardians",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({learner_id:l,...M})})).ok&&(N({name:"",email:"",phone:"",relationship:""}),L(!1),Q())}catch{}P(!1)}},S=async a=>{confirm("Remover este responsÃ¡vel?")&&(await fetch("/api/aba/guardians?id="+a,{method:"DELETE"}),Q())},[T,U]=(0,c.useState)(!1),V=async()=>{U(!0);try{let a=await fetch("/api/portal/invite",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({learner_id:l,guardian_name:"ResponsÃ¡vel"})}),b=await a.json();b.link&&F(b.link)}catch{alert("Erro ao gerar link")}U(!1)},[W,X]=(0,c.useState)([]),[Y,Z]=(0,c.useState)(!1),[$,_]=(0,c.useState)({title:"",domain:"comunicacao",ebp_practice_id:"",objective:"",mastery_criteria_pct:80,pei_goal_id:""}),[aa,ab]=(0,c.useState)([]),ac=(0,c.useCallback)(async()=>{try{let[a,b,c]=await Promise.all([fetch("/api/aba/learners?id="+l),fetch("/api/aba/protocols?learner_id="+l),fetch("/api/aba/sessions?learner_id="+l)]),d=await a.json(),e=await b.json(),f=await c.json();n(d.learners?.find(a=>a.id===l)||d.learner||null),p(e.protocols||[]),r(f.sessions||[]);try{let a=await fetch("/api/aba/learners/"+l+"/cso-history");if(a.ok){let b=await a.json();t(b.history||[])}}catch{}v(!1)}catch{x("Falha ao carregar"),v(!1)}},[l]);(0,c.useEffect)(()=>{ac()},[ac]),(0,c.useEffect)(()=>{C&&0===W.length&&fetch("/api/aba/ebp-practices").then(a=>a.json()).then(a=>{a.practices&&X(a.practices)}).catch(()=>{}),"guardians"===y&&0===G.length&&Q(),C&&0===aa.length&&fetch("/api/aba/pei?learner_id="+l).then(a=>a.json()).then(a=>{let b=[];(a.plans||[]).forEach(a=>{(a.goals||[]).forEach(a=>b.push({id:a.id,title:a.title,domain:a.domain}))}),ab(b)}).catch(()=>{})},[C,W.length]);let ad=async(a,b)=>{B(a),x(null);let c={status:b};if("discontinued"===b){let a=window.prompt("Motivo da descontinuaÃ§Ã£o (obrigatÃ³rio):");if(!a||!a.trim())return void B(null);c.discontinuation_reason=a.trim()}try{let b=await fetch("/api/aba/protocols/"+a,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(c)});if(!b.ok){let a=await b.json();x(a.error||"Erro")}await ac()}catch{x("Falha de conexÃ£o")}B(null)},ae=async()=>{if(!$.title||!$.ebp_practice_id||!$.objective)return void x("Preencha todos os campos obrigatÃ³rios");Z(!0),x(null);try{let a=await fetch("/api/aba/protocols",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({learner_id:l,title:$.title,domain:$.domain,ebp_practice_id:parseInt($.ebp_practice_id),objective:$.objective,mastery_criteria_pct:$.mastery_criteria_pct,pei_goal_id:$.pei_goal_id||null})});if(!a.ok){let b=await a.json();x(b.error||"Erro ao criar protocolo"),Z(!1);return}D(!1),_({title:"",domain:"comunicacao",ebp_practice_id:"",objective:"",mastery_criteria_pct:80,pei_goal_id:""}),await ac()}catch{x("Falha de conexÃ£o")}Z(!1)};if(u)return(0,b.jsx)("div",{className:"flex items-center justify-center min-h-[50vh]",children:(0,b.jsx)("div",{className:"animate-pulse text-slate-400 text-sm",children:"Carregando..."})});if(!m)return(0,b.jsx)("div",{className:"flex items-center justify-center min-h-[50vh]",children:(0,b.jsx)("p",{className:"text-slate-400 text-sm",children:"Aprendiz nÃ£o encontrado"})});let af=o.filter(a=>"active"===a.status).length,ag=o.filter(a=>["mastered","generalization","maintained","archived"].includes(a.status)).length,ah=q.filter(a=>"completed"===a.status).length,ai=s.length>0?s[s.length-1]:null;return(0,b.jsxs)("div",{className:"px-4 md:px-8 lg:px-12 xl:px-16 pt-5 md:pt-6",children:[(0,b.jsx)(e.default,{href:"/aba/aprendizes",className:"text-xs text-slate-400 hover:text-aba-500 transition-colors",children:"â† Voltar para aprendizes"}),(0,b.jsxs)("div",{className:"mt-4 mb-6",children:[(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)("div",{className:"w-14 h-14 rounded-full bg-aba-500/10 flex items-center justify-center",children:(0,b.jsx)("span",{className:"text-xl font-medium text-aba-500",children:m.name.charAt(0)})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-xl font-normal text-slate-800 tracking-tight",children:m.name}),(0,b.jsxs)("p",{className:"text-xs text-slate-400 mt-0.5",children:[(a=m.birth_date,Math.floor((Date.now()-new Date(a).getTime())/315576e5)+"a")," Â· ",m.cid_code||"Sem CID"," Â· NÃ­vel ",m.support_level,m.diagnosis&&" Â· "+m.diagnosis]})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-4 gap-4 mt-6",children:[(0,b.jsxs)("div",{className:"p-3 rounded-xl bg-blue-50/50 text-center",children:[(0,b.jsx)("p",{className:"text-lg font-medium text-blue-600",children:af}),(0,b.jsx)("p",{className:"text-[11px] text-slate-400",children:"Protocolos ativos"})]}),(0,b.jsxs)("div",{className:"p-3 rounded-xl bg-green-50/50 text-center",children:[(0,b.jsx)("p",{className:"text-lg font-medium text-green-600",children:ag}),(0,b.jsx)("p",{className:"text-[11px] text-slate-400",children:"Dominados"})]}),(0,b.jsxs)("div",{className:"p-3 rounded-xl bg-aba-500/5 text-center",children:[(0,b.jsx)("p",{className:"text-lg font-medium text-aba-500",children:ah}),(0,b.jsx)("p",{className:"text-[11px] text-slate-400",children:"SessÃµes"})]}),(0,b.jsxs)("div",{className:"p-3 rounded-xl bg-slate-50 text-center",children:[(0,b.jsx)("p",{className:"text-lg font-medium text-slate-700",children:ai?ai.cso_aba:"â€”"}),(0,b.jsx)("p",{className:"text-[11px] text-slate-400",children:"CSO atual"})]})]})]}),w&&(0,b.jsx)("div",{className:"mb-4 p-3 bg-red-50 rounded-lg",children:(0,b.jsx)("p",{className:"text-xs text-red-500",children:w})}),(0,b.jsx)("div",{className:"flex gap-1 mb-6 border-b border-slate-200",children:[["protocols","Protocolos ("+o.length+")"],["sessions","SessÃµes ("+q.length+")"],["cso","EvoluÃ§Ã£o CSO"],["guardians","ResponsÃ¡veis"]].map(([a,c])=>(0,b.jsx)("button",{onClick:()=>z(a),className:"px-4 py-2 text-sm font-medium border-b-2 transition-colors "+(y===a?"border-aba-500 text-aba-500":"border-transparent text-slate-400 hover:text-slate-600"),children:c},a))}),"protocols"===y&&(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsx)("button",{onClick:()=>D(!0),className:"w-full p-3 rounded-xl border-2 border-dashed border-aba-500/30 text-aba-500 text-sm font-medium hover:bg-aba-500/5 transition-colors",children:"+ Novo Protocolo"}),0===o.length?(0,b.jsxs)("div",{className:"text-center py-12",children:[(0,b.jsx)("div",{className:"w-12 h-12 rounded-full bg-aba-500/10 flex items-center justify-center mx-auto mb-3",children:(0,b.jsx)("svg",{className:"w-6 h-6 text-aba-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})})}),(0,b.jsx)("p",{className:"text-sm text-slate-500 mb-1",children:"Nenhum protocolo cadastrado"}),(0,b.jsx)("p",{className:"text-xs text-slate-400",children:'Clique em "+ Novo Protocolo" para comeÃ§ar'})]}):o.map(a=>(0,b.jsxs)("div",{className:"p-4 rounded-xl border border-slate-200",children:[(0,b.jsxs)("div",{className:"flex items-start justify-between mb-2",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"text-sm font-medium text-slate-800",children:a.title}),(0,b.jsxs)("p",{className:"text-[11px] text-slate-400 mt-0.5",children:[a.domain," Â· ",a.ebp_name," Â· CritÃ©rio: ",a.mastery_criteria_pct,"%"]})]}),(0,b.jsx)("span",{className:"px-2 py-0.5 rounded-full text-[10px] font-medium "+(g[a.status]||"bg-slate-100 text-slate-500"),children:f[a.status]||a.status})]}),(0,b.jsx)("p",{className:"text-xs text-slate-500 mb-3",children:a.objective}),a.regression_count>0&&(0,b.jsxs)("p",{className:"text-[11px] text-red-500 mb-2",children:["âš  ",a.regression_count," regressÃ£o(Ãµes)"]}),"discontinued"===a.status&&a.discontinuation_reason&&(0,b.jsxs)("p",{className:"text-[11px] text-slate-400 italic mb-2",children:["Motivo: ",a.discontinuation_reason]}),"generalization"===a.status&&(0,b.jsx)(e.default,{href:"/aba/aprendizes/"+l+"/generalizacao?protocol_id="+a.id,className:"inline-block mb-2 px-3 py-1 text-[11px] rounded-lg border border-purple-300 text-purple-600 hover:bg-purple-50",children:"ðŸ“Š Matriz 3Ã—2"}),"maintained"===a.status&&(0,b.jsx)(e.default,{href:"/aba/aprendizes/"+l+"/manutencao?protocol_id="+a.id,className:"inline-block mb-2 px-3 py-1 text-[11px] rounded-lg border border-emerald-300 text-emerald-600 hover:bg-emerald-50",children:"ðŸ”„ Sondas"}),j[a.status]&&j[a.status].length>0&&(0,b.jsx)("div",{className:"flex gap-2 pt-2 border-t border-slate-100",children:j[a.status].map(c=>(0,b.jsx)("button",{onClick:()=>ad(a.id,c),disabled:A===a.id,className:"px-3 py-1 text-[11px] rounded-lg border transition-colors "+("discontinued"===c||"suspended"===c?"border-slate-200 text-slate-400 hover:text-red-500 hover:border-red-200":"border-aba-500/30 text-aba-500 hover:bg-aba-500/5"),children:A===a.id?"...":"â†’ "+(f[c]||c)},c))})]},a.id))]}),"sessions"===y&&(0,b.jsx)("div",{className:"space-y-2",children:0===q.length?(0,b.jsxs)("div",{className:"text-center py-12",children:[(0,b.jsx)("div",{className:"w-12 h-12 rounded-full bg-aba-500/10 flex items-center justify-center mx-auto mb-3",children:(0,b.jsx)("svg",{className:"w-6 h-6 text-aba-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})}),(0,b.jsx)("p",{className:"text-sm text-slate-500 mb-1",children:"Nenhuma sessÃ£o registrada"}),(0,b.jsx)("p",{className:"text-xs text-slate-400",children:"SessÃµes aparecem apÃ³s serem criadas em SessÃµes"})]}):q.map(a=>(0,b.jsxs)(e.default,{href:"/aba/sessoes/"+a.id,className:"flex items-center justify-between p-3 rounded-xl border border-slate-200 hover:border-aba-500/30 transition-all cursor-pointer",children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)("p",{className:"text-sm text-slate-800",children:[new Date(a.scheduled_at).toLocaleDateString("pt-BR")," Ã s ",new Date(a.scheduled_at).toLocaleTimeString("pt-BR",{hour:"2-digit",minute:"2-digit"})]}),a.location&&(0,b.jsx)("p",{className:"text-[11px] text-slate-400",children:a.location})]}),(0,b.jsx)("span",{className:"px-2 py-0.5 rounded-full text-[10px] font-medium "+(h[a.status]||"bg-slate-100 text-slate-500"),children:i[a.status]||a.status})]},a.id))}),"cso"===y&&(0,b.jsx)("div",{children:0===s.length?(0,b.jsx)("p",{className:"text-xs text-slate-400 text-center py-12",children:"Sem dados de CSO. Complete sessÃµes para gerar histÃ³rico."}):(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"p-4 rounded-xl border border-slate-200",children:[(0,b.jsx)("h3",{className:"text-xs font-medium text-slate-600 mb-3",children:"EvoluÃ§Ã£o CSO-ABA"}),(0,b.jsx)("div",{className:"relative",style:{height:"180px"},children:(0,b.jsxs)("svg",{viewBox:"0 0 "+Math.max(80*s.length,200)+" 180",className:"w-full h-full",children:[[0,25,50,75,100].map(a=>(0,b.jsxs)("g",{children:[(0,b.jsx)("line",{x1:"30",y1:160-1.5*a,x2:Math.max(80*s.length,200),y2:160-1.5*a,stroke:"#f1f5f9",strokeWidth:"1"}),(0,b.jsx)("text",{x:"26",y:164-1.5*a,textAnchor:"end",fontSize:"9",fill:"#94a3b8",children:a})]},a)),s.length>1&&(0,b.jsx)("polyline",{fill:"none",stroke:"#C46A2F",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",points:s.map((a,b)=>40+70*b+","+(160-1.5*Number(a.cso_aba))).join(" ")}),s.map((a,c)=>(0,b.jsxs)("g",{children:[(0,b.jsx)("circle",{cx:40+70*c,cy:160-1.5*Number(a.cso_aba),r:"5",fill:"#C46A2F",stroke:"white",strokeWidth:"2"}),(0,b.jsx)("text",{x:40+70*c,y:152-1.5*Number(a.cso_aba),textAnchor:"middle",fontSize:"10",fontWeight:"600",fill:"#C46A2F",children:a.cso_aba}),(0,b.jsx)("text",{x:40+70*c,y:"175",textAnchor:"middle",fontSize:"8",fill:"#94a3b8",children:new Date(a.session_date).toLocaleDateString("pt-BR",{day:"2-digit",month:"short"})})]},c))]})})]}),(0,b.jsx)("div",{className:"space-y-2",children:s.map((a,c)=>(0,b.jsxs)("div",{className:"flex items-center justify-between p-3 rounded-xl border border-slate-200",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-slate-800",children:new Date(a.session_date).toLocaleDateString("pt-BR")}),(0,b.jsxs)("p",{className:"text-[11px] text-slate-400",children:["SAS ",a.sas," Â· PIS ",a.pis," Â· BSS ",a.bss," Â· TCM ",a.tcm]})]}),(0,b.jsxs)("div",{className:"text-right",children:[(0,b.jsx)("p",{className:"text-lg font-medium text-aba-500",children:a.cso_aba}),(0,b.jsx)("p",{className:"text-[10px] text-slate-400",children:"CSO-ABA"})]})]},c))})]})}),E&&(0,b.jsx)("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",onClick:()=>F(null),children:(0,b.jsxs)("div",{className:"bg-white rounded-2xl p-6 max-w-md w-full shadow-xl",onClick:a=>a.stopPropagation(),children:[(0,b.jsx)("h3",{className:"text-base font-medium text-slate-800 mb-2",children:"Link do Portal do ResponsÃ¡vel"}),(0,b.jsx)("p",{className:"text-xs text-slate-500 mb-4",children:"Compartilhe este link com o responsÃ¡vel. VÃ¡lido por 90 dias."}),(0,b.jsxs)("div",{className:"bg-slate-50 rounded-lg p-3 flex items-center gap-2 mb-4",children:[(0,b.jsx)("p",{className:"text-xs text-slate-600 flex-1 break-all",children:E}),(0,b.jsx)("button",{onClick:()=>navigator.clipboard.writeText(E),className:"flex-shrink-0 text-xs text-aba-500 font-medium hover:text-aba-600",children:"Copiar"})]}),(0,b.jsx)("button",{onClick:()=>F(null),className:"w-full py-2 text-sm text-slate-500 hover:text-slate-700",children:"Fechar"})]})}),"guardians"===y&&(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,b.jsx)("p",{className:"text-xs text-slate-400",children:0===G.length?"Nenhum responsÃ¡vel cadastrado":`${G.length} respons\xe1vel(is)`}),(0,b.jsx)("button",{onClick:()=>L(!0),className:"px-3 py-1.5 bg-aba-500 text-white text-xs font-medium rounded-lg hover:bg-aba-600 transition-colors",children:"+ Adicionar"})]}),I?(0,b.jsx)("div",{className:"space-y-2",children:[1,2].map(a=>(0,b.jsx)("div",{className:"animate-pulse bg-slate-100 rounded-xl h-16"},a))}):0===G.length?(0,b.jsxs)("div",{className:"text-center py-12",children:[(0,b.jsx)("div",{className:"w-12 h-12 rounded-full bg-aba-500/10 flex items-center justify-center mx-auto mb-3",children:(0,b.jsx)("svg",{className:"w-6 h-6 text-aba-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})}),(0,b.jsx)("p",{className:"text-sm text-slate-500 mb-1",children:"Nenhum responsÃ¡vel cadastrado"}),(0,b.jsx)("p",{className:"text-xs text-slate-400",children:"Adicione para enviar resumos por email"})]}):(0,b.jsx)("div",{className:"space-y-3",children:G.map(a=>(0,b.jsxs)("div",{className:"flex items-center justify-between p-4 rounded-xl border border-slate-200 bg-white",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"w-9 h-9 rounded-full bg-aba-500/10 flex items-center justify-center flex-shrink-0",children:(0,b.jsx)("span",{className:"text-sm font-medium text-aba-500",children:a.name.charAt(0)})}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("p",{className:"text-sm font-medium text-slate-700",children:[a.name,a.relationship?(0,b.jsxs)("span",{className:"text-xs text-slate-400 ml-1",children:["(",a.relationship,")"]}):null]}),a.email&&(0,b.jsx)("p",{className:"text-xs text-slate-400",children:a.email}),a.phone&&(0,b.jsx)("p",{className:"text-xs text-slate-400",children:a.phone})]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("button",{onClick:V,disabled:T,className:"text-xs text-aba-500 hover:text-aba-600 px-2 py-1 rounded border border-aba-500/20 hover:bg-aba-500/5 transition-colors",children:T?"...":"Portal"}),(0,b.jsx)("button",{onClick:()=>S(a.id),className:"text-xs text-red-400 hover:text-red-600 px-2 py-1 rounded border border-red-200 hover:bg-red-50 transition-colors",children:"Remover"})]})]},a.id))}),K&&(0,b.jsx)("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",onClick:()=>L(!1),children:(0,b.jsxs)("div",{className:"bg-white rounded-2xl p-6 max-w-md w-full shadow-xl",onClick:a=>a.stopPropagation(),children:[(0,b.jsx)("h3",{className:"text-base font-medium text-slate-800 mb-4",children:"Adicionar ResponsÃ¡vel"}),(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-xs font-medium text-slate-600 mb-1",children:"Nome *"}),(0,b.jsx)("input",{type:"text",value:M.name,onChange:a=>N({...M,name:a.target.value}),className:"w-full px-3 py-2 border border-slate-200 rounded-lg text-sm focus:outline-none focus:border-aba-500",placeholder:"Nome completo"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-xs font-medium text-slate-600 mb-1",children:"Email"}),(0,b.jsx)("input",{type:"email",value:M.email,onChange:a=>N({...M,email:a.target.value}),className:"w-full px-3 py-2 border border-slate-200 rounded-lg text-sm focus:outline-none focus:border-aba-500",placeholder:"email@exemplo.com"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-xs font-medium text-slate-600 mb-1",children:"Telefone / WhatsApp"}),(0,b.jsx)("input",{type:"text",value:M.phone,onChange:a=>N({...M,phone:a.target.value}),className:"w-full px-3 py-2 border border-slate-200 rounded-lg text-sm focus:outline-none focus:border-aba-500",placeholder:"(81) 99999-9999"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-xs font-medium text-slate-600 mb-1",children:"Parentesco"}),(0,b.jsxs)("select",{value:M.relationship,onChange:a=>N({...M,relationship:a.target.value}),className:"w-full px-3 py-2 border border-slate-200 rounded-lg text-sm focus:outline-none focus:border-aba-500 bg-white",children:[(0,b.jsx)("option",{value:"",children:"Selecione..."}),(0,b.jsx)("option",{value:"MÃ£e",children:"MÃ£e"}),(0,b.jsx)("option",{value:"Pai",children:"Pai"}),(0,b.jsx)("option",{value:"AvÃ³",children:"AvÃ³"}),(0,b.jsx)("option",{value:"AvÃ´",children:"AvÃ´"}),(0,b.jsx)("option",{value:"Tutor legal",children:"Tutor legal"}),(0,b.jsx)("option",{value:"Outro",children:"Outro"})]})]})]}),(0,b.jsxs)("div",{className:"flex justify-end gap-3 mt-5",children:[(0,b.jsx)("button",{onClick:()=>L(!1),className:"px-4 py-2 text-sm text-slate-500 hover:text-slate-700",children:"Cancelar"}),(0,b.jsx)("button",{onClick:R,disabled:O||!M.name,className:"px-5 py-2 bg-aba-500 text-white text-sm font-medium rounded-lg hover:bg-aba-600 disabled:opacity-50 transition-colors",children:O?"Salvando...":"Salvar"})]})]})})]}),C&&(0,b.jsx)("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",onClick:()=>D(!1),children:(0,b.jsx)("div",{className:"bg-white rounded-2xl w-full max-w-lg max-h-[90vh] overflow-y-auto",onClick:a=>a.stopPropagation(),children:(0,b.jsxs)("div",{className:"p-6",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,b.jsx)("h2",{className:"text-lg font-medium text-slate-800",children:"Novo Protocolo"}),(0,b.jsx)("button",{onClick:()=>D(!1),className:"text-slate-400 hover:text-slate-600 text-xl leading-none",children:"Ã—"})]}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-xs font-medium text-slate-600 mb-1",children:"TÃ­tulo do protocolo *"}),(0,b.jsx)("input",{type:"text",value:$.title,onChange:a=>_({...$,title:a.target.value}),placeholder:"Ex: Mando com apoio visual",className:"w-full px-3 py-2 rounded-lg border border-slate-200 text-sm focus:outline-none focus:border-aba-500"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-xs font-medium text-slate-600 mb-1",children:"DomÃ­nio clÃ­nico *"}),(0,b.jsx)("select",{value:$.domain,onChange:a=>_({...$,domain:a.target.value}),className:"w-full px-3 py-2 rounded-lg border border-slate-200 text-sm focus:outline-none focus:border-aba-500 bg-white",children:k.map(a=>(0,b.jsx)("option",{value:a.value,children:a.label},a.value))})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-xs font-medium text-slate-600 mb-1",children:"TÃ©cnica Validada (SBNI/FPG) *"}),(0,b.jsxs)("select",{value:$.ebp_practice_id,onChange:a=>_({...$,ebp_practice_id:a.target.value}),className:"w-full px-3 py-2 rounded-lg border border-slate-200 text-sm focus:outline-none focus:border-aba-500 bg-white",children:[(0,b.jsx)("option",{value:"",children:"Selecione uma prÃ¡tica"}),W.map(a=>(0,b.jsxs)("option",{value:a.id,children:[a.id,". ",a.name]},a.id))]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-xs font-medium text-slate-600 mb-1",children:"Objetivo operacional *"}),(0,b.jsx)("textarea",{value:$.objective,onChange:a=>_({...$,objective:a.target.value}),rows:3,placeholder:"Ex: O aprendiz solicitarÃ¡ itens desejados usando frases de 2+ palavras em 80% das oportunidades por 3 sessÃµes consecutivas.",className:"w-full px-3 py-2 rounded-lg border border-slate-200 text-sm focus:outline-none focus:border-aba-500 resize-none"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-xs font-medium text-slate-600 mb-1",children:"CritÃ©rio de domÃ­nio (%)"}),(0,b.jsx)("input",{type:"number",min:50,max:100,value:$.mastery_criteria_pct,onChange:a=>_({...$,mastery_criteria_pct:parseInt(a.target.value)||80}),className:"w-full px-3 py-2 rounded-lg border border-slate-200 text-sm focus:outline-none focus:border-aba-500"}),(0,b.jsx)("p",{className:"text-[11px] text-slate-400 mt-1",children:"PadrÃ£o: 80%. MÃ­nimo recomendado: 70%."})]}),aa.length>0&&(0,b.jsxs)("div",{children:[(0,b.jsxs)("label",{className:"block text-xs font-medium text-slate-600 mb-1",children:["Vincular a meta do PEI ",(0,b.jsx)("span",{className:"text-slate-400",children:"(opcional)"})]}),(0,b.jsxs)("select",{value:$.pei_goal_id,onChange:a=>_({...$,pei_goal_id:a.target.value}),className:"w-full px-3 py-2 rounded-lg border border-slate-200 text-sm focus:outline-none focus:border-aba-500 bg-white",children:[(0,b.jsx)("option",{value:"",children:"Sem vÃ­nculo"}),aa.map(a=>(0,b.jsxs)("option",{value:a.id,children:[a.title," (",a.domain,")"]},a.id))]}),(0,b.jsx)("p",{className:"text-[11px] text-slate-400 mt-1",children:"Vincula este protocolo a uma meta do PEI do aprendiz."})]})]}),(0,b.jsxs)("div",{className:"flex gap-3 mt-6 pt-4 border-t border-slate-100",children:[(0,b.jsx)("button",{onClick:()=>D(!1),className:"flex-1 px-4 py-2 rounded-lg border border-slate-200 text-sm text-slate-500 hover:bg-slate-50",children:"Cancelar"}),(0,b.jsx)("button",{onClick:ae,disabled:Y,className:"flex-1 px-4 py-2 rounded-lg bg-aba-500 text-white text-sm font-medium hover:bg-aba-500/90 disabled:opacity-50 transition-colors",children:Y?"Criando...":"Criar protocolo"})]})]})})})]})}a.s(["default",()=>l])}];

//# sourceMappingURL=app_aba_aprendizes_%5Bid%5D_page_tsx_05ade741._.js.map