module.exports=[26849,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(38246);let e={1:"Nível 1",2:"Nível 2",3:"Nível 3"};function f(){let[a,f]=(0,c.useState)([]),[g,h]=(0,c.useState)(!0),[i,j]=(0,c.useState)(!1),[k,l]=(0,c.useState)(!1),[m,n]=(0,c.useState)(null),[o,p]=(0,c.useState)({name:"",birth_date:"",diagnosis:"",cid_code:"",support_level:2,school:"",notes:""}),q=(0,c.useCallback)(()=>{h(!0),fetch("/api/aba/learners").then(a=>a.json()).then(a=>{f(a.learners||[]),h(!1)}).catch(()=>h(!1))},[]);(0,c.useEffect)(()=>{q()},[q]);let r=async()=>{if(!o.name.trim()||!o.birth_date)return void n("Nome e data de nascimento são obrigatórios.");l(!0),n(null);try{let a=await fetch("/api/aba/learners",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:o.name.trim(),birth_date:o.birth_date,diagnosis:o.diagnosis.trim()||null,cid_code:o.cid_code.trim()||null,support_level:o.support_level,school:o.school.trim()||null,notes:o.notes.trim()||null})});if(!a.ok){let b=await a.json();n(b.error||"Erro ao cadastrar"),l(!1);return}p({name:"",birth_date:"",diagnosis:"",cid_code:"",support_level:2,school:"",notes:""}),j(!1),l(!1),q()}catch{n("Falha de conexão."),l(!1)}};return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{className:"flex justify-center pt-5 md:pt-6 mb-6 md:mb-8 px-4",children:(0,b.jsxs)("nav",{className:"inline-flex items-center gap-1 bg-white border border-slate-200 rounded-full px-3 md:px-5 py-1.5 shadow-sm",children:[(0,b.jsx)(d.default,{href:"/aba",className:"px-3 py-1 text-sm font-medium text-slate-400 hover:text-slate-600 transition-colors",children:"Painel"}),(0,b.jsx)("span",{className:"text-slate-300 text-xs",children:"·"}),(0,b.jsx)(d.default,{href:"/aba/aprendizes",className:"px-3 py-1 text-sm font-medium text-aba-500",children:"Aprendizes"}),(0,b.jsx)("span",{className:"text-slate-300 text-xs",children:"·"}),(0,b.jsx)(d.default,{href:"/aba/sessoes",className:"px-3 py-1 text-sm font-medium text-slate-400 hover:text-slate-600 transition-colors",children:"Sessões"}),(0,b.jsx)("span",{className:"text-slate-300 text-xs hidden sm:inline",children:"·"}),(0,b.jsx)(d.default,{href:"/aba/relatorios",className:"hidden sm:inline px-3 py-1 text-sm font-medium text-slate-400 hover:text-slate-600 transition-colors",children:"Relatórios"})]})}),(0,b.jsxs)("div",{className:"px-4 md:px-8 lg:px-12 xl:px-16",children:[(0,b.jsxs)("header",{className:"mb-6 flex items-start justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-lg font-normal text-slate-400 tracking-tight mb-0",children:"Aprendizes"}),(0,b.jsx)("p",{className:"text-xs text-slate-300 font-light",children:g?"...":`${a.length} ${1===a.length?"aprendiz cadastrado":"aprendizes cadastrados"}`})]}),(0,b.jsx)("button",{onClick:()=>j(!0),className:"px-4 py-2 bg-aba-500 text-white text-sm font-medium rounded-lg hover:bg-aba-600 transition-colors",children:"+ Novo Aprendiz"})]}),g?(0,b.jsx)("div",{className:"space-y-3",children:[1,2,3].map(a=>(0,b.jsx)("div",{className:"animate-pulse bg-slate-50 rounded-xl h-20"},a))}):0===a.length?(0,b.jsxs)("div",{className:"text-center py-16",children:[(0,b.jsx)("div",{className:"w-16 h-16 rounded-full bg-aba-500/10 flex items-center justify-center mx-auto mb-4",children:(0,b.jsx)("svg",{className:"w-8 h-8 text-aba-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0z"})})}),(0,b.jsx)("p",{className:"text-sm text-slate-500 mb-1",children:"Nenhum aprendiz cadastrado"}),(0,b.jsx)("p",{className:"text-xs text-slate-400",children:'Clique em "+ Novo Aprendiz" para começar'})]}):(0,b.jsx)("div",{className:"space-y-2",children:a.map(a=>{let c,f,g,h;return(0,b.jsxs)(d.default,{href:`/aba/aprendizes/${a.id}`,className:"flex items-center justify-between p-4 rounded-xl border border-slate-200 hover:border-aba-500/30 hover:shadow-sm transition-all cursor-pointer",children:[(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)("div",{className:"w-10 h-10 rounded-full bg-aba-500/10 flex items-center justify-center",children:(0,b.jsx)("span",{className:"text-sm font-medium text-aba-500",children:a.name.charAt(0).toUpperCase()})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"text-sm font-medium text-slate-800",children:a.name}),(0,b.jsxs)("div",{className:"flex items-center gap-2 mt-0.5",children:[(0,b.jsx)("span",{className:"text-xs text-slate-400",children:(c=new Date(a.birth_date),g=(f=new Date).getFullYear()-c.getFullYear(),((h=f.getMonth()-c.getMonth())<0&&(g--,h+=12),g<1)?`${h}m`:g<6?`${g}a ${h}m`:`${g}a`)}),a.cid_code&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("span",{className:"text-slate-300",children:"·"}),(0,b.jsx)("span",{className:"text-xs text-slate-400",children:a.cid_code})]}),(0,b.jsx)("span",{className:"text-slate-300",children:"·"}),(0,b.jsx)("span",{className:"text-xs text-slate-400",children:e[a.support_level]})]})]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-4 text-xs text-slate-400",children:[(0,b.jsxs)("span",{children:[a.active_protocols," ",1===a.active_protocols?"protocolo":"protocolos"]}),(0,b.jsx)("span",{className:"text-slate-300",children:"·"}),(0,b.jsxs)("span",{children:[a.total_sessions," ",1===a.total_sessions?"sessão":"sessões"]})]})]},a.id)})})]}),i&&(0,b.jsx)("div",{className:"fixed inset-0 bg-black/30 z-50 flex items-center justify-center p-4",children:(0,b.jsxs)("div",{className:"bg-white rounded-2xl w-full max-w-lg max-h-[90vh] overflow-y-auto shadow-xl",children:[(0,b.jsx)("div",{className:"p-6 border-b border-slate-100",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("h2",{className:"font-serif text-lg font-light text-slate-800",children:"Novo Aprendiz"}),(0,b.jsx)("button",{onClick:()=>{j(!1),n(null)},className:"text-slate-400 hover:text-slate-600",children:(0,b.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),(0,b.jsxs)("div",{className:"p-6 space-y-4",children:[m&&(0,b.jsx)("p",{className:"text-xs text-red-500 bg-red-50 px-3 py-2 rounded-lg",children:m}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-xs font-medium text-slate-600 mb-1",children:"Nome completo *"}),(0,b.jsx)("input",{type:"text",value:o.name,onChange:a=>p({...o,name:a.target.value}),className:"w-full px-3 py-2 border border-slate-200 rounded-lg text-sm focus:outline-none focus:border-aba-500",placeholder:"Nome do aprendiz"})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-xs font-medium text-slate-600 mb-1",children:"Data de nascimento *"}),(0,b.jsx)("input",{type:"date",value:o.birth_date,onChange:a=>p({...o,birth_date:a.target.value}),className:"w-full px-3 py-2 border border-slate-200 rounded-lg text-sm focus:outline-none focus:border-aba-500"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-xs font-medium text-slate-600 mb-1",children:"Nível de suporte"}),(0,b.jsxs)("select",{value:o.support_level,onChange:a=>p({...o,support_level:Number(a.target.value)}),className:"w-full px-3 py-2 border border-slate-200 rounded-lg text-sm focus:outline-none focus:border-aba-500 bg-white",children:[(0,b.jsx)("option",{value:1,children:"Nível 1"}),(0,b.jsx)("option",{value:2,children:"Nível 2"}),(0,b.jsx)("option",{value:3,children:"Nível 3"})]})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-xs font-medium text-slate-600 mb-1",children:"Diagnóstico"}),(0,b.jsx)("input",{type:"text",value:o.diagnosis,onChange:a=>p({...o,diagnosis:a.target.value}),className:"w-full px-3 py-2 border border-slate-200 rounded-lg text-sm focus:outline-none focus:border-aba-500",placeholder:"Ex: TEA"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-xs font-medium text-slate-600 mb-1",children:"CID"}),(0,b.jsx)("input",{type:"text",value:o.cid_code,onChange:a=>p({...o,cid_code:a.target.value}),className:"w-full px-3 py-2 border border-slate-200 rounded-lg text-sm focus:outline-none focus:border-aba-500",placeholder:"Ex: F84.0"})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-xs font-medium text-slate-600 mb-1",children:"Escola"}),(0,b.jsx)("input",{type:"text",value:o.school,onChange:a=>p({...o,school:a.target.value}),className:"w-full px-3 py-2 border border-slate-200 rounded-lg text-sm focus:outline-none focus:border-aba-500",placeholder:"Nome da escola"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-xs font-medium text-slate-600 mb-1",children:"Observações"}),(0,b.jsx)("textarea",{value:o.notes,onChange:a=>p({...o,notes:a.target.value}),rows:3,className:"w-full px-3 py-2 border border-slate-200 rounded-lg text-sm focus:outline-none focus:border-aba-500 resize-none",placeholder:"Informações adicionais"})]})]}),(0,b.jsxs)("div",{className:"p-6 border-t border-slate-100 flex justify-end gap-3",children:[(0,b.jsx)("button",{onClick:()=>{j(!1),n(null)},className:"px-4 py-2 text-sm text-slate-500 hover:text-slate-700 transition-colors",children:"Cancelar"}),(0,b.jsx)("button",{onClick:r,disabled:k,className:"px-5 py-2 bg-aba-500 text-white text-sm font-medium rounded-lg hover:bg-aba-600 transition-colors disabled:opacity-50",children:k?"Salvando...":"Cadastrar"})]})]})})]})}a.s(["default",()=>f])}];

//# sourceMappingURL=app_aba_aprendizes_page_tsx_b6f3b7d1._.js.map