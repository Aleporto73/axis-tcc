{"version":3,"sources":["../../../../app/aba/sessoes/%5Bid%5D/page.tsx"],"sourcesContent":["'use client'\n\nimport { useState, useEffect, useCallback } from 'react'\nimport { useParams, useRouter } from 'next/navigation'\nimport Link from 'next/link'\n\ninterface Session {\n  id: string\n  learner_id: string\n  learner_name: string\n  status: string\n  scheduled_at: string\n  started_at: string | null\n  ended_at: string | null\n  location: string | null\n  notes: string | null\n}\n\ninterface Target {\n  id: string\n  protocol_id: string\n  target_name: string\n  trials_total: number\n  trials_correct: number\n  prompt_level: string\n  score_pct: number\n  notes: string | null\n  protocol_objective: string\n}\n\ninterface Behavior {\n  id: string\n  behavior_type: string\n  antecedent: string\n  behavior: string\n  consequence: string\n  intensity: string\n  duration_seconds: number | null\n  recorded_at: string\n}\n\ninterface Protocol {\n  id: string\n  title: string\n  domain: string\n  status: string\n  ebp_name: string\n  objective: string\n}\n\ninterface EBP {\n  id: number\n  name: string\n  name_pt: string\n  domain: string\n}\n\nconst statusLabels: Record<string, string> = {\n  scheduled: 'Agendada',\n  in_progress: 'Em andamento',\n  completed: 'Concluída',\n  cancelled: 'Cancelada',\n}\n\nconst statusColors: Record<string, string> = {\n  scheduled: 'bg-blue-50 text-blue-600',\n  in_progress: 'bg-aba-500/10 text-aba-500',\n  completed: 'bg-green-50 text-green-600',\n  cancelled: 'bg-slate-100 text-slate-400',\n}\n\nconst promptLabels: Record<string, string> = {\n  independent: 'Independente',\n  gestural: 'Gestual',\n  verbal: 'Verbal',\n  modeling: 'Modelagem',\n  partial_physical: 'Física parcial',\n  full_physical: 'Física total',\n}\n\nconst intensityLabels: Record<string, string> = {\n  leve: 'Leve',\n  moderada: 'Moderada',\n  alta: 'Alta',\n  severa: 'Severa',\n}\n\nexport default function SessionPage() {\n  const params = useParams()\n  const router = useRouter()\n  const sessionId = params.id as string\n\n  const [session, setSession] = useState<Session | null>(null)\n  const [targets, setTargets] = useState<Target[]>([])\n  const [behaviors, setBehaviors] = useState<Behavior[]>([])\n  const [protocols, setProtocols] = useState<Protocol[]>([])\n  const [ebps, setEbps] = useState<EBP[]>([])\n  const [loading, setLoading] = useState(true)\n  const [actionLoading, setActionLoading] = useState(false)\n  const [error, setError] = useState<string | null>(null)\n\n  const [tab, setTab] = useState<'trials' | 'behaviors'>('trials')\n\n  const [trialForm, setTrialForm] = useState({\n    protocol_id: '', target_name: '', trials_total: 10, trials_correct: 0, prompt_level: 'full_physical', notes: '',\n  })\n  const [behaviorForm, setBehaviorForm] = useState({\n    behavior_type: '', antecedent: '', behavior: '', consequence: '', intensity: 'leve' as string, duration_seconds: '', location: '',\n  })\n  const [savingTrial, setSavingTrial] = useState(false)\n  const [savingBehavior, setSavingBehavior] = useState(false)\n\n  const [showProtocolModal, setShowProtocolModal] = useState(false)\n  const [showSummaryModal, setShowSummaryModal] = useState(false)\n  const [summaryText, setSummaryText] = useState('')\n  const [summaryEmail, setSummaryEmail] = useState('')\n  const [summaryGuardians, setSummaryGuardians] = useState<{id:string;name:string;email:string|null}[]>([])\n  const [summarySaving, setSummarySaving] = useState(false)\n  const [summaryStatus, setSummaryStatus] = useState<'idle'|'sent'|'error'>('idle')\n  const [summaryError, setSummaryError] = useState<string|null>(null)\n\n  const openSummaryModal = async () => {\n    if (!session) return\n    setSummaryText('')\n    setSummaryEmail('')\n    setSummaryStatus('idle')\n    setSummaryError(null)\n    try {\n      const res = await fetch('/api/aba/guardians?learner_id=' + session.learner_id)\n      const d = await res.json()\n      const gs = d.guardians || []\n      setSummaryGuardians(gs)\n      if (gs.length > 0 && gs[0].email) setSummaryEmail(gs[0].email)\n    } catch {}\n    setShowSummaryModal(true)\n  }\n\n  const sendSummary = async () => {\n    if (!summaryText.trim()) { setSummaryError('Escreva o resumo antes de enviar.'); return }\n    if (!summaryEmail.trim()) { setSummaryError('Informe o email do destinatário.'); return }\n    setSummarySaving(true)\n    setSummaryError(null)\n    try {\n      // 1. Cria rascunho\n      const postRes = await fetch('/api/aba/sessions/' + sessionId + '/summary', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ content: summaryText })\n      })\n      const postData = await postRes.json()\n      if (!postData.summary_id) throw new Error(postData.error || 'Erro ao criar resumo')\n      const summary_id = postData.summary_id\n      // 2. Aprova\n      const approveRes = await fetch('/api/aba/sessions/' + sessionId + '/summary', {\n        method: 'PUT',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ summary_id, action: 'approve' })\n      })\n      if (!approveRes.ok) throw new Error('Erro ao aprovar resumo')\n      // 3. Envia\n      const sendRes = await fetch('/api/aba/sessions/' + sessionId + '/summary', {\n        method: 'PUT',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ summary_id, action: 'send', recipient_email: summaryEmail })\n      })\n      const sendData = await sendRes.json()\n      if (!sendRes.ok) throw new Error(sendData.error || 'Erro ao enviar email')\n      setSummaryStatus('sent')\n    } catch (err: any) {\n      setSummaryError(err.message || 'Erro ao enviar')\n      setSummaryStatus('error')\n    }\n    setSummarySaving(false)\n  }\n  const [savingProtocol, setSavingProtocol] = useState(false)\n  const [protocolForm, setProtocolForm] = useState({\n    title: '', ebp_practice_id: 7, domain: 'Aquisição', objective: '',\n    mastery_criteria_pct: 80, mastery_criteria_sessions: 3, mastery_criteria_trials: 10,\n  })\n\n  const fetchSession = useCallback(async () => {\n    try {\n      const res = await fetch(`/api/aba/sessions/${sessionId}`)\n      if (!res.ok) { setError('Sessão não encontrada'); setLoading(false); return }\n      const data = await res.json()\n      setSession(data.session)\n      setTargets(data.targets || [])\n      setBehaviors(data.behaviors || [])\n      if (data.session?.learner_id) {\n        const pRes = await fetch(`/api/aba/protocols?learner_id=${data.session.learner_id}`)\n        const pData = await pRes.json()\n        setProtocols(pData.protocols || [])\n      }\n      setLoading(false)\n    } catch { setError('Falha de conexão'); setLoading(false) }\n  }, [sessionId])\n\n  const fetchEbps = useCallback(async () => {\n    try {\n      const res = await fetch('/api/aba/ebp-practices')\n      if (res.ok) { const data = await res.json(); setEbps(data.practices || []) }\n    } catch {}\n  }, [])\n\n  useEffect(() => { fetchSession(); fetchEbps() }, [fetchSession, fetchEbps])\n\n  const handleAction = async (action: 'open' | 'close') => {\n    setActionLoading(true)\n    setError(null)\n    try {\n      const res = await fetch(`/api/aba/sessions/${sessionId}`, {\n        method: 'PATCH',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ action }),\n      })\n      if (!res.ok) {\n        const err = await res.json()\n        setError(err.error || 'Erro na ação')\n        setActionLoading(false)\n        return\n      }\n      await fetchSession()\n      setActionLoading(false)\n    } catch {\n      setError('Falha de conexão')\n      setActionLoading(false)\n    }\n  }\n\n  const handleAddTrial = async () => {\n    if (!trialForm.protocol_id || !trialForm.target_name) {\n      setError('Selecione o protocolo e nome do alvo'); return\n    }\n    setSavingTrial(true); setError(null)\n    try {\n      const res = await fetch(`/api/aba/sessions/${sessionId}/trials`, {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({\n          protocol_id: trialForm.protocol_id,\n          target_name: trialForm.target_name.trim(),\n          trials_total: trialForm.trials_total,\n          trials_correct: trialForm.trials_correct,\n          prompt_level: trialForm.prompt_level,\n          notes: trialForm.notes.trim() || null,\n        }),\n      })\n      if (!res.ok) {\n        const err = await res.json()\n        setError(err.error || 'Erro ao registrar trial')\n        setSavingTrial(false); return\n      }\n      setTrialForm({ ...trialForm, target_name: '', trials_correct: 0, notes: '' })\n      await fetchSession()\n      setSavingTrial(false)\n    } catch { setError('Falha de conexão'); setSavingTrial(false) }\n  }\n\n  const handleAddBehavior = async () => {\n    if (!behaviorForm.behavior_type || !behaviorForm.antecedent || !behaviorForm.behavior || !behaviorForm.consequence) {\n      setError('Preencha todos os campos ABC'); return\n    }\n    setSavingBehavior(true); setError(null)\n    try {\n      const res = await fetch(`/api/aba/sessions/${sessionId}/behaviors`, {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({\n          behavior_type: behaviorForm.behavior_type.trim(),\n          antecedent: behaviorForm.antecedent.trim(),\n          behavior: behaviorForm.behavior.trim(),\n          consequence: behaviorForm.consequence.trim(),\n          intensity: behaviorForm.intensity,\n          duration_seconds: behaviorForm.duration_seconds ? parseInt(behaviorForm.duration_seconds) : null,\n          location: behaviorForm.location.trim() || null,\n        }),\n      })\n      if (!res.ok) {\n        const err = await res.json()\n        setError(err.error || 'Erro ao registrar comportamento')\n        setSavingBehavior(false); return\n      }\n      setBehaviorForm({ behavior_type: '', antecedent: '', behavior: '', consequence: '', intensity: 'leve', duration_seconds: '', location: '' })\n      await fetchSession()\n      setSavingBehavior(false)\n    } catch { setError('Falha de conexão'); setSavingBehavior(false) }\n  }\n\n  const handleCreateProtocol = async () => {\n    if (!protocolForm.title || !protocolForm.objective) {\n      setError('Título e objetivo são obrigatórios'); return\n    }\n    setSavingProtocol(true); setError(null)\n    try {\n      const res = await fetch('/api/aba/protocols', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({\n          learner_id: session?.learner_id,\n          title: protocolForm.title.trim(),\n          ebp_practice_id: protocolForm.ebp_practice_id,\n          domain: protocolForm.domain.trim(),\n          objective: protocolForm.objective.trim(),\n          mastery_criteria_pct: protocolForm.mastery_criteria_pct,\n          mastery_criteria_sessions: protocolForm.mastery_criteria_sessions,\n          mastery_criteria_trials: protocolForm.mastery_criteria_trials,\n        }),\n      })\n      if (!res.ok) {\n        const err = await res.json()\n        setError(err.error || 'Erro ao criar protocolo')\n        setSavingProtocol(false); return\n      }\n      setShowProtocolModal(false)\n      setProtocolForm({ title: '', ebp_practice_id: 7, domain: 'Aquisição', objective: '', mastery_criteria_pct: 80, mastery_criteria_sessions: 3, mastery_criteria_trials: 10 })\n      setSavingProtocol(false)\n      await fetchSession()\n    } catch { setError('Falha de conexão'); setSavingProtocol(false) }\n  }\n\n  if (loading) return <div className=\"flex items-center justify-center min-h-[50vh]\"><div className=\"animate-pulse text-slate-400 text-sm\">Carregando sessão...</div></div>\n  if (!session) return <div className=\"flex items-center justify-center min-h-[50vh]\"><p className=\"text-slate-400 text-sm\">{error || 'Sessão não encontrada'}</p></div>\n\n  const isActive = session.status === 'in_progress'\n  const isScheduled = session.status === 'scheduled'\n  const isCompleted = session.status === 'completed'\n\n  return (\n    <>\n      <div className=\"px-4 md:px-8 lg:px-12 xl:px-16 pt-5 md:pt-6\">\n        <Link href=\"/aba/sessoes\" className=\"text-xs text-slate-400 hover:text-aba-500 transition-colors\">&larr; Voltar para sessões</Link>\n\n        <div className=\"mt-4 flex items-start justify-between mb-6\">\n          <div>\n            <h1 className=\"text-lg font-normal text-slate-800 tracking-tight\">{session.learner_name}</h1>\n            <p className=\"text-xs text-slate-400 mt-0.5\">\n              {new Date(session.scheduled_at).toLocaleDateString('pt-BR')} às {new Date(session.scheduled_at).toLocaleTimeString('pt-BR', { hour: '2-digit', minute: '2-digit' })}\n              {session.location && ` · ${session.location}`}\n            </p>\n          </div>\n          <div className=\"flex items-center gap-3\">\n            <span className={`px-3 py-1 rounded-full text-xs font-medium ${statusColors[session.status] || 'bg-slate-100 text-slate-500'}`}>\n              {statusLabels[session.status] || session.status}\n            </span>\n            {isScheduled && (\n              <button onClick={() => handleAction('open')} disabled={actionLoading} className=\"px-4 py-2 bg-aba-500 text-white text-sm font-medium rounded-lg hover:bg-aba-600 transition-colors disabled:opacity-50\">\n                {actionLoading ? 'Iniciando...' : 'Iniciar Sessão'}\n              </button>\n            )}\n            {isActive && (\n              <button onClick={() => handleAction('close')} disabled={actionLoading} className=\"px-4 py-2 bg-green-600 text-white text-sm font-medium rounded-lg hover:bg-green-700 transition-colors disabled:opacity-50\">\n                {actionLoading ? 'Finalizando...' : 'Finalizar Sessão'}\n              </button>\n            )}\n          </div>\n        </div>\n\n        {error && <div className=\"mb-4 p-3 bg-red-50 rounded-lg\"><p className=\"text-xs text-red-500\">{error}</p></div>}\n\n        {isCompleted && (\n          <div className=\"mb-6 p-4 bg-green-50 border border-green-200 rounded-xl flex items-center justify-between gap-4\">\n            <div>\n              <p className=\"text-sm text-green-700 font-medium\">Sessão finalizada</p>\n              <p className=\"text-xs text-green-600 mt-1\">\n                {targets.length} {targets.length === 1 ? 'trial registrado' : 'trials registrados'} · {behaviors.length} {behaviors.length === 1 ? 'comportamento' : 'comportamentos'}\n                {session.started_at && session.ended_at && ` · Duração: ${Math.round((new Date(session.ended_at).getTime() - new Date(session.started_at).getTime()) / 60000)} min`}\n              </p>\n            </div>\n            <button onClick={openSummaryModal} className=\"flex-shrink-0 inline-flex items-center gap-1.5 px-3 py-2 bg-white border border-green-300 text-green-700 text-xs font-medium rounded-lg hover:bg-green-100 transition-colors\">\n              <svg className=\"w-3.5 h-3.5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\"><path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z\"/></svg>\n              Enviar Resumo\n            </button>\n          </div>\n        )}\n\n        {isActive && protocols.length === 0 && (\n          <div className=\"mb-6 p-4 bg-amber-50 border border-amber-200 rounded-xl flex items-center justify-between\">\n            <div>\n              <p className=\"text-sm text-amber-700 font-medium\">Nenhum protocolo ativo</p>\n              <p className=\"text-xs text-amber-600 mt-0.5\">Crie um protocolo para registrar trials</p>\n            </div>\n            <button onClick={() => setShowProtocolModal(true)} className=\"px-4 py-2 bg-aba-500 text-white text-sm font-medium rounded-lg hover:bg-aba-600 transition-colors\">\n              + Protocolo\n            </button>\n          </div>\n        )}\n\n        {(isActive || isCompleted) && (\n          <>\n            <div className=\"flex gap-1 mb-6 border-b border-slate-200\">\n              <button onClick={() => setTab('trials')} className={`px-4 py-2 text-sm font-medium border-b-2 transition-colors ${tab === 'trials' ? 'border-aba-500 text-aba-500' : 'border-transparent text-slate-400 hover:text-slate-600'}`}>\n                Trials ({targets.length})\n              </button>\n              <button onClick={() => setTab('behaviors')} className={`px-4 py-2 text-sm font-medium border-b-2 transition-colors ${tab === 'behaviors' ? 'border-aba-500 text-aba-500' : 'border-transparent text-slate-400 hover:text-slate-600'}`}>\n                Comportamentos ({behaviors.length})\n              </button>\n            </div>\n\n            {tab === 'trials' && (\n              <div className=\"space-y-4\">\n                {isActive && protocols.length > 0 && (\n                  <div className=\"border border-slate-200 rounded-xl p-4 space-y-3\">\n                    <div className=\"flex items-center justify-between\">\n                      <h3 className=\"text-xs font-medium text-slate-600\">Registrar Trial (DTT)</h3>\n                      <button onClick={() => setShowProtocolModal(true)} className=\"text-[11px] text-aba-500 hover:underline\">+ Protocolo</button>\n                    </div>\n                    <div className=\"grid grid-cols-2 gap-3\">\n                      <div>\n                        <label className=\"block text-[11px] text-slate-500 mb-1\">Protocolo *</label>\n                        <select value={trialForm.protocol_id} onChange={e => setTrialForm({...trialForm, protocol_id: e.target.value})} className=\"w-full px-3 py-2 border border-slate-200 rounded-lg text-sm focus:outline-none focus:border-aba-500 bg-white\">\n                          <option value=\"\">Selecione...</option>\n                          {protocols.filter(p => p.status === 'active' || p.status === 'draft').map(p => (\n                            <option key={p.id} value={p.id}>{p.title} ({p.domain})</option>\n                          ))}\n                        </select>\n                      </div>\n                      <div>\n                        <label className=\"block text-[11px] text-slate-500 mb-1\">Alvo *</label>\n                        <input type=\"text\" value={trialForm.target_name} onChange={e => setTrialForm({...trialForm, target_name: e.target.value})} className=\"w-full px-3 py-2 border border-slate-200 rounded-lg text-sm focus:outline-none focus:border-aba-500\" placeholder=\"Ex: Apontar para copo\" />\n                      </div>\n                    </div>\n                    <div className=\"grid grid-cols-3 gap-3\">\n                      <div>\n                        <label className=\"block text-[11px] text-slate-500 mb-1\">Total tentativas</label>\n                        <input type=\"number\" min=\"1\" max=\"100\" value={trialForm.trials_total} onChange={e => setTrialForm({...trialForm, trials_total: parseInt(e.target.value) || 0})} className=\"w-full px-3 py-2 border border-slate-200 rounded-lg text-sm focus:outline-none focus:border-aba-500\" />\n                      </div>\n                      <div>\n                        <label className=\"block text-[11px] text-slate-500 mb-1\">Corretas</label>\n                        <input type=\"number\" min=\"0\" max={trialForm.trials_total} value={trialForm.trials_correct} onChange={e => setTrialForm({...trialForm, trials_correct: parseInt(e.target.value) || 0})} className=\"w-full px-3 py-2 border border-slate-200 rounded-lg text-sm focus:outline-none focus:border-aba-500\" />\n                      </div>\n                      <div>\n                        <label className=\"block text-[11px] text-slate-500 mb-1\">Nível de dica</label>\n                        <select value={trialForm.prompt_level} onChange={e => setTrialForm({...trialForm, prompt_level: e.target.value})} className=\"w-full px-3 py-2 border border-slate-200 rounded-lg text-sm focus:outline-none focus:border-aba-500 bg-white\">\n                          {Object.entries(promptLabels).map(([k, v]) => (\n                            <option key={k} value={k}>{v}</option>\n                          ))}\n                        </select>\n                      </div>\n                    </div>\n                    <div className=\"flex justify-end\">\n                      <button onClick={handleAddTrial} disabled={savingTrial} className=\"px-4 py-2 bg-aba-500 text-white text-sm font-medium rounded-lg hover:bg-aba-600 transition-colors disabled:opacity-50\">\n                        {savingTrial ? 'Salvando...' : 'Registrar Trial'}\n                      </button>\n                    </div>\n                  </div>\n                )}\n\n                {targets.length > 0 ? (\n                  <div className=\"space-y-2\">\n                    {targets.map(t => (\n                      <div key={t.id} className=\"flex items-center justify-between p-3 rounded-xl border border-slate-200\">\n                        <div>\n                          <p className=\"text-sm font-medium text-slate-800\">{t.target_name}</p>\n                          <p className=\"text-[11px] text-slate-400 mt-0.5\">{promptLabels[t.prompt_level] || t.prompt_level}</p>\n                        </div>\n                        <div className=\"text-right\">\n                          <p className=\"text-sm font-medium text-aba-500\">{t.trials_correct}/{t.trials_total}</p>\n                          <p className=\"text-[11px] text-slate-400\">{t.score_pct}%</p>\n                        </div>\n                      </div>\n                    ))}\n                  </div>\n                ) : (\n                  <p className=\"text-xs text-slate-400 text-center py-8\">Nenhum trial registrado</p>\n                )}\n              </div>\n            )}\n\n            {tab === 'behaviors' && (\n              <div className=\"space-y-4\">\n                {isActive && (\n                  <div className=\"border border-slate-200 rounded-xl p-4 space-y-3\">\n                    <h3 className=\"text-xs font-medium text-slate-600\">Registrar Comportamento (ABC)</h3>\n                    <div className=\"grid grid-cols-2 gap-3\">\n                      <div>\n                        <label className=\"block text-[11px] text-slate-500 mb-1\">Tipo *</label>\n                        <input type=\"text\" value={behaviorForm.behavior_type} onChange={e => setBehaviorForm({...behaviorForm, behavior_type: e.target.value})} className=\"w-full px-3 py-2 border border-slate-200 rounded-lg text-sm focus:outline-none focus:border-aba-500\" placeholder=\"Ex: Autolesão, Estereotipia\" />\n                      </div>\n                      <div>\n                        <label className=\"block text-[11px] text-slate-500 mb-1\">Intensidade *</label>\n                        <select value={behaviorForm.intensity} onChange={e => setBehaviorForm({...behaviorForm, intensity: e.target.value})} className=\"w-full px-3 py-2 border border-slate-200 rounded-lg text-sm focus:outline-none focus:border-aba-500 bg-white\">\n                          {Object.entries(intensityLabels).map(([k, v]) => (\n                            <option key={k} value={k}>{v}</option>\n                          ))}\n                        </select>\n                      </div>\n                    </div>\n                    <div>\n                      <label className=\"block text-[11px] text-slate-500 mb-1\">Antecedente (A) *</label>\n                      <input type=\"text\" value={behaviorForm.antecedent} onChange={e => setBehaviorForm({...behaviorForm, antecedent: e.target.value})} className=\"w-full px-3 py-2 border border-slate-200 rounded-lg text-sm focus:outline-none focus:border-aba-500\" placeholder=\"O que aconteceu antes\" />\n                    </div>\n                    <div>\n                      <label className=\"block text-[11px] text-slate-500 mb-1\">Comportamento (B) *</label>\n                      <input type=\"text\" value={behaviorForm.behavior} onChange={e => setBehaviorForm({...behaviorForm, behavior: e.target.value})} className=\"w-full px-3 py-2 border border-slate-200 rounded-lg text-sm focus:outline-none focus:border-aba-500\" placeholder=\"O que o aprendiz fez\" />\n                    </div>\n                    <div>\n                      <label className=\"block text-[11px] text-slate-500 mb-1\">Consequência (C) *</label>\n                      <input type=\"text\" value={behaviorForm.consequence} onChange={e => setBehaviorForm({...behaviorForm, consequence: e.target.value})} className=\"w-full px-3 py-2 border border-slate-200 rounded-lg text-sm focus:outline-none focus:border-aba-500\" placeholder=\"O que aconteceu depois\" />\n                    </div>\n                    <div className=\"flex justify-end\">\n                      <button onClick={handleAddBehavior} disabled={savingBehavior} className=\"px-4 py-2 bg-aba-500 text-white text-sm font-medium rounded-lg hover:bg-aba-600 transition-colors disabled:opacity-50\">\n                        {savingBehavior ? 'Salvando...' : 'Registrar'}\n                      </button>\n                    </div>\n                  </div>\n                )}\n\n                {behaviors.length > 0 ? (\n                  <div className=\"space-y-2\">\n                    {behaviors.map(b => (\n                      <div key={b.id} className=\"p-3 rounded-xl border border-slate-200\">\n                        <div className=\"flex items-center justify-between mb-2\">\n                          <span className=\"text-sm font-medium text-slate-800\">{b.behavior_type}</span>\n                          <span className={`px-2 py-0.5 rounded-full text-[10px] font-medium ${b.intensity === 'severa' ? 'bg-red-50 text-red-600' : b.intensity === 'alta' ? 'bg-orange-50 text-orange-600' : b.intensity === 'moderada' ? 'bg-amber-50 text-amber-600' : 'bg-slate-50 text-slate-500'}`}>\n                            {intensityLabels[b.intensity] || b.intensity}\n                          </span>\n                        </div>\n                        <div className=\"grid grid-cols-3 gap-2 text-[11px]\">\n                          <div><span className=\"text-slate-400\">A:</span> <span className=\"text-slate-600\">{b.antecedent}</span></div>\n                          <div><span className=\"text-slate-400\">B:</span> <span className=\"text-slate-600\">{b.behavior}</span></div>\n                          <div><span className=\"text-slate-400\">C:</span> <span className=\"text-slate-600\">{b.consequence}</span></div>\n                        </div>\n                      </div>\n                    ))}\n                  </div>\n                ) : (\n                  <p className=\"text-xs text-slate-400 text-center py-8\">Nenhum comportamento registrado</p>\n                )}\n              </div>\n            )}\n          </>\n        )}\n      </div>\n\n      {showProtocolModal && (\n        <div className=\"fixed inset-0 bg-black/30 z-50 flex items-center justify-center p-4\">\n          <div className=\"bg-white rounded-2xl w-full max-w-lg shadow-xl\">\n            <div className=\"p-6 border-b border-slate-100\">\n              <div className=\"flex items-center justify-between\">\n                <h2 className=\"font-serif text-lg font-light text-slate-800\">Novo Protocolo</h2>\n                <button onClick={() => setShowProtocolModal(false)} className=\"text-slate-400 hover:text-slate-600\">\n                  <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\"><path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" /></svg>\n                </button>\n              </div>\n            </div>\n            <div className=\"p-6 space-y-4\">\n              <div>\n                <label className=\"block text-xs font-medium text-slate-600 mb-1\">Título *</label>\n                <input type=\"text\" value={protocolForm.title} onChange={e => setProtocolForm({...protocolForm, title: e.target.value})} className=\"w-full px-3 py-2 border border-slate-200 rounded-lg text-sm focus:outline-none focus:border-aba-500\" placeholder=\"Ex: Mando - Solicitar itens preferidos\" />\n              </div>\n              <div className=\"grid grid-cols-2 gap-4\">\n                <div>\n                  <label className=\"block text-xs font-medium text-slate-600 mb-1\">Prática EBP</label>\n                  <select value={protocolForm.ebp_practice_id} onChange={e => setProtocolForm({...protocolForm, ebp_practice_id: parseInt(e.target.value)})} className=\"w-full px-3 py-2 border border-slate-200 rounded-lg text-sm focus:outline-none focus:border-aba-500 bg-white\">\n                    {ebps.length > 0 ? ebps.map((e: any) => <option key={e.id} value={e.id}>{e.name_pt}</option>) : <option>Carregando...</option>}\n                  </select>\n                </div>\n                <div>\n                  <label className=\"block text-xs font-medium text-slate-600 mb-1\">Domínio</label>\n                  <input type=\"text\" value={protocolForm.domain} onChange={e => setProtocolForm({...protocolForm, domain: e.target.value})} className=\"w-full px-3 py-2 border border-slate-200 rounded-lg text-sm focus:outline-none focus:border-aba-500\" placeholder=\"Ex: Comunicação\" />\n                </div>\n              </div>\n              <div>\n                <label className=\"block text-xs font-medium text-slate-600 mb-1\">Objetivo *</label>\n                <textarea value={protocolForm.objective} onChange={e => setProtocolForm({...protocolForm, objective: e.target.value})} rows={2} className=\"w-full px-3 py-2 border border-slate-200 rounded-lg text-sm focus:outline-none focus:border-aba-500 resize-none\" placeholder=\"Ex: O aprendiz solicitará itens preferidos usando mando vocal em 80% das tentativas\" />\n              </div>\n              <div className=\"grid grid-cols-3 gap-3\">\n                <div>\n                  <label className=\"block text-[11px] text-slate-500 mb-1\">Critério %</label>\n                  <input type=\"number\" min=\"50\" max=\"100\" value={protocolForm.mastery_criteria_pct} onChange={e => setProtocolForm({...protocolForm, mastery_criteria_pct: parseInt(e.target.value) || 80})} className=\"w-full px-3 py-2 border border-slate-200 rounded-lg text-sm focus:outline-none focus:border-aba-500\" />\n                </div>\n                <div>\n                  <label className=\"block text-[11px] text-slate-500 mb-1\">Sessões consecutivas</label>\n                  <input type=\"number\" min=\"1\" max=\"10\" value={protocolForm.mastery_criteria_sessions} onChange={e => setProtocolForm({...protocolForm, mastery_criteria_sessions: parseInt(e.target.value) || 3})} className=\"w-full px-3 py-2 border border-slate-200 rounded-lg text-sm focus:outline-none focus:border-aba-500\" />\n                </div>\n                <div>\n                  <label className=\"block text-[11px] text-slate-500 mb-1\">Min tentativas</label>\n                  <input type=\"number\" min=\"1\" max=\"50\" value={protocolForm.mastery_criteria_trials} onChange={e => setProtocolForm({...protocolForm, mastery_criteria_trials: parseInt(e.target.value) || 10})} className=\"w-full px-3 py-2 border border-slate-200 rounded-lg text-sm focus:outline-none focus:border-aba-500\" />\n                </div>\n              </div>\n            </div>\n            <div className=\"p-6 border-t border-slate-100 flex justify-end gap-3\">\n              <button onClick={() => setShowProtocolModal(false)} className=\"px-4 py-2 text-sm text-slate-500 hover:text-slate-700 transition-colors\">Cancelar</button>\n              <button onClick={handleCreateProtocol} disabled={savingProtocol} className=\"px-5 py-2 bg-aba-500 text-white text-sm font-medium rounded-lg hover:bg-aba-600 transition-colors disabled:opacity-50\">\n                {savingProtocol ? 'Criando...' : 'Criar Protocolo'}\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n      {showSummaryModal && (\n        <div className=\"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4\" onClick={() => { if (!summarySaving) setShowSummaryModal(false) }}>\n          <div className=\"bg-white rounded-2xl w-full max-w-lg shadow-xl\" onClick={e => e.stopPropagation()}>\n            <div className=\"p-5 border-b border-slate-100 flex items-center justify-between\">\n              <h3 className=\"text-base font-medium text-slate-800\">Enviar Resumo aos Pais</h3>\n              <button onClick={() => setShowSummaryModal(false)} className=\"text-slate-400 hover:text-slate-600\">\n                <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\"><path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\"/></svg>\n              </button>\n            </div>\n            <div className=\"p-5 space-y-4\">\n              {summaryStatus === 'sent' ? (\n                <div className=\"text-center py-6\">\n                  <div className=\"w-12 h-12 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-3\">\n                    <svg className=\"w-6 h-6 text-green-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\"><path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M5 13l4 4L19 7\"/></svg>\n                  </div>\n                  <p className=\"text-sm font-medium text-slate-700\">Resumo enviado com sucesso!</p>\n                  <p className=\"text-xs text-slate-400 mt-1\">Email enviado para {summaryEmail}</p>\n                  <button onClick={() => setShowSummaryModal(false)} className=\"mt-4 px-4 py-2 text-sm text-slate-500 hover:text-slate-700\">Fechar</button>\n                </div>\n              ) : (\n                <>\n                  <div>\n                    <label className=\"block text-xs font-medium text-slate-600 mb-1\">Para</label>\n                    {summaryGuardians.length > 0 && (\n                      <select value={summaryEmail} onChange={e => setSummaryEmail(e.target.value)} className=\"w-full px-3 py-2 border border-slate-200 rounded-lg text-sm focus:outline-none focus:border-aba-500 bg-white mb-2\">\n                        {summaryGuardians.filter(g => g.email).map(g => (\n                          <option key={g.id} value={g.email!}>{g.name} — {g.email}</option>\n                        ))}\n                        <option value=\"\">Outro email...</option>\n                      </select>\n                    )}\n                    {(summaryGuardians.length === 0 || summaryEmail === '') && (\n                      <input type=\"email\" value={summaryEmail} onChange={e => setSummaryEmail(e.target.value)} className=\"w-full px-3 py-2 border border-slate-200 rounded-lg text-sm focus:outline-none focus:border-aba-500\" placeholder=\"email@exemplo.com\" />\n                    )}\n                  </div>\n                  <div>\n                    <label className=\"block text-xs font-medium text-slate-600 mb-1\">Resumo da sessão <span className=\"text-slate-400\">(o que os pais verão)</span></label>\n                    <textarea value={summaryText} onChange={e => setSummaryText(e.target.value)} rows={6} className=\"w-full px-3 py-2 border border-slate-200 rounded-lg text-sm focus:outline-none focus:border-aba-500 resize-none\" placeholder={'Hoje trabalhamos em... ' + (session?.learner_name || '') + ' demonstrou... Os próximos passos são...'} />\n                    <p className=\"text-[10px] text-slate-400 mt-1\">Não inclua scores, percentuais ou notas clínicas. Este texto será enviado diretamente aos pais.</p>\n                  </div>\n                  {summaryError && <p className=\"text-xs text-red-500 bg-red-50 px-3 py-2 rounded-lg\">{summaryError}</p>}\n                  <div className=\"flex justify-end gap-3 pt-1\">\n                    <button onClick={() => setShowSummaryModal(false)} className=\"px-4 py-2 text-sm text-slate-500 hover:text-slate-700\">Cancelar</button>\n                    <button onClick={sendSummary} disabled={summarySaving} className=\"px-5 py-2 bg-aba-500 text-white text-sm font-medium rounded-lg hover:bg-aba-600 disabled:opacity-50 transition-colors\">\n                      {summarySaving ? 'Enviando...' : 'Aprovar e Enviar'}\n                    </button>\n                  </div>\n                </>\n              )}\n            </div>\n          </div>\n        </div>\n      )}\n    </>\n  )\n}\n"],"names":[],"mappings":"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"}