(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,62423,e=>{"use strict";var t=e.i(43476),a=e.i(71645),s=e.i(18566),l=e.i(22016);let i={draft:"Rascunho",active:"Ativo",mastered:"Dominado",generalization:"GeneralizaÃ§Ã£o",maintained:"Mantido",archived:"Arquivado",suspended:"Suspenso",discontinued:"Descontinuado"},r={draft:"bg-slate-100 text-slate-500",active:"bg-blue-50 text-blue-600",mastered:"bg-green-50 text-green-600",generalization:"bg-purple-50 text-purple-600",maintained:"bg-emerald-50 text-emerald-600",archived:"bg-slate-50 text-slate-400",suspended:"bg-amber-50 text-amber-600",discontinued:"bg-red-50 text-red-500"},n={scheduled:"bg-blue-50 text-blue-600",in_progress:"bg-aba-500/10 text-aba-500",completed:"bg-green-50 text-green-600",cancelled:"bg-slate-100 text-slate-400"},o={scheduled:"Agendada",in_progress:"Em andamento",completed:"ConcluÃ­da",cancelled:"Cancelada"},d={draft:["active","archived"],active:["mastered","suspended","discontinued"],mastered:["generalization","regression"],generalization:["maintenance","regression"],maintenance:["maintained","regression"],maintained:["archived","regression"],regression:["active"],suspended:["active","discontinued"]},c=[{value:"comunicacao",label:"ComunicaÃ§Ã£o"},{value:"social",label:"Social"},{value:"academico",label:"AcadÃªmico"},{value:"autocuidado",label:"Autocuidado"},{value:"motor",label:"Motor"},{value:"comportamento",label:"Comportamento"},{value:"brincar",label:"Brincar"},{value:"cognitivo",label:"Cognitivo"}];function x(){var e;let x=(0,s.useParams)().id,[m,u]=(0,a.useState)(null),[p,h]=(0,a.useState)([]),[b,j]=(0,a.useState)([]),[g,v]=(0,a.useState)([]),[f,N]=(0,a.useState)(!0),[y,w]=(0,a.useState)(null),[_,k]=(0,a.useState)("protocols"),[C,S]=(0,a.useState)(null),[A,P]=(0,a.useState)(!1),[z,T]=(0,a.useState)(null),[M,E]=(0,a.useState)([]),[O,B]=(0,a.useState)(!1),[D,L]=(0,a.useState)(!1),[R,F]=(0,a.useState)({name:"",email:"",phone:"",relationship:""}),[W,I]=(0,a.useState)(!1),V=async()=>{B(!0);try{let e=await fetch("/api/aba/guardians?learner_id="+x),t=await e.json();E(t.guardians||[])}catch{}B(!1)},J=async()=>{if(R.name){I(!0);try{(await fetch("/api/aba/guardians",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({learner_id:x,...R})})).ok&&(F({name:"",email:"",phone:"",relationship:""}),L(!1),V())}catch{}I(!1)}},q=async e=>{confirm("Remover este responsÃ¡vel?")&&(await fetch("/api/aba/guardians?id="+e,{method:"DELETE"}),V())},[G,H]=(0,a.useState)(!1),K=async()=>{H(!0);try{let e=await fetch("/api/portal/invite",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({learner_id:x,guardian_name:"ResponsÃ¡vel"})}),t=await e.json();t.link&&T(t.link)}catch{alert("Erro ao gerar link")}H(!1)},[U,$]=(0,a.useState)([]),[Q,X]=(0,a.useState)(!1),[Y,Z]=(0,a.useState)({title:"",domain:"comunicacao",ebp_practice_id:"",objective:"",mastery_criteria_pct:80,pei_goal_id:""}),[ee,et]=(0,a.useState)([]),ea=(0,a.useCallback)(async()=>{try{let[e,t,a]=await Promise.all([fetch("/api/aba/learners?id="+x),fetch("/api/aba/protocols?learner_id="+x),fetch("/api/aba/sessions?learner_id="+x)]),s=await e.json(),l=await t.json(),i=await a.json();u(s.learners?.find(e=>e.id===x)||s.learner||null),h(l.protocols||[]),j(i.sessions||[]);try{let e=await fetch("/api/aba/learners/"+x+"/cso-history");if(e.ok){let t=await e.json();v(t.history||[])}}catch{}N(!1)}catch{w("Falha ao carregar"),N(!1)}},[x]);(0,a.useEffect)(()=>{ea()},[ea]),(0,a.useEffect)(()=>{A&&0===U.length&&fetch("/api/aba/ebp-practices").then(e=>e.json()).then(e=>{e.practices&&$(e.practices)}).catch(()=>{}),"guardians"===_&&0===M.length&&V(),A&&0===ee.length&&fetch("/api/aba/pei?learner_id="+x).then(e=>e.json()).then(e=>{let t=[];(e.plans||[]).forEach(e=>{(e.goals||[]).forEach(e=>t.push({id:e.id,title:e.title,domain:e.domain}))}),et(t)}).catch(()=>{})},[A,U.length]);let es=async(e,t)=>{S(e),w(null);let a={status:t};if("discontinued"===t){let e=window.prompt("Motivo da descontinuaÃ§Ã£o (obrigatÃ³rio):");if(!e||!e.trim())return void S(null);a.discontinuation_reason=e.trim()}try{let t=await fetch("/api/aba/protocols/"+e,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});if(!t.ok){let e=await t.json();w(e.error||"Erro")}await ea()}catch{w("Falha de conexÃ£o")}S(null)},el=async()=>{if(!Y.title||!Y.ebp_practice_id||!Y.objective)return void w("Preencha todos os campos obrigatÃ³rios");X(!0),w(null);try{let e=await fetch("/api/aba/protocols",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({learner_id:x,title:Y.title,domain:Y.domain,ebp_practice_id:parseInt(Y.ebp_practice_id),objective:Y.objective,mastery_criteria_pct:Y.mastery_criteria_pct,pei_goal_id:Y.pei_goal_id||null})});if(!e.ok){let t=await e.json();w(t.error||"Erro ao criar protocolo"),X(!1);return}P(!1),Z({title:"",domain:"comunicacao",ebp_practice_id:"",objective:"",mastery_criteria_pct:80,pei_goal_id:""}),await ea()}catch{w("Falha de conexÃ£o")}X(!1)};if(f)return(0,t.jsx)("div",{className:"flex items-center justify-center min-h-[50vh]",children:(0,t.jsx)("div",{className:"animate-pulse text-slate-400 text-sm",children:"Carregando..."})});if(!m)return(0,t.jsx)("div",{className:"flex items-center justify-center min-h-[50vh]",children:(0,t.jsx)("p",{className:"text-slate-400 text-sm",children:"Aprendiz nÃ£o encontrado"})});let ei=p.filter(e=>"active"===e.status).length,er=p.filter(e=>["mastered","generalization","maintained","archived"].includes(e.status)).length,en=b.filter(e=>"completed"===e.status).length,eo=g.length>0?g[g.length-1]:null;return(0,t.jsxs)("div",{className:"px-4 md:px-8 lg:px-12 xl:px-16 pt-5 md:pt-6",children:[(0,t.jsx)(l.default,{href:"/aba/aprendizes",className:"text-xs text-slate-400 hover:text-aba-500 transition-colors",children:"â† Voltar para aprendizes"}),(0,t.jsxs)("div",{className:"mt-4 mb-6",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsx)("div",{className:"w-14 h-14 rounded-full bg-aba-500/10 flex items-center justify-center",children:(0,t.jsx)("span",{className:"text-xl font-medium text-aba-500",children:m.name.charAt(0)})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-xl font-normal text-slate-800 tracking-tight",children:m.name}),(0,t.jsxs)("p",{className:"text-xs text-slate-400 mt-0.5",children:[(e=m.birth_date,Math.floor((Date.now()-new Date(e).getTime())/315576e5)+"a")," Â· ",m.cid_code||"Sem CID"," Â· NÃ­vel ",m.support_level,m.diagnosis&&" Â· "+m.diagnosis]})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-4 gap-4 mt-6",children:[(0,t.jsxs)("div",{className:"p-3 rounded-xl bg-blue-50/50 text-center",children:[(0,t.jsx)("p",{className:"text-lg font-medium text-blue-600",children:ei}),(0,t.jsx)("p",{className:"text-[11px] text-slate-400",children:"Protocolos ativos"})]}),(0,t.jsxs)("div",{className:"p-3 rounded-xl bg-green-50/50 text-center",children:[(0,t.jsx)("p",{className:"text-lg font-medium text-green-600",children:er}),(0,t.jsx)("p",{className:"text-[11px] text-slate-400",children:"Dominados"})]}),(0,t.jsxs)("div",{className:"p-3 rounded-xl bg-aba-500/5 text-center",children:[(0,t.jsx)("p",{className:"text-lg font-medium text-aba-500",children:en}),(0,t.jsx)("p",{className:"text-[11px] text-slate-400",children:"SessÃµes"})]}),(0,t.jsxs)("div",{className:"p-3 rounded-xl bg-slate-50 text-center",children:[(0,t.jsx)("p",{className:"text-lg font-medium text-slate-700",children:eo?eo.cso_aba:"â€”"}),(0,t.jsx)("p",{className:"text-[11px] text-slate-400",children:"CSO atual"})]})]})]}),y&&(0,t.jsx)("div",{className:"mb-4 p-3 bg-red-50 rounded-lg",children:(0,t.jsx)("p",{className:"text-xs text-red-500",children:y})}),(0,t.jsx)("div",{className:"flex gap-1 mb-6 border-b border-slate-200",children:[["protocols","Protocolos ("+p.length+")"],["sessions","SessÃµes ("+b.length+")"],["cso","EvoluÃ§Ã£o CSO"],["guardians","ResponsÃ¡veis"]].map(([e,a])=>(0,t.jsx)("button",{onClick:()=>k(e),className:"px-4 py-2 text-sm font-medium border-b-2 transition-colors "+(_===e?"border-aba-500 text-aba-500":"border-transparent text-slate-400 hover:text-slate-600"),children:a},e))}),"protocols"===_&&(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsx)("button",{onClick:()=>P(!0),className:"w-full p-3 rounded-xl border-2 border-dashed border-aba-500/30 text-aba-500 text-sm font-medium hover:bg-aba-500/5 transition-colors",children:"+ Novo Protocolo"}),0===p.length?(0,t.jsxs)("div",{className:"text-center py-12",children:[(0,t.jsx)("div",{className:"w-12 h-12 rounded-full bg-aba-500/10 flex items-center justify-center mx-auto mb-3",children:(0,t.jsx)("svg",{className:"w-6 h-6 text-aba-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})})}),(0,t.jsx)("p",{className:"text-sm text-slate-500 mb-1",children:"Nenhum protocolo cadastrado"}),(0,t.jsx)("p",{className:"text-xs text-slate-400",children:'Clique em "+ Novo Protocolo" para comeÃ§ar'})]}):p.map(e=>(0,t.jsxs)("div",{className:"p-4 rounded-xl border border-slate-200",children:[(0,t.jsxs)("div",{className:"flex items-start justify-between mb-2",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-sm font-medium text-slate-800",children:e.title}),(0,t.jsxs)("p",{className:"text-[11px] text-slate-400 mt-0.5",children:[e.domain," Â· ",e.ebp_name," Â· CritÃ©rio: ",e.mastery_criteria_pct,"%"]})]}),(0,t.jsx)("span",{className:"px-2 py-0.5 rounded-full text-[10px] font-medium "+(r[e.status]||"bg-slate-100 text-slate-500"),children:i[e.status]||e.status})]}),(0,t.jsx)("p",{className:"text-xs text-slate-500 mb-3",children:e.objective}),e.regression_count>0&&(0,t.jsxs)("p",{className:"text-[11px] text-red-500 mb-2",children:["âš  ",e.regression_count," regressÃ£o(Ãµes)"]}),"discontinued"===e.status&&e.discontinuation_reason&&(0,t.jsxs)("p",{className:"text-[11px] text-slate-400 italic mb-2",children:["Motivo: ",e.discontinuation_reason]}),"generalization"===e.status&&(0,t.jsx)(l.default,{href:"/aba/aprendizes/"+x+"/generalizacao?protocol_id="+e.id,className:"inline-block mb-2 px-3 py-1 text-[11px] rounded-lg border border-purple-300 text-purple-600 hover:bg-purple-50",children:"ðŸ“Š Matriz 3Ã—2"}),"maintained"===e.status&&(0,t.jsx)(l.default,{href:"/aba/aprendizes/"+x+"/manutencao?protocol_id="+e.id,className:"inline-block mb-2 px-3 py-1 text-[11px] rounded-lg border border-emerald-300 text-emerald-600 hover:bg-emerald-50",children:"ðŸ”„ Sondas"}),d[e.status]&&d[e.status].length>0&&(0,t.jsx)("div",{className:"flex gap-2 pt-2 border-t border-slate-100",children:d[e.status].map(a=>(0,t.jsx)("button",{onClick:()=>es(e.id,a),disabled:C===e.id,className:"px-3 py-1 text-[11px] rounded-lg border transition-colors "+("discontinued"===a||"suspended"===a?"border-slate-200 text-slate-400 hover:text-red-500 hover:border-red-200":"border-aba-500/30 text-aba-500 hover:bg-aba-500/5"),children:C===e.id?"...":"â†’ "+(i[a]||a)},a))})]},e.id))]}),"sessions"===_&&(0,t.jsx)("div",{className:"space-y-2",children:0===b.length?(0,t.jsxs)("div",{className:"text-center py-12",children:[(0,t.jsx)("div",{className:"w-12 h-12 rounded-full bg-aba-500/10 flex items-center justify-center mx-auto mb-3",children:(0,t.jsx)("svg",{className:"w-6 h-6 text-aba-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})}),(0,t.jsx)("p",{className:"text-sm text-slate-500 mb-1",children:"Nenhuma sessÃ£o registrada"}),(0,t.jsx)("p",{className:"text-xs text-slate-400",children:"SessÃµes aparecem apÃ³s serem criadas em SessÃµes"})]}):b.map(e=>(0,t.jsxs)(l.default,{href:"/aba/sessoes/"+e.id,className:"flex items-center justify-between p-3 rounded-xl border border-slate-200 hover:border-aba-500/30 transition-all cursor-pointer",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("p",{className:"text-sm text-slate-800",children:[new Date(e.scheduled_at).toLocaleDateString("pt-BR")," Ã s ",new Date(e.scheduled_at).toLocaleTimeString("pt-BR",{hour:"2-digit",minute:"2-digit"})]}),e.location&&(0,t.jsx)("p",{className:"text-[11px] text-slate-400",children:e.location})]}),(0,t.jsx)("span",{className:"px-2 py-0.5 rounded-full text-[10px] font-medium "+(n[e.status]||"bg-slate-100 text-slate-500"),children:o[e.status]||e.status})]},e.id))}),"cso"===_&&(0,t.jsx)("div",{children:0===g.length?(0,t.jsx)("p",{className:"text-xs text-slate-400 text-center py-12",children:"Sem dados de CSO. Complete sessÃµes para gerar histÃ³rico."}):(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"p-4 rounded-xl border border-slate-200",children:[(0,t.jsx)("h3",{className:"text-xs font-medium text-slate-600 mb-3",children:"EvoluÃ§Ã£o CSO-ABA"}),(0,t.jsx)("div",{className:"relative",style:{height:"180px"},children:(0,t.jsxs)("svg",{viewBox:"0 0 "+Math.max(80*g.length,200)+" 180",className:"w-full h-full",children:[[0,25,50,75,100].map(e=>(0,t.jsxs)("g",{children:[(0,t.jsx)("line",{x1:"30",y1:160-1.5*e,x2:Math.max(80*g.length,200),y2:160-1.5*e,stroke:"#f1f5f9",strokeWidth:"1"}),(0,t.jsx)("text",{x:"26",y:164-1.5*e,textAnchor:"end",fontSize:"9",fill:"#94a3b8",children:e})]},e)),g.length>1&&(0,t.jsx)("polyline",{fill:"none",stroke:"#C46A2F",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",points:g.map((e,t)=>40+70*t+","+(160-1.5*Number(e.cso_aba))).join(" ")}),g.map((e,a)=>(0,t.jsxs)("g",{children:[(0,t.jsx)("circle",{cx:40+70*a,cy:160-1.5*Number(e.cso_aba),r:"5",fill:"#C46A2F",stroke:"white",strokeWidth:"2"}),(0,t.jsx)("text",{x:40+70*a,y:152-1.5*Number(e.cso_aba),textAnchor:"middle",fontSize:"10",fontWeight:"600",fill:"#C46A2F",children:e.cso_aba}),(0,t.jsx)("text",{x:40+70*a,y:"175",textAnchor:"middle",fontSize:"8",fill:"#94a3b8",children:new Date(e.session_date).toLocaleDateString("pt-BR",{day:"2-digit",month:"short"})})]},a))]})})]}),(0,t.jsx)("div",{className:"space-y-2",children:g.map((e,a)=>(0,t.jsxs)("div",{className:"flex items-center justify-between p-3 rounded-xl border border-slate-200",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-slate-800",children:new Date(e.session_date).toLocaleDateString("pt-BR")}),(0,t.jsxs)("p",{className:"text-[11px] text-slate-400",children:["SAS ",e.sas," Â· PIS ",e.pis," Â· BSS ",e.bss," Â· TCM ",e.tcm]})]}),(0,t.jsxs)("div",{className:"text-right",children:[(0,t.jsx)("p",{className:"text-lg font-medium text-aba-500",children:e.cso_aba}),(0,t.jsx)("p",{className:"text-[10px] text-slate-400",children:"CSO-ABA"})]})]},a))})]})}),z&&(0,t.jsx)("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",onClick:()=>T(null),children:(0,t.jsxs)("div",{className:"bg-white rounded-2xl p-6 max-w-md w-full shadow-xl",onClick:e=>e.stopPropagation(),children:[(0,t.jsx)("h3",{className:"text-base font-medium text-slate-800 mb-2",children:"Link do Portal do ResponsÃ¡vel"}),(0,t.jsx)("p",{className:"text-xs text-slate-500 mb-4",children:"Compartilhe este link com o responsÃ¡vel. VÃ¡lido por 90 dias."}),(0,t.jsxs)("div",{className:"bg-slate-50 rounded-lg p-3 flex items-center gap-2 mb-4",children:[(0,t.jsx)("p",{className:"text-xs text-slate-600 flex-1 break-all",children:z}),(0,t.jsx)("button",{onClick:()=>navigator.clipboard.writeText(z),className:"flex-shrink-0 text-xs text-aba-500 font-medium hover:text-aba-600",children:"Copiar"})]}),(0,t.jsx)("button",{onClick:()=>T(null),className:"w-full py-2 text-sm text-slate-500 hover:text-slate-700",children:"Fechar"})]})}),"guardians"===_&&(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,t.jsx)("p",{className:"text-xs text-slate-400",children:0===M.length?"Nenhum responsÃ¡vel cadastrado":`${M.length} respons\xe1vel(is)`}),(0,t.jsx)("button",{onClick:()=>L(!0),className:"px-3 py-1.5 bg-aba-500 text-white text-xs font-medium rounded-lg hover:bg-aba-600 transition-colors",children:"+ Adicionar"})]}),O?(0,t.jsx)("div",{className:"space-y-2",children:[1,2].map(e=>(0,t.jsx)("div",{className:"animate-pulse bg-slate-100 rounded-xl h-16"},e))}):0===M.length?(0,t.jsxs)("div",{className:"text-center py-12",children:[(0,t.jsx)("div",{className:"w-12 h-12 rounded-full bg-aba-500/10 flex items-center justify-center mx-auto mb-3",children:(0,t.jsx)("svg",{className:"w-6 h-6 text-aba-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})}),(0,t.jsx)("p",{className:"text-sm text-slate-500 mb-1",children:"Nenhum responsÃ¡vel cadastrado"}),(0,t.jsx)("p",{className:"text-xs text-slate-400",children:"Adicione para enviar resumos por email"})]}):(0,t.jsx)("div",{className:"space-y-3",children:M.map(e=>(0,t.jsxs)("div",{className:"flex items-center justify-between p-4 rounded-xl border border-slate-200 bg-white",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"w-9 h-9 rounded-full bg-aba-500/10 flex items-center justify-center flex-shrink-0",children:(0,t.jsx)("span",{className:"text-sm font-medium text-aba-500",children:e.name.charAt(0)})}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("p",{className:"text-sm font-medium text-slate-700",children:[e.name,e.relationship?(0,t.jsxs)("span",{className:"text-xs text-slate-400 ml-1",children:["(",e.relationship,")"]}):null]}),e.email&&(0,t.jsx)("p",{className:"text-xs text-slate-400",children:e.email}),e.phone&&(0,t.jsx)("p",{className:"text-xs text-slate-400",children:e.phone})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("button",{onClick:K,disabled:G,className:"text-xs text-aba-500 hover:text-aba-600 px-2 py-1 rounded border border-aba-500/20 hover:bg-aba-500/5 transition-colors",children:G?"...":"Portal"}),(0,t.jsx)("button",{onClick:()=>q(e.id),className:"text-xs text-red-400 hover:text-red-600 px-2 py-1 rounded border border-red-200 hover:bg-red-50 transition-colors",children:"Remover"})]})]},e.id))}),D&&(0,t.jsx)("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",onClick:()=>L(!1),children:(0,t.jsxs)("div",{className:"bg-white rounded-2xl p-6 max-w-md w-full shadow-xl",onClick:e=>e.stopPropagation(),children:[(0,t.jsx)("h3",{className:"text-base font-medium text-slate-800 mb-4",children:"Adicionar ResponsÃ¡vel"}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-xs font-medium text-slate-600 mb-1",children:"Nome *"}),(0,t.jsx)("input",{type:"text",value:R.name,onChange:e=>F({...R,name:e.target.value}),className:"w-full px-3 py-2 border border-slate-200 rounded-lg text-sm focus:outline-none focus:border-aba-500",placeholder:"Nome completo"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-xs font-medium text-slate-600 mb-1",children:"Email"}),(0,t.jsx)("input",{type:"email",value:R.email,onChange:e=>F({...R,email:e.target.value}),className:"w-full px-3 py-2 border border-slate-200 rounded-lg text-sm focus:outline-none focus:border-aba-500",placeholder:"email@exemplo.com"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-xs font-medium text-slate-600 mb-1",children:"Telefone / WhatsApp"}),(0,t.jsx)("input",{type:"text",value:R.phone,onChange:e=>F({...R,phone:e.target.value}),className:"w-full px-3 py-2 border border-slate-200 rounded-lg text-sm focus:outline-none focus:border-aba-500",placeholder:"(81) 99999-9999"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-xs font-medium text-slate-600 mb-1",children:"Parentesco"}),(0,t.jsxs)("select",{value:R.relationship,onChange:e=>F({...R,relationship:e.target.value}),className:"w-full px-3 py-2 border border-slate-200 rounded-lg text-sm focus:outline-none focus:border-aba-500 bg-white",children:[(0,t.jsx)("option",{value:"",children:"Selecione..."}),(0,t.jsx)("option",{value:"MÃ£e",children:"MÃ£e"}),(0,t.jsx)("option",{value:"Pai",children:"Pai"}),(0,t.jsx)("option",{value:"AvÃ³",children:"AvÃ³"}),(0,t.jsx)("option",{value:"AvÃ´",children:"AvÃ´"}),(0,t.jsx)("option",{value:"Tutor legal",children:"Tutor legal"}),(0,t.jsx)("option",{value:"Outro",children:"Outro"})]})]})]}),(0,t.jsxs)("div",{className:"flex justify-end gap-3 mt-5",children:[(0,t.jsx)("button",{onClick:()=>L(!1),className:"px-4 py-2 text-sm text-slate-500 hover:text-slate-700",children:"Cancelar"}),(0,t.jsx)("button",{onClick:J,disabled:W||!R.name,className:"px-5 py-2 bg-aba-500 text-white text-sm font-medium rounded-lg hover:bg-aba-600 disabled:opacity-50 transition-colors",children:W?"Salvando...":"Salvar"})]})]})})]}),A&&(0,t.jsx)("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",onClick:()=>P(!1),children:(0,t.jsx)("div",{className:"bg-white rounded-2xl w-full max-w-lg max-h-[90vh] overflow-y-auto",onClick:e=>e.stopPropagation(),children:(0,t.jsxs)("div",{className:"p-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,t.jsx)("h2",{className:"text-lg font-medium text-slate-800",children:"Novo Protocolo"}),(0,t.jsx)("button",{onClick:()=>P(!1),className:"text-slate-400 hover:text-slate-600 text-xl leading-none",children:"Ã—"})]}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-xs font-medium text-slate-600 mb-1",children:"TÃ­tulo do protocolo *"}),(0,t.jsx)("input",{type:"text",value:Y.title,onChange:e=>Z({...Y,title:e.target.value}),placeholder:"Ex: Mando com apoio visual",className:"w-full px-3 py-2 rounded-lg border border-slate-200 text-sm focus:outline-none focus:border-aba-500"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-xs font-medium text-slate-600 mb-1",children:"DomÃ­nio clÃ­nico *"}),(0,t.jsx)("select",{value:Y.domain,onChange:e=>Z({...Y,domain:e.target.value}),className:"w-full px-3 py-2 rounded-lg border border-slate-200 text-sm focus:outline-none focus:border-aba-500 bg-white",children:c.map(e=>(0,t.jsx)("option",{value:e.value,children:e.label},e.value))})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-xs font-medium text-slate-600 mb-1",children:"TÃ©cnica Validada (SBNI/FPG) *"}),(0,t.jsxs)("select",{value:Y.ebp_practice_id,onChange:e=>Z({...Y,ebp_practice_id:e.target.value}),className:"w-full px-3 py-2 rounded-lg border border-slate-200 text-sm focus:outline-none focus:border-aba-500 bg-white",children:[(0,t.jsx)("option",{value:"",children:"Selecione uma prÃ¡tica"}),U.map(e=>(0,t.jsxs)("option",{value:e.id,children:[e.id,". ",e.name]},e.id))]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-xs font-medium text-slate-600 mb-1",children:"Objetivo operacional *"}),(0,t.jsx)("textarea",{value:Y.objective,onChange:e=>Z({...Y,objective:e.target.value}),rows:3,placeholder:"Ex: O aprendiz solicitarÃ¡ itens desejados usando frases de 2+ palavras em 80% das oportunidades por 3 sessÃµes consecutivas.",className:"w-full px-3 py-2 rounded-lg border border-slate-200 text-sm focus:outline-none focus:border-aba-500 resize-none"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-xs font-medium text-slate-600 mb-1",children:"CritÃ©rio de domÃ­nio (%)"}),(0,t.jsx)("input",{type:"number",min:50,max:100,value:Y.mastery_criteria_pct,onChange:e=>Z({...Y,mastery_criteria_pct:parseInt(e.target.value)||80}),className:"w-full px-3 py-2 rounded-lg border border-slate-200 text-sm focus:outline-none focus:border-aba-500"}),(0,t.jsx)("p",{className:"text-[11px] text-slate-400 mt-1",children:"PadrÃ£o: 80%. MÃ­nimo recomendado: 70%."})]}),ee.length>0&&(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{className:"block text-xs font-medium text-slate-600 mb-1",children:["Vincular a meta do PEI ",(0,t.jsx)("span",{className:"text-slate-400",children:"(opcional)"})]}),(0,t.jsxs)("select",{value:Y.pei_goal_id,onChange:e=>Z({...Y,pei_goal_id:e.target.value}),className:"w-full px-3 py-2 rounded-lg border border-slate-200 text-sm focus:outline-none focus:border-aba-500 bg-white",children:[(0,t.jsx)("option",{value:"",children:"Sem vÃ­nculo"}),ee.map(e=>(0,t.jsxs)("option",{value:e.id,children:[e.title," (",e.domain,")"]},e.id))]}),(0,t.jsx)("p",{className:"text-[11px] text-slate-400 mt-1",children:"Vincula este protocolo a uma meta do PEI do aprendiz."})]})]}),(0,t.jsxs)("div",{className:"flex gap-3 mt-6 pt-4 border-t border-slate-100",children:[(0,t.jsx)("button",{onClick:()=>P(!1),className:"flex-1 px-4 py-2 rounded-lg border border-slate-200 text-sm text-slate-500 hover:bg-slate-50",children:"Cancelar"}),(0,t.jsx)("button",{onClick:el,disabled:Q,className:"flex-1 px-4 py-2 rounded-lg bg-aba-500 text-white text-sm font-medium hover:bg-aba-500/90 disabled:opacity-50 transition-colors",children:Q?"Criando...":"Criar protocolo"})]})]})})})]})}e.s(["default",()=>x])}]);