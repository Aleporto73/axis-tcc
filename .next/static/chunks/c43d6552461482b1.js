(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,69927,e=>{"use strict";var s=e.i(43476),t=e.i(71645),a=e.i(22016);function r(){let[e,r]=(0,t.useState)(null),[l,i]=(0,t.useState)([]),[n,d]=(0,t.useState)(null),[o,c]=(0,t.useState)(!0);return((0,t.useEffect)(()=>{Promise.all([fetch("/api/aba/dashboard").then(e=>e.json()),fetch("/api/aba/alerts").then(e=>e.json()).catch(()=>({alerts:[]}))]).then(([e,s])=>{e&&"object"==typeof e&&"number"==typeof e.total_learners&&"number"==typeof e.sessions_today&&"number"==typeof e.sessions_week&&"number"==typeof e.active_protocols&&"string"==typeof e.engine_version&&"mastered_protocols"in e?r(e):d("Resposta inválida do servidor."),i(s.alerts||[]),c(!1)}).catch(()=>{d("Falha de conexão com o servidor."),c(!1)})},[]),n)?(0,s.jsx)("div",{className:"flex items-center justify-center min-h-[60vh] px-4",children:(0,s.jsxs)("div",{className:"text-center max-w-md",children:[(0,s.jsx)("p",{className:"text-sm text-slate-600 mb-2",children:n}),(0,s.jsx)("button",{onClick:()=>window.location.reload(),className:"text-xs text-aba-500 hover:text-aba-600 font-medium",children:"Tentar novamente"})]})}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"flex justify-center pt-5 md:pt-6 mb-6 md:mb-8 px-4",children:(0,s.jsxs)("nav",{className:"inline-flex items-center gap-1 bg-white border border-slate-200 rounded-full px-3 md:px-5 py-1.5 shadow-sm",children:[(0,s.jsx)(a.default,{href:"/aba",className:"px-3 py-1 text-sm font-medium text-aba-500",children:"Painel"}),(0,s.jsx)("span",{className:"text-slate-300 text-xs",children:"·"}),(0,s.jsx)(a.default,{href:"/aba/aprendizes",className:"px-3 py-1 text-sm font-medium text-slate-400 hover:text-slate-600 transition-colors",children:"Aprendizes"}),(0,s.jsx)("span",{className:"text-slate-300 text-xs",children:"·"}),(0,s.jsx)(a.default,{href:"/aba/sessoes",className:"px-3 py-1 text-sm font-medium text-slate-400 hover:text-slate-600 transition-colors",children:"Sessões"}),(0,s.jsx)("span",{className:"text-slate-300 text-xs hidden sm:inline",children:"·"}),(0,s.jsx)(a.default,{href:"/aba/relatorios",className:"hidden sm:inline px-3 py-1 text-sm font-medium text-slate-400 hover:text-slate-600 transition-colors",children:"Relatórios"})]})}),(0,s.jsxs)("div",{className:"px-4 md:px-8 lg:px-12 xl:px-16",children:[(0,s.jsxs)("header",{className:"mb-2",children:[(0,s.jsx)("h1",{className:"text-lg font-normal text-slate-400 tracking-tight mb-0",children:"Painel ABA"}),(0,s.jsx)("p",{className:"text-xs text-slate-300 font-light",children:"Visão geral dos aprendizes"})]}),(0,s.jsx)("section",{className:"mb-6 md:mb-8 pb-5 md:pb-6 border-b border-slate-100",children:o?(0,s.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3",children:[void 0,void 0,void 0,void 0].map((e,t)=>(0,s.jsx)("div",{className:"animate-pulse bg-slate-100 rounded-xl h-20"},t))}):(0,s.jsxs)("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3",children:[(0,s.jsxs)("div",{className:"p-4 rounded-xl border border-slate-200 bg-white",children:[(0,s.jsx)("p",{className:"text-[10px] text-slate-400 uppercase tracking-wider mb-1",children:"Aprendizes"}),(0,s.jsx)("p",{className:"text-2xl font-light text-aba-500",children:e?.total_learners||0}),(0,s.jsxs)("p",{className:"text-[10px] text-slate-400",children:[e?.sessions_today||0," sessão hoje"]})]}),(0,s.jsxs)("div",{className:"p-4 rounded-xl border border-slate-200 bg-white",children:[(0,s.jsx)("p",{className:"text-[10px] text-slate-400 uppercase tracking-wider mb-1",children:"Protocolos"}),(0,s.jsxs)("p",{className:"text-2xl font-light text-slate-700",children:[e?.active_protocols||0," ",(0,s.jsx)("span",{className:"text-sm text-slate-400",children:"ativos"})]}),(0,s.jsxs)("p",{className:"text-[10px] text-slate-400",children:[e?.mastered_protocols||0," dominados"]})]}),(0,s.jsxs)("div",{className:"p-4 rounded-xl border border-slate-200 bg-white",children:[(0,s.jsx)("p",{className:"text-[10px] text-slate-400 uppercase tracking-wider mb-1",children:"CSO Médio"}),e?.avg_cso!=null?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("p",{className:`text-2xl font-light ${e.avg_cso>=85?"text-emerald-600":e.avg_cso>=70?"text-green-600":e.avg_cso>=50?"text-amber-500":"text-red-500"}`,children:e.avg_cso}),(0,s.jsx)("p",{className:"text-[10px] text-slate-400",children:e.avg_cso>=85?"Excelente":e.avg_cso>=70?"Bom":e.avg_cso>=50?"Atenção":"Crítico"})]}):(0,s.jsx)("p",{className:"text-sm text-slate-300",children:"—"})]}),(0,s.jsxs)("div",{className:`p-4 rounded-xl border ${(e?.learners_critical||0)>0?"border-red-200 bg-red-50/40":"border-slate-200 bg-white"}`,children:[(0,s.jsx)("p",{className:"text-[10px] text-slate-400 uppercase tracking-wider mb-1",children:"Em Alerta"}),(0,s.jsx)("p",{className:`text-2xl font-light ${(e?.learners_critical||0)>0?"text-red-500":"text-slate-400"}`,children:e?.learners_critical||0}),(0,s.jsxs)("p",{className:"text-[10px] text-slate-400",children:[e?.sessions_week||0," sessões na semana"]})]})]})}),l.length>0&&(0,s.jsxs)("section",{className:"mb-6 md:mb-8",children:[(0,s.jsx)("h2",{className:"text-xs font-medium text-red-500 uppercase tracking-wider mb-3",children:"Alertas Ativos"}),(0,s.jsx)("div",{className:"space-y-2",children:l.map((e,t)=>(0,s.jsxs)(a.default,{href:"/aba/aprendizes/"+e.learner_id,className:"flex items-center gap-3 p-3 rounded-xl border border-red-200 bg-red-50/50 hover:bg-red-50 transition-colors",children:[(0,s.jsx)("div",{className:"w-8 h-8 rounded-full bg-red-100 flex items-center justify-center flex-shrink-0",children:(0,s.jsx)("svg",{className:"w-4 h-4 text-red-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L4.082 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsx)("p",{className:"text-sm font-medium text-slate-800",children:e.learner_name}),(0,s.jsx)("p",{className:"text-xs text-red-500",children:e.message}),(0,s.jsx)("p",{className:"text-[10px] text-slate-400",children:e.protocol_title})]}),(0,s.jsx)("svg",{className:"w-4 h-4 text-slate-300 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]},t))})]}),(0,s.jsxs)("section",{children:[(0,s.jsx)("h2",{className:"font-serif text-lg md:text-xl font-light text-slate-800 mb-4",children:"Acesso Rápido"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:[(0,s.jsxs)(a.default,{href:"/aba/aprendizes",className:"p-5 rounded-xl border border-slate-200 hover:border-aba-500/30 hover:shadow-sm transition-all",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,s.jsx)("div",{className:"w-9 h-9 rounded-lg bg-aba-500/10 flex items-center justify-center",children:(0,s.jsx)("svg",{className:"w-5 h-5 text-aba-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0z"})})}),(0,s.jsx)("h3",{className:"text-sm font-medium text-slate-800",children:"Aprendizes"})]}),(0,s.jsx)("p",{className:"text-xs text-slate-400",children:"Cadastrar e acompanhar aprendizes"})]}),(0,s.jsxs)(a.default,{href:"/aba/sessoes",className:"p-5 rounded-xl border border-slate-200 hover:border-aba-500/30 hover:shadow-sm transition-all",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,s.jsx)("div",{className:"w-9 h-9 rounded-lg bg-aba-500/10 flex items-center justify-center",children:(0,s.jsx)("svg",{className:"w-5 h-5 text-aba-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})}),(0,s.jsx)("h3",{className:"text-sm font-medium text-slate-800",children:"Sessões"})]}),(0,s.jsx)("p",{className:"text-xs text-slate-400",children:"Agendar e registrar sessões ABA"})]}),(0,s.jsxs)(a.default,{href:"/aba/relatorios",className:"p-5 rounded-xl border border-slate-200 hover:border-aba-500/30 hover:shadow-sm transition-all",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,s.jsx)("div",{className:"w-9 h-9 rounded-lg bg-aba-500/10 flex items-center justify-center",children:(0,s.jsx)("svg",{className:"w-5 h-5 text-aba-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9 17v-2m3 2v-4m3 4v-6m2 10H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),(0,s.jsx)("h3",{className:"text-sm font-medium text-slate-800",children:"Relatórios"})]}),(0,s.jsx)("p",{className:"text-xs text-slate-400",children:"Gerar relatórios para convênio em 1 clique"})]})]})]}),(0,s.jsx)("footer",{className:"mt-12 pt-6 border-t border-slate-100",children:(0,s.jsxs)("p",{className:"text-[11px] text-slate-300 italic",children:["AXIS ABA — Motor CSO-ABA v",e?.engine_version||"...",". Indicadores são descritivos, não diagnósticos. O julgamento clínico é sempre humano."]})})]})]})}e.s(["default",()=>r])}]);