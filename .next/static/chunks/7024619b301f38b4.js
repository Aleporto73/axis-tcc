(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,90006,e=>{"use strict";var t=e.i(43476),a=e.i(71645),s=e.i(18566),r=e.i(22016);let l={scheduled:"Agendada",in_progress:"Em andamento",completed:"Concluída",cancelled:"Cancelada"},o={scheduled:"bg-blue-50 text-blue-600",in_progress:"bg-aba-500/10 text-aba-500",completed:"bg-green-50 text-green-600",cancelled:"bg-slate-100 text-slate-400"},i={independent:"Independente",gestural:"Gestual",verbal:"Verbal",modeling:"Modelagem",partial_physical:"Física parcial",full_physical:"Física total"},n={leve:"Leve",moderada:"Moderada",alta:"Alta",severa:"Severa"};function c(){let e=(0,s.useParams)();(0,s.useRouter)();let c=e.id,[d,x]=(0,a.useState)(null),[m,u]=(0,a.useState)([]),[p,b]=(0,a.useState)([]),[h,g]=(0,a.useState)([]),[j,v]=(0,a.useState)([]),[f,y]=(0,a.useState)(!0),[N,_]=(0,a.useState)(!1),[w,C]=(0,a.useState)(null),[k,S]=(0,a.useState)("trials"),[T,E]=(0,a.useState)({protocol_id:"",target_name:"",trials_total:10,trials_correct:0,prompt_level:"full_physical",notes:""}),[O,P]=(0,a.useState)({behavior_type:"",antecedent:"",behavior:"",consequence:"",intensity:"leve",duration_seconds:"",location:""}),[A,q]=(0,a.useState)(!1),[L,B]=(0,a.useState)(!1),[F,R]=(0,a.useState)(!1),[I,M]=(0,a.useState)(!1),[z,$]=(0,a.useState)(""),[D,J]=(0,a.useState)(""),[U,W]=(0,a.useState)([]),[H,V]=(0,a.useState)(!1),[K,G]=(0,a.useState)("idle"),[Q,X]=(0,a.useState)(null),Y=async()=>{if(d){$(""),J(""),G("idle"),X(null);try{let e=await fetch("/api/aba/guardians?learner_id="+d.learner_id),t=(await e.json()).guardians||[];W(t),t.length>0&&t[0].email&&J(t[0].email)}catch{}M(!0)}},Z=async()=>{if(!z.trim())return void X("Escreva o resumo antes de enviar.");if(!D.trim())return void X("Informe o email do destinatário.");V(!0),X(null);try{let e=await fetch("/api/aba/sessions/"+c+"/summary",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({content:z})}),t=await e.json();if(!t.summary_id)throw Error(t.error||"Erro ao criar resumo");let a=t.summary_id;if(!(await fetch("/api/aba/sessions/"+c+"/summary",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({summary_id:a,action:"approve"})})).ok)throw Error("Erro ao aprovar resumo");let s=await fetch("/api/aba/sessions/"+c+"/summary",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({summary_id:a,action:"send",recipient_email:D})}),r=await s.json();if(!s.ok)throw Error(r.error||"Erro ao enviar email");G("sent")}catch(e){X(e.message||"Erro ao enviar"),G("error")}V(!1)},[ee,et]=(0,a.useState)(!1),[ea,es]=(0,a.useState)({title:"",ebp_practice_id:7,domain:"Aquisição",objective:"",mastery_criteria_pct:80,mastery_criteria_sessions:3,mastery_criteria_trials:10}),er=(0,a.useCallback)(async()=>{try{let e=await fetch(`/api/aba/sessions/${c}`);if(!e.ok){C("Sessão não encontrada"),y(!1);return}let t=await e.json();if(x(t.session),u(t.targets||[]),b(t.behaviors||[]),t.session?.learner_id){let e=await fetch(`/api/aba/protocols?learner_id=${t.session.learner_id}`),a=await e.json();g(a.protocols||[])}y(!1)}catch{C("Falha de conexão"),y(!1)}},[c]),el=(0,a.useCallback)(async()=>{try{let e=await fetch("/api/aba/ebp-practices");if(e.ok){let t=await e.json();v(t.practices||[])}}catch{}},[]);(0,a.useEffect)(()=>{er(),el()},[er,el]);let eo=async e=>{_(!0),C(null);try{let t=await fetch(`/api/aba/sessions/${c}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:e})});if(!t.ok){let e=await t.json();C(e.error||"Erro na ação"),_(!1);return}await er(),_(!1)}catch{C("Falha de conexão"),_(!1)}},ei=async()=>{if(!T.protocol_id||!T.target_name)return void C("Selecione o protocolo e nome do alvo");q(!0),C(null);try{let e=await fetch(`/api/aba/sessions/${c}/trials`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({protocol_id:T.protocol_id,target_name:T.target_name.trim(),trials_total:T.trials_total,trials_correct:T.trials_correct,prompt_level:T.prompt_level,notes:T.notes.trim()||null})});if(!e.ok){let t=await e.json();C(t.error||"Erro ao registrar trial"),q(!1);return}E({...T,target_name:"",trials_correct:0,notes:""}),await er(),q(!1)}catch{C("Falha de conexão"),q(!1)}},en=async()=>{if(!O.behavior_type||!O.antecedent||!O.behavior||!O.consequence)return void C("Preencha todos os campos ABC");B(!0),C(null);try{let e=await fetch(`/api/aba/sessions/${c}/behaviors`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({behavior_type:O.behavior_type.trim(),antecedent:O.antecedent.trim(),behavior:O.behavior.trim(),consequence:O.consequence.trim(),intensity:O.intensity,duration_seconds:O.duration_seconds?parseInt(O.duration_seconds):null,location:O.location.trim()||null})});if(!e.ok){let t=await e.json();C(t.error||"Erro ao registrar comportamento"),B(!1);return}P({behavior_type:"",antecedent:"",behavior:"",consequence:"",intensity:"leve",duration_seconds:"",location:""}),await er(),B(!1)}catch{C("Falha de conexão"),B(!1)}},ec=async()=>{if(!ea.title||!ea.objective)return void C("Título e objetivo são obrigatórios");et(!0),C(null);try{let e=await fetch("/api/aba/protocols",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({learner_id:d?.learner_id,title:ea.title.trim(),ebp_practice_id:ea.ebp_practice_id,domain:ea.domain.trim(),objective:ea.objective.trim(),mastery_criteria_pct:ea.mastery_criteria_pct,mastery_criteria_sessions:ea.mastery_criteria_sessions,mastery_criteria_trials:ea.mastery_criteria_trials})});if(!e.ok){let t=await e.json();C(t.error||"Erro ao criar protocolo"),et(!1);return}R(!1),es({title:"",ebp_practice_id:7,domain:"Aquisição",objective:"",mastery_criteria_pct:80,mastery_criteria_sessions:3,mastery_criteria_trials:10}),et(!1),await er()}catch{C("Falha de conexão"),et(!1)}};if(f)return(0,t.jsx)("div",{className:"flex items-center justify-center min-h-[50vh]",children:(0,t.jsx)("div",{className:"animate-pulse text-slate-400 text-sm",children:"Carregando sessão..."})});if(!d)return(0,t.jsx)("div",{className:"flex items-center justify-center min-h-[50vh]",children:(0,t.jsx)("p",{className:"text-slate-400 text-sm",children:w||"Sessão não encontrada"})});let ed="in_progress"===d.status,ex="scheduled"===d.status,em="completed"===d.status;return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"px-4 md:px-8 lg:px-12 xl:px-16 pt-5 md:pt-6",children:[(0,t.jsx)(r.default,{href:"/aba/sessoes",className:"text-xs text-slate-400 hover:text-aba-500 transition-colors",children:"← Voltar para sessões"}),(0,t.jsxs)("div",{className:"mt-4 flex items-start justify-between mb-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-lg font-normal text-slate-800 tracking-tight",children:d.learner_name}),(0,t.jsxs)("p",{className:"text-xs text-slate-400 mt-0.5",children:[new Date(d.scheduled_at).toLocaleDateString("pt-BR")," às ",new Date(d.scheduled_at).toLocaleTimeString("pt-BR",{hour:"2-digit",minute:"2-digit"}),d.location&&` \xb7 ${d.location}`]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${o[d.status]||"bg-slate-100 text-slate-500"}`,children:l[d.status]||d.status}),ex&&(0,t.jsx)("button",{onClick:()=>eo("open"),disabled:N,className:"px-4 py-2 bg-aba-500 text-white text-sm font-medium rounded-lg hover:bg-aba-600 transition-colors disabled:opacity-50",children:N?"Iniciando...":"Iniciar Sessão"}),ed&&(0,t.jsx)("button",{onClick:()=>eo("close"),disabled:N,className:"px-4 py-2 bg-green-600 text-white text-sm font-medium rounded-lg hover:bg-green-700 transition-colors disabled:opacity-50",children:N?"Finalizando...":"Finalizar Sessão"})]})]}),w&&(0,t.jsx)("div",{className:"mb-4 p-3 bg-red-50 rounded-lg",children:(0,t.jsx)("p",{className:"text-xs text-red-500",children:w})}),em&&(0,t.jsxs)("div",{className:"mb-6 p-4 bg-green-50 border border-green-200 rounded-xl flex items-center justify-between gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-green-700 font-medium",children:"Sessão finalizada"}),(0,t.jsxs)("p",{className:"text-xs text-green-600 mt-1",children:[m.length," ",1===m.length?"trial registrado":"trials registrados"," · ",p.length," ",1===p.length?"comportamento":"comportamentos",d.started_at&&d.ended_at&&` \xb7 Dura\xe7\xe3o: ${Math.round((new Date(d.ended_at).getTime()-new Date(d.started_at).getTime())/6e4)} min`]})]}),(0,t.jsxs)("button",{onClick:Y,className:"flex-shrink-0 inline-flex items-center gap-1.5 px-3 py-2 bg-white border border-green-300 text-green-700 text-xs font-medium rounded-lg hover:bg-green-100 transition-colors",children:[(0,t.jsx)("svg",{className:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),"Enviar Resumo"]})]}),ed&&0===h.length&&(0,t.jsxs)("div",{className:"mb-6 p-4 bg-amber-50 border border-amber-200 rounded-xl flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-amber-700 font-medium",children:"Nenhum protocolo ativo"}),(0,t.jsx)("p",{className:"text-xs text-amber-600 mt-0.5",children:"Crie um protocolo para registrar trials"})]}),(0,t.jsx)("button",{onClick:()=>R(!0),className:"px-4 py-2 bg-aba-500 text-white text-sm font-medium rounded-lg hover:bg-aba-600 transition-colors",children:"+ Protocolo"})]}),(ed||em)&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"flex gap-1 mb-6 border-b border-slate-200",children:[(0,t.jsxs)("button",{onClick:()=>S("trials"),className:`px-4 py-2 text-sm font-medium border-b-2 transition-colors ${"trials"===k?"border-aba-500 text-aba-500":"border-transparent text-slate-400 hover:text-slate-600"}`,children:["Trials (",m.length,")"]}),(0,t.jsxs)("button",{onClick:()=>S("behaviors"),className:`px-4 py-2 text-sm font-medium border-b-2 transition-colors ${"behaviors"===k?"border-aba-500 text-aba-500":"border-transparent text-slate-400 hover:text-slate-600"}`,children:["Comportamentos (",p.length,")"]})]}),"trials"===k&&(0,t.jsxs)("div",{className:"space-y-4",children:[ed&&h.length>0&&(0,t.jsxs)("div",{className:"border border-slate-200 rounded-xl p-4 space-y-3",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("h3",{className:"text-xs font-medium text-slate-600",children:"Registrar Trial (DTT)"}),(0,t.jsx)("button",{onClick:()=>R(!0),className:"text-[11px] text-aba-500 hover:underline",children:"+ Protocolo"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-[11px] text-slate-500 mb-1",children:"Protocolo *"}),(0,t.jsxs)("select",{value:T.protocol_id,onChange:e=>E({...T,protocol_id:e.target.value}),className:"w-full px-3 py-2 border border-slate-200 rounded-lg text-sm focus:outline-none focus:border-aba-500 bg-white",children:[(0,t.jsx)("option",{value:"",children:"Selecione..."}),h.filter(e=>"active"===e.status||"draft"===e.status).map(e=>(0,t.jsxs)("option",{value:e.id,children:[e.title," (",e.domain,")"]},e.id))]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-[11px] text-slate-500 mb-1",children:"Alvo *"}),(0,t.jsx)("input",{type:"text",value:T.target_name,onChange:e=>E({...T,target_name:e.target.value}),className:"w-full px-3 py-2 border border-slate-200 rounded-lg text-sm focus:outline-none focus:border-aba-500",placeholder:"Ex: Apontar para copo"})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-3 gap-3",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-[11px] text-slate-500 mb-1",children:"Total tentativas"}),(0,t.jsx)("input",{type:"number",min:"1",max:"100",value:T.trials_total,onChange:e=>E({...T,trials_total:parseInt(e.target.value)||0}),className:"w-full px-3 py-2 border border-slate-200 rounded-lg text-sm focus:outline-none focus:border-aba-500"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-[11px] text-slate-500 mb-1",children:"Corretas"}),(0,t.jsx)("input",{type:"number",min:"0",max:T.trials_total,value:T.trials_correct,onChange:e=>E({...T,trials_correct:parseInt(e.target.value)||0}),className:"w-full px-3 py-2 border border-slate-200 rounded-lg text-sm focus:outline-none focus:border-aba-500"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-[11px] text-slate-500 mb-1",children:"Nível de dica"}),(0,t.jsx)("select",{value:T.prompt_level,onChange:e=>E({...T,prompt_level:e.target.value}),className:"w-full px-3 py-2 border border-slate-200 rounded-lg text-sm focus:outline-none focus:border-aba-500 bg-white",children:Object.entries(i).map(([e,a])=>(0,t.jsx)("option",{value:e,children:a},e))})]})]}),(0,t.jsx)("div",{className:"flex justify-end",children:(0,t.jsx)("button",{onClick:ei,disabled:A,className:"px-4 py-2 bg-aba-500 text-white text-sm font-medium rounded-lg hover:bg-aba-600 transition-colors disabled:opacity-50",children:A?"Salvando...":"Registrar Trial"})})]}),m.length>0?(0,t.jsx)("div",{className:"space-y-2",children:m.map(e=>(0,t.jsxs)("div",{className:"flex items-center justify-between p-3 rounded-xl border border-slate-200",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm font-medium text-slate-800",children:e.target_name}),(0,t.jsx)("p",{className:"text-[11px] text-slate-400 mt-0.5",children:i[e.prompt_level]||e.prompt_level})]}),(0,t.jsxs)("div",{className:"text-right",children:[(0,t.jsxs)("p",{className:"text-sm font-medium text-aba-500",children:[e.trials_correct,"/",e.trials_total]}),(0,t.jsxs)("p",{className:"text-[11px] text-slate-400",children:[e.score_pct,"%"]})]})]},e.id))}):(0,t.jsx)("p",{className:"text-xs text-slate-400 text-center py-8",children:"Nenhum trial registrado"})]}),"behaviors"===k&&(0,t.jsxs)("div",{className:"space-y-4",children:[ed&&(0,t.jsxs)("div",{className:"border border-slate-200 rounded-xl p-4 space-y-3",children:[(0,t.jsx)("h3",{className:"text-xs font-medium text-slate-600",children:"Registrar Comportamento (ABC)"}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-[11px] text-slate-500 mb-1",children:"Tipo *"}),(0,t.jsx)("input",{type:"text",value:O.behavior_type,onChange:e=>P({...O,behavior_type:e.target.value}),className:"w-full px-3 py-2 border border-slate-200 rounded-lg text-sm focus:outline-none focus:border-aba-500",placeholder:"Ex: Autolesão, Estereotipia"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-[11px] text-slate-500 mb-1",children:"Intensidade *"}),(0,t.jsx)("select",{value:O.intensity,onChange:e=>P({...O,intensity:e.target.value}),className:"w-full px-3 py-2 border border-slate-200 rounded-lg text-sm focus:outline-none focus:border-aba-500 bg-white",children:Object.entries(n).map(([e,a])=>(0,t.jsx)("option",{value:e,children:a},e))})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-[11px] text-slate-500 mb-1",children:"Antecedente (A) *"}),(0,t.jsx)("input",{type:"text",value:O.antecedent,onChange:e=>P({...O,antecedent:e.target.value}),className:"w-full px-3 py-2 border border-slate-200 rounded-lg text-sm focus:outline-none focus:border-aba-500",placeholder:"O que aconteceu antes"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-[11px] text-slate-500 mb-1",children:"Comportamento (B) *"}),(0,t.jsx)("input",{type:"text",value:O.behavior,onChange:e=>P({...O,behavior:e.target.value}),className:"w-full px-3 py-2 border border-slate-200 rounded-lg text-sm focus:outline-none focus:border-aba-500",placeholder:"O que o aprendiz fez"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-[11px] text-slate-500 mb-1",children:"Consequência (C) *"}),(0,t.jsx)("input",{type:"text",value:O.consequence,onChange:e=>P({...O,consequence:e.target.value}),className:"w-full px-3 py-2 border border-slate-200 rounded-lg text-sm focus:outline-none focus:border-aba-500",placeholder:"O que aconteceu depois"})]}),(0,t.jsx)("div",{className:"flex justify-end",children:(0,t.jsx)("button",{onClick:en,disabled:L,className:"px-4 py-2 bg-aba-500 text-white text-sm font-medium rounded-lg hover:bg-aba-600 transition-colors disabled:opacity-50",children:L?"Salvando...":"Registrar"})})]}),p.length>0?(0,t.jsx)("div",{className:"space-y-2",children:p.map(e=>(0,t.jsxs)("div",{className:"p-3 rounded-xl border border-slate-200",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,t.jsx)("span",{className:"text-sm font-medium text-slate-800",children:e.behavior_type}),(0,t.jsx)("span",{className:`px-2 py-0.5 rounded-full text-[10px] font-medium ${"severa"===e.intensity?"bg-red-50 text-red-600":"alta"===e.intensity?"bg-orange-50 text-orange-600":"moderada"===e.intensity?"bg-amber-50 text-amber-600":"bg-slate-50 text-slate-500"}`,children:n[e.intensity]||e.intensity})]}),(0,t.jsxs)("div",{className:"grid grid-cols-3 gap-2 text-[11px]",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"text-slate-400",children:"A:"})," ",(0,t.jsx)("span",{className:"text-slate-600",children:e.antecedent})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"text-slate-400",children:"B:"})," ",(0,t.jsx)("span",{className:"text-slate-600",children:e.behavior})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"text-slate-400",children:"C:"})," ",(0,t.jsx)("span",{className:"text-slate-600",children:e.consequence})]})]})]},e.id))}):(0,t.jsx)("p",{className:"text-xs text-slate-400 text-center py-8",children:"Nenhum comportamento registrado"})]})]})]}),F&&(0,t.jsx)("div",{className:"fixed inset-0 bg-black/30 z-50 flex items-center justify-center p-4",children:(0,t.jsxs)("div",{className:"bg-white rounded-2xl w-full max-w-lg shadow-xl",children:[(0,t.jsx)("div",{className:"p-6 border-b border-slate-100",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("h2",{className:"font-serif text-lg font-light text-slate-800",children:"Novo Protocolo"}),(0,t.jsx)("button",{onClick:()=>R(!1),className:"text-slate-400 hover:text-slate-600",children:(0,t.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),(0,t.jsxs)("div",{className:"p-6 space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-xs font-medium text-slate-600 mb-1",children:"Título *"}),(0,t.jsx)("input",{type:"text",value:ea.title,onChange:e=>es({...ea,title:e.target.value}),className:"w-full px-3 py-2 border border-slate-200 rounded-lg text-sm focus:outline-none focus:border-aba-500",placeholder:"Ex: Mando - Solicitar itens preferidos"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-xs font-medium text-slate-600 mb-1",children:"Prática EBP"}),(0,t.jsx)("select",{value:ea.ebp_practice_id,onChange:e=>es({...ea,ebp_practice_id:parseInt(e.target.value)}),className:"w-full px-3 py-2 border border-slate-200 rounded-lg text-sm focus:outline-none focus:border-aba-500 bg-white",children:j.length>0?j.map(e=>(0,t.jsx)("option",{value:e.id,children:e.name_pt},e.id)):(0,t.jsx)("option",{children:"Carregando..."})})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-xs font-medium text-slate-600 mb-1",children:"Domínio"}),(0,t.jsx)("input",{type:"text",value:ea.domain,onChange:e=>es({...ea,domain:e.target.value}),className:"w-full px-3 py-2 border border-slate-200 rounded-lg text-sm focus:outline-none focus:border-aba-500",placeholder:"Ex: Comunicação"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-xs font-medium text-slate-600 mb-1",children:"Objetivo *"}),(0,t.jsx)("textarea",{value:ea.objective,onChange:e=>es({...ea,objective:e.target.value}),rows:2,className:"w-full px-3 py-2 border border-slate-200 rounded-lg text-sm focus:outline-none focus:border-aba-500 resize-none",placeholder:"Ex: O aprendiz solicitará itens preferidos usando mando vocal em 80% das tentativas"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-3 gap-3",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-[11px] text-slate-500 mb-1",children:"Critério %"}),(0,t.jsx)("input",{type:"number",min:"50",max:"100",value:ea.mastery_criteria_pct,onChange:e=>es({...ea,mastery_criteria_pct:parseInt(e.target.value)||80}),className:"w-full px-3 py-2 border border-slate-200 rounded-lg text-sm focus:outline-none focus:border-aba-500"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-[11px] text-slate-500 mb-1",children:"Sessões consecutivas"}),(0,t.jsx)("input",{type:"number",min:"1",max:"10",value:ea.mastery_criteria_sessions,onChange:e=>es({...ea,mastery_criteria_sessions:parseInt(e.target.value)||3}),className:"w-full px-3 py-2 border border-slate-200 rounded-lg text-sm focus:outline-none focus:border-aba-500"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-[11px] text-slate-500 mb-1",children:"Min tentativas"}),(0,t.jsx)("input",{type:"number",min:"1",max:"50",value:ea.mastery_criteria_trials,onChange:e=>es({...ea,mastery_criteria_trials:parseInt(e.target.value)||10}),className:"w-full px-3 py-2 border border-slate-200 rounded-lg text-sm focus:outline-none focus:border-aba-500"})]})]})]}),(0,t.jsxs)("div",{className:"p-6 border-t border-slate-100 flex justify-end gap-3",children:[(0,t.jsx)("button",{onClick:()=>R(!1),className:"px-4 py-2 text-sm text-slate-500 hover:text-slate-700 transition-colors",children:"Cancelar"}),(0,t.jsx)("button",{onClick:ec,disabled:ee,className:"px-5 py-2 bg-aba-500 text-white text-sm font-medium rounded-lg hover:bg-aba-600 transition-colors disabled:opacity-50",children:ee?"Criando...":"Criar Protocolo"})]})]})}),I&&(0,t.jsx)("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",onClick:()=>{H||M(!1)},children:(0,t.jsxs)("div",{className:"bg-white rounded-2xl w-full max-w-lg shadow-xl",onClick:e=>e.stopPropagation(),children:[(0,t.jsxs)("div",{className:"p-5 border-b border-slate-100 flex items-center justify-between",children:[(0,t.jsx)("h3",{className:"text-base font-medium text-slate-800",children:"Enviar Resumo aos Pais"}),(0,t.jsx)("button",{onClick:()=>M(!1),className:"text-slate-400 hover:text-slate-600",children:(0,t.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,t.jsx)("div",{className:"p-5 space-y-4",children:"sent"===K?(0,t.jsxs)("div",{className:"text-center py-6",children:[(0,t.jsx)("div",{className:"w-12 h-12 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-3",children:(0,t.jsx)("svg",{className:"w-6 h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),(0,t.jsx)("p",{className:"text-sm font-medium text-slate-700",children:"Resumo enviado com sucesso!"}),(0,t.jsxs)("p",{className:"text-xs text-slate-400 mt-1",children:["Email enviado para ",D]}),(0,t.jsx)("button",{onClick:()=>M(!1),className:"mt-4 px-4 py-2 text-sm text-slate-500 hover:text-slate-700",children:"Fechar"})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-xs font-medium text-slate-600 mb-1",children:"Para"}),U.length>0&&(0,t.jsxs)("select",{value:D,onChange:e=>J(e.target.value),className:"w-full px-3 py-2 border border-slate-200 rounded-lg text-sm focus:outline-none focus:border-aba-500 bg-white mb-2",children:[U.filter(e=>e.email).map(e=>(0,t.jsxs)("option",{value:e.email,children:[e.name," — ",e.email]},e.id)),(0,t.jsx)("option",{value:"",children:"Outro email..."})]}),(0===U.length||""===D)&&(0,t.jsx)("input",{type:"email",value:D,onChange:e=>J(e.target.value),className:"w-full px-3 py-2 border border-slate-200 rounded-lg text-sm focus:outline-none focus:border-aba-500",placeholder:"email@exemplo.com"})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{className:"block text-xs font-medium text-slate-600 mb-1",children:["Resumo da sessão ",(0,t.jsx)("span",{className:"text-slate-400",children:"(o que os pais verão)"})]}),(0,t.jsx)("textarea",{value:z,onChange:e=>$(e.target.value),rows:6,className:"w-full px-3 py-2 border border-slate-200 rounded-lg text-sm focus:outline-none focus:border-aba-500 resize-none",placeholder:"Hoje trabalhamos em... "+(d?.learner_name||"")+" demonstrou... Os próximos passos são..."}),(0,t.jsx)("p",{className:"text-[10px] text-slate-400 mt-1",children:"Não inclua scores, percentuais ou notas clínicas. Este texto será enviado diretamente aos pais."})]}),Q&&(0,t.jsx)("p",{className:"text-xs text-red-500 bg-red-50 px-3 py-2 rounded-lg",children:Q}),(0,t.jsxs)("div",{className:"flex justify-end gap-3 pt-1",children:[(0,t.jsx)("button",{onClick:()=>M(!1),className:"px-4 py-2 text-sm text-slate-500 hover:text-slate-700",children:"Cancelar"}),(0,t.jsx)("button",{onClick:Z,disabled:H,className:"px-5 py-2 bg-aba-500 text-white text-sm font-medium rounded-lg hover:bg-aba-600 disabled:opacity-50 transition-colors",children:H?"Enviando...":"Aprovar e Enviar"})]})]})})]})})]})}e.s(["default",()=>c])}]);