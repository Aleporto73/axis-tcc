(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,98919,e=>{"use strict";let s=(0,e.i(75254).default)("shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);e.s(["Shield",()=>s],98919)},3116,e=>{"use strict";let s=(0,e.i(75254).default)("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);e.s(["Clock",()=>s],3116)},84614,16715,e=>{"use strict";var s=e.i(75254);let t=(0,s.default)("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);e.s(["User",()=>t],84614);let a=(0,s.default)("refresh-cw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);e.s(["RefreshCw",()=>a],16715)},74083,e=>{"use strict";var s=e.i(43476),t=e.i(71645),a=e.i(98919),l=e.i(3116),i=e.i(84614);let r=(0,e.i(75254).default)("funnel",[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]]);var d=e.i(16715);function c(){let[e,c]=(0,t.useState)([]),[n,o]=(0,t.useState)(!0),[x,m]=(0,t.useState)(""),h=async()=>{o(!0);try{let e=x?`/api/audit?action=${x}&limit=100`:"/api/audit?limit=100",s=await fetch(e);if(s.ok){let e=await s.json();c(e.logs||[])}}catch(e){console.error("Erro ao carregar logs:",e)}finally{o(!1)}};(0,t.useEffect)(()=>{h()},[x]);let u={REPORT_VIEW:"bg-blue-100 text-blue-700",SESSION_START:"bg-green-100 text-green-700",SESSION_FINISH:"bg-emerald-100 text-emerald-700",EVENT_MARK:"bg-purple-100 text-purple-700",PATIENT_CREATE:"bg-amber-100 text-amber-700",SUPERVISION_CONTEXT_ADD:"bg-indigo-100 text-indigo-700",SUGGESTION_ACCEPT:"bg-teal-100 text-teal-700",SUGGESTION_REJECT:"bg-red-100 text-red-700"},N={REPORT_VIEW:"Visualizou Relatório",SESSION_START:"Iniciou Sessão",SESSION_FINISH:"Finalizou Sessão",EVENT_MARK:"Marcou Evento",PATIENT_CREATE:"Criou Paciente",SUPERVISION_CONTEXT_ADD:"Adicionou Contexto",SUGGESTION_ACCEPT:"Aceitou Sugestão",SUGGESTION_REJECT:"Rejeitou Sugestão"};return(0,s.jsx)("div",{className:"min-h-screen bg-slate-50 p-6",children:(0,s.jsxs)("div",{className:"max-w-6xl mx-auto",children:[(0,s.jsx)("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-6 mb-6",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)("div",{className:"w-12 h-12 bg-slate-700 rounded-xl flex items-center justify-center",children:(0,s.jsx)(a.Shield,{className:"w-6 h-6 text-white"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-2xl font-bold text-slate-900",children:"Audit Logs"}),(0,s.jsx)("p",{className:"text-slate-500 text-sm",children:"AXIS_AUDIT_FRAMEWORK_v1.0 - Registro de decisões humanas"})]})]}),(0,s.jsxs)("button",{onClick:h,className:"flex items-center gap-2 px-4 py-2 bg-slate-100 hover:bg-slate-200 rounded-lg text-slate-700",children:[(0,s.jsx)(d.RefreshCw,{className:`w-4 h-4 ${n?"animate-spin":""}`}),"Atualizar"]})]})}),(0,s.jsx)("div",{className:"bg-amber-50 border border-amber-200 rounded-xl p-4 mb-6",children:(0,s.jsxs)("p",{className:"text-xs text-amber-700",children:[(0,s.jsx)("strong",{children:"Uso interno."})," Estes logs registram apenas metadados de ações. Nenhum conteúdo clínico é armazenado."]})}),(0,s.jsx)("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-4 mb-6",children:(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)(r,{className:"w-4 h-4 text-slate-400"}),(0,s.jsx)("span",{className:"text-sm text-slate-600 font-medium",children:"Filtrar:"}),(0,s.jsxs)("select",{value:x,onChange:e=>m(e.target.value),className:"px-3 py-2 border border-slate-200 rounded-lg text-sm",children:[(0,s.jsx)("option",{value:"",children:"Todas as ações"}),["REPORT_VIEW","SESSION_START","SESSION_FINISH","EVENT_MARK","PATIENT_CREATE","SUPERVISION_CONTEXT_ADD","SUGGESTION_ACCEPT","SUGGESTION_REJECT"].map(e=>(0,s.jsx)("option",{value:e,children:N[e]},e))]}),(0,s.jsxs)("span",{className:"text-xs text-slate-400 ml-auto",children:[e.length," registros"]})]})}),(0,s.jsx)("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden",children:n?(0,s.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,s.jsx)("div",{className:"w-8 h-8 border-4 border-blue-600 border-t-transparent rounded-full animate-spin"})}):0===e.length?(0,s.jsx)("div",{className:"text-center py-12 text-slate-500",children:"Nenhum log encontrado"}):(0,s.jsx)("div",{className:"divide-y divide-slate-100",children:e.map(e=>(0,s.jsx)("div",{className:"p-4 hover:bg-slate-50",children:(0,s.jsxs)("div",{className:"flex items-start gap-4",children:[(0,s.jsx)("span",{className:`inline-flex px-3 py-1 rounded-full text-xs font-medium ${u[e.action]||"bg-slate-100 text-slate-700"}`,children:N[e.action]||e.action}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 text-sm text-slate-600",children:[(0,s.jsx)(i.User,{className:"w-3 h-3"}),(0,s.jsxs)("span",{className:"font-mono text-xs",children:[e.user_id?.slice(0,20),"..."]}),(0,s.jsx)("span",{className:"text-slate-300",children:"|"}),(0,s.jsx)("span",{children:e.entity_type})]}),e.metadata&&Object.keys(e.metadata).length>0&&(0,s.jsx)("div",{className:"mt-1 text-xs text-slate-400 font-mono",children:JSON.stringify(e.metadata)})]}),(0,s.jsxs)("div",{className:"text-right text-xs text-slate-400",children:[(0,s.jsxs)("div",{className:"flex items-center gap-1",children:[(0,s.jsx)(l.Clock,{className:"w-3 h-3"}),new Date(e.created_at).toLocaleDateString("pt-BR")]}),(0,s.jsx)("div",{children:new Date(e.created_at).toLocaleTimeString("pt-BR")})]})]})},e.id))})}),(0,s.jsx)("div",{className:"mt-6 text-center",children:(0,s.jsx)("p",{className:"text-xs text-slate-400",children:"Logs imutáveis. Nenhum dado clínico registrado."})})]})})}e.s(["default",()=>c],74083)}]);