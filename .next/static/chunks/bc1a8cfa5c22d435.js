(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,64081,e=>{"use strict";var s=e.i(43476),t=e.i(71645),a=e.i(22016);let l={1:"Nível 1",2:"Nível 2",3:"Nível 3"};function r(){let[e,r]=(0,t.useState)([]),[n,o]=(0,t.useState)(!0),[i,d]=(0,t.useState)(!1),[c,x]=(0,t.useState)(!1),[m,h]=(0,t.useState)(null),[u,p]=(0,t.useState)({name:"",birth_date:"",diagnosis:"",cid_code:"",support_level:2,school:"",notes:""}),b=(0,t.useCallback)(()=>{o(!0),fetch("/api/aba/learners").then(e=>e.json()).then(e=>{r(e.learners||[]),o(!1)}).catch(()=>o(!1))},[]);(0,t.useEffect)(()=>{b()},[b]);let j=async()=>{if(!u.name.trim()||!u.birth_date)return void h("Nome e data de nascimento são obrigatórios.");x(!0),h(null);try{let e=await fetch("/api/aba/learners",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:u.name.trim(),birth_date:u.birth_date,diagnosis:u.diagnosis.trim()||null,cid_code:u.cid_code.trim()||null,support_level:u.support_level,school:u.school.trim()||null,notes:u.notes.trim()||null})});if(!e.ok){let s=await e.json();h(s.error||"Erro ao cadastrar"),x(!1);return}p({name:"",birth_date:"",diagnosis:"",cid_code:"",support_level:2,school:"",notes:""}),d(!1),x(!1),b()}catch{h("Falha de conexão."),x(!1)}};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"flex justify-center pt-5 md:pt-6 mb-6 md:mb-8 px-4",children:(0,s.jsxs)("nav",{className:"inline-flex items-center gap-1 bg-white border border-slate-200 rounded-full px-3 md:px-5 py-1.5 shadow-sm",children:[(0,s.jsx)(a.default,{href:"/aba",className:"px-3 py-1 text-sm font-medium text-slate-400 hover:text-slate-600 transition-colors",children:"Painel"}),(0,s.jsx)("span",{className:"text-slate-300 text-xs",children:"·"}),(0,s.jsx)(a.default,{href:"/aba/aprendizes",className:"px-3 py-1 text-sm font-medium text-aba-500",children:"Aprendizes"}),(0,s.jsx)("span",{className:"text-slate-300 text-xs",children:"·"}),(0,s.jsx)(a.default,{href:"/aba/sessoes",className:"px-3 py-1 text-sm font-medium text-slate-400 hover:text-slate-600 transition-colors",children:"Sessões"}),(0,s.jsx)("span",{className:"text-slate-300 text-xs hidden sm:inline",children:"·"}),(0,s.jsx)(a.default,{href:"/aba/relatorios",className:"hidden sm:inline px-3 py-1 text-sm font-medium text-slate-400 hover:text-slate-600 transition-colors",children:"Relatórios"})]})}),(0,s.jsxs)("div",{className:"px-4 md:px-8 lg:px-12 xl:px-16",children:[(0,s.jsxs)("header",{className:"mb-6 flex items-start justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-lg font-normal text-slate-400 tracking-tight mb-0",children:"Aprendizes"}),(0,s.jsx)("p",{className:"text-xs text-slate-300 font-light",children:n?"...":`${e.length} ${1===e.length?"aprendiz cadastrado":"aprendizes cadastrados"}`})]}),(0,s.jsx)("button",{onClick:()=>d(!0),className:"px-4 py-2 bg-aba-500 text-white text-sm font-medium rounded-lg hover:bg-aba-600 transition-colors",children:"+ Novo Aprendiz"})]}),n?(0,s.jsx)("div",{className:"space-y-3",children:[1,2,3].map(e=>(0,s.jsx)("div",{className:"animate-pulse bg-slate-50 rounded-xl h-20"},e))}):0===e.length?(0,s.jsxs)("div",{className:"text-center py-16",children:[(0,s.jsx)("div",{className:"w-16 h-16 rounded-full bg-aba-500/10 flex items-center justify-center mx-auto mb-4",children:(0,s.jsx)("svg",{className:"w-8 h-8 text-aba-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0z"})})}),(0,s.jsx)("p",{className:"text-sm text-slate-500 mb-1",children:"Nenhum aprendiz cadastrado"}),(0,s.jsx)("p",{className:"text-xs text-slate-400",children:'Clique em "+ Novo Aprendiz" para começar'})]}):(0,s.jsx)("div",{className:"space-y-2",children:e.map(e=>{let t,r,n,o;return(0,s.jsxs)(a.default,{href:`/aba/aprendizes/${e.id}`,className:"flex items-center justify-between p-4 rounded-xl border border-slate-200 hover:border-aba-500/30 hover:shadow-sm transition-all cursor-pointer",children:[(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)("div",{className:"w-10 h-10 rounded-full bg-aba-500/10 flex items-center justify-center",children:(0,s.jsx)("span",{className:"text-sm font-medium text-aba-500",children:e.name.charAt(0).toUpperCase()})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-sm font-medium text-slate-800",children:e.name}),(0,s.jsxs)("div",{className:"flex items-center gap-2 mt-0.5",children:[(0,s.jsx)("span",{className:"text-xs text-slate-400",children:(t=new Date(e.birth_date),n=(r=new Date).getFullYear()-t.getFullYear(),((o=r.getMonth()-t.getMonth())<0&&(n--,o+=12),n<1)?`${o}m`:n<6?`${n}a ${o}m`:`${n}a`)}),e.cid_code&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("span",{className:"text-slate-300",children:"·"}),(0,s.jsx)("span",{className:"text-xs text-slate-400",children:e.cid_code})]}),(0,s.jsx)("span",{className:"text-slate-300",children:"·"}),(0,s.jsx)("span",{className:"text-xs text-slate-400",children:l[e.support_level]})]})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-4 text-xs text-slate-400",children:[(0,s.jsxs)("span",{children:[e.active_protocols," ",1===e.active_protocols?"protocolo":"protocolos"]}),(0,s.jsx)("span",{className:"text-slate-300",children:"·"}),(0,s.jsxs)("span",{children:[e.total_sessions," ",1===e.total_sessions?"sessão":"sessões"]})]})]},e.id)})})]}),i&&(0,s.jsx)("div",{className:"fixed inset-0 bg-black/30 z-50 flex items-center justify-center p-4",children:(0,s.jsxs)("div",{className:"bg-white rounded-2xl w-full max-w-lg max-h-[90vh] overflow-y-auto shadow-xl",children:[(0,s.jsx)("div",{className:"p-6 border-b border-slate-100",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("h2",{className:"font-serif text-lg font-light text-slate-800",children:"Novo Aprendiz"}),(0,s.jsx)("button",{onClick:()=>{d(!1),h(null)},className:"text-slate-400 hover:text-slate-600",children:(0,s.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),(0,s.jsxs)("div",{className:"p-6 space-y-4",children:[m&&(0,s.jsx)("p",{className:"text-xs text-red-500 bg-red-50 px-3 py-2 rounded-lg",children:m}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-xs font-medium text-slate-600 mb-1",children:"Nome completo *"}),(0,s.jsx)("input",{type:"text",value:u.name,onChange:e=>p({...u,name:e.target.value}),className:"w-full px-3 py-2 border border-slate-200 rounded-lg text-sm focus:outline-none focus:border-aba-500",placeholder:"Nome do aprendiz"})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-xs font-medium text-slate-600 mb-1",children:"Data de nascimento *"}),(0,s.jsx)("input",{type:"date",value:u.birth_date,onChange:e=>p({...u,birth_date:e.target.value}),className:"w-full px-3 py-2 border border-slate-200 rounded-lg text-sm focus:outline-none focus:border-aba-500"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-xs font-medium text-slate-600 mb-1",children:"Nível de suporte"}),(0,s.jsxs)("select",{value:u.support_level,onChange:e=>p({...u,support_level:Number(e.target.value)}),className:"w-full px-3 py-2 border border-slate-200 rounded-lg text-sm focus:outline-none focus:border-aba-500 bg-white",children:[(0,s.jsx)("option",{value:1,children:"Nível 1"}),(0,s.jsx)("option",{value:2,children:"Nível 2"}),(0,s.jsx)("option",{value:3,children:"Nível 3"})]})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-xs font-medium text-slate-600 mb-1",children:"Diagnóstico"}),(0,s.jsx)("input",{type:"text",value:u.diagnosis,onChange:e=>p({...u,diagnosis:e.target.value}),className:"w-full px-3 py-2 border border-slate-200 rounded-lg text-sm focus:outline-none focus:border-aba-500",placeholder:"Ex: TEA"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-xs font-medium text-slate-600 mb-1",children:"CID"}),(0,s.jsx)("input",{type:"text",value:u.cid_code,onChange:e=>p({...u,cid_code:e.target.value}),className:"w-full px-3 py-2 border border-slate-200 rounded-lg text-sm focus:outline-none focus:border-aba-500",placeholder:"Ex: F84.0"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-xs font-medium text-slate-600 mb-1",children:"Escola"}),(0,s.jsx)("input",{type:"text",value:u.school,onChange:e=>p({...u,school:e.target.value}),className:"w-full px-3 py-2 border border-slate-200 rounded-lg text-sm focus:outline-none focus:border-aba-500",placeholder:"Nome da escola"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-xs font-medium text-slate-600 mb-1",children:"Observações"}),(0,s.jsx)("textarea",{value:u.notes,onChange:e=>p({...u,notes:e.target.value}),rows:3,className:"w-full px-3 py-2 border border-slate-200 rounded-lg text-sm focus:outline-none focus:border-aba-500 resize-none",placeholder:"Informações adicionais"})]})]}),(0,s.jsxs)("div",{className:"p-6 border-t border-slate-100 flex justify-end gap-3",children:[(0,s.jsx)("button",{onClick:()=>{d(!1),h(null)},className:"px-4 py-2 text-sm text-slate-500 hover:text-slate-700 transition-colors",children:"Cancelar"}),(0,s.jsx)("button",{onClick:j,disabled:c,className:"px-5 py-2 bg-aba-500 text-white text-sm font-medium rounded-lg hover:bg-aba-600 transition-colors disabled:opacity-50",children:c?"Salvando...":"Cadastrar"})]})]})})]})}e.s(["default",()=>r])}]);