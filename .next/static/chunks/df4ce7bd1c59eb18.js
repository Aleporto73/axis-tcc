(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,33525,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"warnOnce",{enumerable:!0,get:function(){return s}});let s=e=>{}},98183,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var s={assign:function(){return i},searchParamsToUrlQuery:function(){return n},urlQueryToSearchParams:function(){return o}};for(var a in s)Object.defineProperty(r,a,{enumerable:!0,get:s[a]});function n(e){let t={};for(let[r,s]of e.entries()){let e=t[r];void 0===e?t[r]=s:Array.isArray(e)?e.push(s):t[r]=[e,s]}return t}function l(e){return"string"==typeof e?e:("number"!=typeof e||isNaN(e))&&"boolean"!=typeof e?"":String(e)}function o(e){let t=new URLSearchParams;for(let[r,s]of Object.entries(e))if(Array.isArray(s))for(let e of s)t.append(r,l(e));else t.set(r,l(s));return t}function i(e,...t){for(let r of t){for(let t of r.keys())e.delete(t);for(let[t,s]of r.entries())e.append(t,s)}return e}},95057,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var s={formatUrl:function(){return o},formatWithValidation:function(){return d},urlObjectKeys:function(){return i}};for(var a in s)Object.defineProperty(r,a,{enumerable:!0,get:s[a]});let n=e.r(90809)._(e.r(98183)),l=/https?|ftp|gopher|file/;function o(e){let{auth:t,hostname:r}=e,s=e.protocol||"",a=e.pathname||"",o=e.hash||"",i=e.query||"",d=!1;t=t?encodeURIComponent(t).replace(/%3A/i,":")+"@":"",e.host?d=t+e.host:r&&(d=t+(~r.indexOf(":")?`[${r}]`:r),e.port&&(d+=":"+e.port)),i&&"object"==typeof i&&(i=String(n.urlQueryToSearchParams(i)));let c=e.search||i&&`?${i}`||"";return s&&!s.endsWith(":")&&(s+=":"),e.slashes||(!s||l.test(s))&&!1!==d?(d="//"+(d||""),a&&"/"!==a[0]&&(a="/"+a)):d||(d=""),o&&"#"!==o[0]&&(o="#"+o),c&&"?"!==c[0]&&(c="?"+c),a=a.replace(/[?#]/g,encodeURIComponent),c=c.replace("#","%23"),`${s}${d}${a}${c}${o}`}let i=["auth","hash","host","hostname","href","path","pathname","port","protocol","query","search","slashes"];function d(e){return o(e)}},18967,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var s={DecodeError:function(){return b},MiddlewareNotFoundError:function(){return y},MissingStaticPage:function(){return v},NormalizeError:function(){return g},PageNotFoundError:function(){return j},SP:function(){return h},ST:function(){return f},WEB_VITALS:function(){return n},execOnce:function(){return l},getDisplayName:function(){return u},getLocationOrigin:function(){return d},getURL:function(){return c},isAbsoluteUrl:function(){return i},isResSent:function(){return m},loadGetInitialProps:function(){return p},normalizeRepeatedSlashes:function(){return x},stringifyError:function(){return N}};for(var a in s)Object.defineProperty(r,a,{enumerable:!0,get:s[a]});let n=["CLS","FCP","FID","INP","LCP","TTFB"];function l(e){let t,r=!1;return(...s)=>(r||(r=!0,t=e(...s)),t)}let o=/^[a-zA-Z][a-zA-Z\d+\-.]*?:/,i=e=>o.test(e);function d(){let{protocol:e,hostname:t,port:r}=window.location;return`${e}//${t}${r?":"+r:""}`}function c(){let{href:e}=window.location,t=d();return e.substring(t.length)}function u(e){return"string"==typeof e?e:e.displayName||e.name||"Unknown"}function m(e){return e.finished||e.headersSent}function x(e){let t=e.split("?");return t[0].replace(/\\/g,"/").replace(/\/\/+/g,"/")+(t[1]?`?${t.slice(1).join("?")}`:"")}async function p(e,t){let r=t.res||t.ctx&&t.ctx.res;if(!e.getInitialProps)return t.ctx&&t.Component?{pageProps:await p(t.Component,t.ctx)}:{};let s=await e.getInitialProps(t);if(r&&m(r))return s;if(!s)throw Object.defineProperty(Error(`"${u(e)}.getInitialProps()" should resolve to an object. But found "${s}" instead.`),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0});return s}let h="u">typeof performance,f=h&&["mark","measure","getEntriesByName"].every(e=>"function"==typeof performance[e]);class b extends Error{}class g extends Error{}class j extends Error{constructor(e){super(),this.code="ENOENT",this.name="PageNotFoundError",this.message=`Cannot find module for page: ${e}`}}class v extends Error{constructor(e,t){super(),this.message=`Failed to load static file for page: ${e} ${t}`}}class y extends Error{constructor(){super(),this.code="ENOENT",this.message="Cannot find the middleware module"}}function N(e){return JSON.stringify({message:e.message,stack:e.stack})}},73668,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"isLocalURL",{enumerable:!0,get:function(){return n}});let s=e.r(18967),a=e.r(52817);function n(e){if(!(0,s.isAbsoluteUrl)(e))return!0;try{let t=(0,s.getLocationOrigin)(),r=new URL(e,t);return r.origin===t&&(0,a.hasBasePath)(r.pathname)}catch(e){return!1}}},18581,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"useMergedRef",{enumerable:!0,get:function(){return a}});let s=e.r(71645);function a(e,t){let r=(0,s.useRef)(null),a=(0,s.useRef)(null);return(0,s.useCallback)(s=>{if(null===s){let e=r.current;e&&(r.current=null,e());let t=a.current;t&&(a.current=null,t())}else e&&(r.current=n(e,s)),t&&(a.current=n(t,s))},[e,t])}function n(e,t){if("function"!=typeof e)return e.current=t,()=>{e.current=null};{let r=e(t);return"function"==typeof r?r:()=>e(null)}}("function"==typeof r.default||"object"==typeof r.default&&null!==r.default)&&void 0===r.default.__esModule&&(Object.defineProperty(r.default,"__esModule",{value:!0}),Object.assign(r.default,r),t.exports=r.default)},84508,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"errorOnce",{enumerable:!0,get:function(){return s}});let s=e=>{}},22016,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var s={default:function(){return b},useLinkStatus:function(){return j}};for(var a in s)Object.defineProperty(r,a,{enumerable:!0,get:s[a]});let n=e.r(90809),l=e.r(43476),o=n._(e.r(71645)),i=e.r(95057),d=e.r(8372),c=e.r(18581),u=e.r(18967),m=e.r(5550);e.r(33525);let x=e.r(91949),p=e.r(73668),h=e.r(9396);function f(e){return"string"==typeof e?e:(0,i.formatUrl)(e)}function b(t){var r;let s,a,n,[i,b]=(0,o.useOptimistic)(x.IDLE_LINK_STATUS),j=(0,o.useRef)(null),{href:v,as:y,children:N,prefetch:w=null,passHref:k,replace:E,shallow:_,scroll:S,onClick:C,onMouseEnter:O,onTouchStart:R,legacyBehavior:T=!1,onNavigate:L,ref:M,unstable_dynamicOnHover:P,...F}=t;s=N,T&&("string"==typeof s||"number"==typeof s)&&(s=(0,l.jsx)("a",{children:s}));let A=o.default.useContext(d.AppRouterContext),D=!1!==w,B=!1!==w?null===(r=w)||"auto"===r?h.FetchStrategy.PPR:h.FetchStrategy.Full:h.FetchStrategy.PPR,{href:V,as:z}=o.default.useMemo(()=>{let e=f(v);return{href:e,as:y?f(y):e}},[v,y]);if(T){if(s?.$$typeof===Symbol.for("react.lazy"))throw Object.defineProperty(Error("`<Link legacyBehavior>` received a direct child that is either a Server Component, or JSX that was loaded with React.lazy(). This is not supported. Either remove legacyBehavior, or make the direct child a Client Component that renders the Link's `<a>` tag."),"__NEXT_ERROR_CODE",{value:"E863",enumerable:!1,configurable:!0});a=o.default.Children.only(s)}let $=T?a&&"object"==typeof a&&a.ref:M,I=o.default.useCallback(e=>(null!==A&&(j.current=(0,x.mountLinkInstance)(e,V,A,B,D,b)),()=>{j.current&&((0,x.unmountLinkForCurrentNavigation)(j.current),j.current=null),(0,x.unmountPrefetchableInstance)(e)}),[D,V,A,B,b]),U={ref:(0,c.useMergedRef)(I,$),onClick(t){T||"function"!=typeof C||C(t),T&&a.props&&"function"==typeof a.props.onClick&&a.props.onClick(t),!A||t.defaultPrevented||function(t,r,s,a,n,l,i){if("u">typeof window){let d,{nodeName:c}=t.currentTarget;if("A"===c.toUpperCase()&&((d=t.currentTarget.getAttribute("target"))&&"_self"!==d||t.metaKey||t.ctrlKey||t.shiftKey||t.altKey||t.nativeEvent&&2===t.nativeEvent.which)||t.currentTarget.hasAttribute("download"))return;if(!(0,p.isLocalURL)(r)){n&&(t.preventDefault(),location.replace(r));return}if(t.preventDefault(),i){let e=!1;if(i({preventDefault:()=>{e=!0}}),e)return}let{dispatchNavigateAction:u}=e.r(99781);o.default.startTransition(()=>{u(s||r,n?"replace":"push",l??!0,a.current)})}}(t,V,z,j,E,S,L)},onMouseEnter(e){T||"function"!=typeof O||O(e),T&&a.props&&"function"==typeof a.props.onMouseEnter&&a.props.onMouseEnter(e),A&&D&&(0,x.onNavigationIntent)(e.currentTarget,!0===P)},onTouchStart:function(e){T||"function"!=typeof R||R(e),T&&a.props&&"function"==typeof a.props.onTouchStart&&a.props.onTouchStart(e),A&&D&&(0,x.onNavigationIntent)(e.currentTarget,!0===P)}};return(0,u.isAbsoluteUrl)(z)?U.href=z:T&&!k&&("a"!==a.type||"href"in a.props)||(U.href=(0,m.addBasePath)(z)),n=T?o.default.cloneElement(a,U):(0,l.jsx)("a",{...F,...U,children:s}),(0,l.jsx)(g.Provider,{value:i,children:n})}e.r(84508);let g=(0,o.createContext)(x.IDLE_LINK_STATUS),j=()=>(0,o.useContext)(g);("function"==typeof r.default||"object"==typeof r.default&&null!==r.default)&&void 0===r.default.__esModule&&(Object.defineProperty(r.default,"__esModule",{value:!0}),Object.assign(r.default,r),t.exports=r.default)},82437,e=>{"use strict";var t=e.i(43476),r=e.i(22016),s=e.i(18566),a=e.i(34880);function n(){let e=(0,s.usePathname)(),n=t=>e===t||e.startsWith(t+"/"),l=[{href:"/dashboard",label:"Dashboard",icon:(0,t.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"})})},{href:"/sessoes",label:"Sessões",icon:(0,t.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})},{href:"/pacientes",label:"Pacientes",icon:(0,t.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})},{href:"/sugestoes",label:"Sugestões",icon:(0,t.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})},{href:"/configuracoes",label:"Configurações",icon:(0,t.jsxs)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]})}];return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("aside",{className:"hidden md:flex w-20 bg-white border-r border-slate-100 min-h-screen flex-col items-center py-8 fixed left-0 top-0 z-40",children:[(0,t.jsx)(r.default,{href:"/dashboard",className:"mb-12",children:(0,t.jsx)("div",{className:"w-10 h-10 rounded-full border border-slate-200 flex items-center justify-center hover:border-[#FC608F]/40 transition-colors overflow-hidden bg-white",children:(0,t.jsx)("img",{src:"/favicon_axis.png",alt:"AXIS",width:28,height:28,style:{objectFit:"contain"}})})}),(0,t.jsx)("nav",{className:"flex flex-col items-center gap-4 flex-1",children:l.slice(0,4).map(e=>(0,t.jsxs)(r.default,{href:e.href,title:e.label,className:`relative flex items-center justify-center w-10 h-10 rounded-xl transition-all duration-200 ${n(e.href)?"text-[#FC608F] bg-[#FC608F]/10 shadow-sm shadow-[#FC608F]/10":"text-slate-400 hover:text-slate-600 hover:bg-slate-50"}`,children:[n(e.href)&&(0,t.jsx)("div",{className:"absolute left-0 top-1/2 -translate-y-1/2 -translate-x-[17px] w-[3px] h-5 bg-[#FC608F] rounded-r-full"}),e.icon]},e.href))}),(0,t.jsxs)("div",{className:"flex flex-col items-center gap-4",children:[(0,t.jsxs)(r.default,{href:"/configuracoes",title:"Configurações",className:`relative flex items-center justify-center w-10 h-10 rounded-xl transition-all duration-200 ${n("/configuracoes")?"text-[#FC608F] bg-[#FC608F]/10 shadow-sm shadow-[#FC608F]/10":"text-slate-400 hover:text-slate-600 hover:bg-slate-50"}`,children:[n("/configuracoes")&&(0,t.jsx)("div",{className:"absolute left-0 top-1/2 -translate-y-1/2 -translate-x-[17px] w-[3px] h-5 bg-[#FC608F] rounded-r-full"}),l[4].icon]}),(0,t.jsx)(a.UserButton,{afterSignOutUrl:"/",appearance:{elements:{avatarBox:"w-9 h-9"}}})]})]}),(0,t.jsx)("nav",{className:"md:hidden fixed bottom-0 left-0 right-0 bg-white border-t border-slate-100 z-40 px-2 py-2",children:(0,t.jsxs)("div",{className:"flex justify-around items-center",children:[l.slice(0,4).map(e=>(0,t.jsxs)(r.default,{href:e.href,className:`relative p-3 rounded-xl transition-colors ${n(e.href)?"text-[#FC608F]":"text-slate-400"}`,children:[n(e.href)&&(0,t.jsx)("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 -translate-y-1 w-5 h-[3px] bg-[#FC608F] rounded-b-full"}),e.icon]},e.href)),(0,t.jsx)(a.UserButton,{afterSignOutUrl:"/",appearance:{elements:{avatarBox:"w-8 h-8"}}})]})})]})}e.s(["default",()=>n])},78583,e=>{"use strict";let t=(0,e.i(75254).default)("file-text",[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);e.s(["FileText",()=>t],78583)},21218,e=>{"use strict";let t=(0,e.i(75254).default)("activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);e.s(["Activity",()=>t],21218)},3116,e=>{"use strict";let t=(0,e.i(75254).default)("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);e.s(["Clock",()=>t],3116)},87316,e=>{"use strict";let t=(0,e.i(75254).default)("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);e.s(["Calendar",()=>t],87316)},34130,e=>{"use strict";var t=e.i(43476),r=e.i(71645),s=e.i(38703),a=e.i(18566),n=e.i(22016),l=e.i(82437),o=e.i(78583),i=e.i(3116),d=e.i(87316),c=e.i(21218),u=e.i(37727);let m=(0,e.i(75254).default)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);function x({sessionId:e,onClose:s}){let[a,n]=(0,r.useState)(null),[l,x]=(0,r.useState)(!0),[p,h]=(0,r.useState)("");(0,r.useEffect)(()=>{f()},[]);let f=async()=>{try{x(!0);let t=await fetch(`/api/sessions/${e}/report`);if(t.ok){let r=await t.json();n(r),fetch("/api/audit",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"REPORT_VIEW",entity_type:"report",entity_id:e,metadata:{report_type:"session"}})})}else h("Erro ao carregar dados")}catch(e){h("Erro ao carregar dados")}finally{x(!1)}};return l?(0,t.jsx)("div",{className:"bg-white rounded-lg p-8 shadow-sm border border-blue-200 mt-6",children:(0,t.jsx)("div",{className:"flex items-center justify-center py-8",children:(0,t.jsx)("div",{className:"w-8 h-8 border-4 border-blue-600 border-t-transparent rounded-full animate-spin"})})}):p||!a?(0,t.jsx)("div",{className:"bg-white rounded-lg p-6 shadow-sm border border-red-200 mt-6",children:(0,t.jsx)("p",{className:"text-red-600",children:p||"Erro ao carregar dados"})}):(0,t.jsxs)("div",{className:"bg-gradient-to-br from-indigo-50 to-white rounded-xl p-6 shadow-sm border border-indigo-100 mt-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"w-10 h-10 bg-indigo-600 rounded-lg flex items-center justify-center",children:(0,t.jsx)(o.FileText,{className:"w-5 h-5 text-white"})}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("h2",{className:"text-xl font-semibold text-neutral-900",children:["Relatorio da Sessao #",a.session_number]}),(0,t.jsx)("p",{className:"text-sm text-neutral-500",children:"Registro tecnico do processo observado"})]})]}),(0,t.jsx)("button",{onClick:s,className:"p-2 hover:bg-neutral-100 rounded-lg",children:(0,t.jsx)(u.X,{className:"w-5 h-5 text-neutral-400"})})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[(0,t.jsxs)("div",{className:"bg-white rounded-lg p-4 border border-neutral-200",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,t.jsx)(d.Calendar,{className:"w-4 h-4 text-indigo-500"}),(0,t.jsx)("span",{className:"text-xs font-medium text-neutral-500 uppercase",children:"Data"})]}),(0,t.jsx)("p",{className:"text-lg font-semibold text-neutral-900",children:new Date(a.date).toLocaleDateString("pt-BR")})]}),(0,t.jsxs)("div",{className:"bg-white rounded-lg p-4 border border-neutral-200",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,t.jsx)(i.Clock,{className:"w-4 h-4 text-indigo-500"}),(0,t.jsx)("span",{className:"text-xs font-medium text-neutral-500 uppercase",children:"Duracao"})]}),(0,t.jsx)("p",{className:"text-lg font-semibold text-neutral-900",children:a.duration?`${a.duration} min`:"-"})]}),(0,t.jsxs)("div",{className:"bg-white rounded-lg p-4 border border-neutral-200",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,t.jsx)(c.Activity,{className:"w-4 h-4 text-indigo-500"}),(0,t.jsx)("span",{className:"text-xs font-medium text-neutral-500 uppercase",children:"Eventos"})]}),(0,t.jsx)("p",{className:"text-lg font-semibold text-neutral-900",children:a.total_events})]})]}),a.events.length>0&&(0,t.jsxs)("div",{className:"bg-white rounded-lg p-5 border border-neutral-200 mb-6",children:[(0,t.jsx)("h3",{className:"text-sm font-semibold text-neutral-700 mb-4 uppercase tracking-wide",children:"Eventos Registrados"}),(0,t.jsx)("div",{className:"flex flex-wrap gap-2",children:a.events.map((e,r)=>{var s;return(0,t.jsxs)("span",{className:`px-3 py-2 rounded-lg text-sm font-medium ${{AVOIDANCE_OBSERVED:"bg-red-100 text-red-700",CONFRONTATION_OBSERVED:"bg-amber-100 text-amber-700",ADJUSTMENT_OBSERVED:"bg-blue-100 text-blue-700",RECOVERY_OBSERVED:"bg-emerald-100 text-emerald-700"}[e.type]||"bg-neutral-100 text-neutral-700"}`,children:[{AVOIDANCE_OBSERVED:"Evitou",CONFRONTATION_OBSERVED:"Enfrentou",ADJUSTMENT_OBSERVED:"Ajustou",RECOVERY_OBSERVED:"Recuperou"}[s=e.type]||s,": ",e.count]},r)})})]}),a.cso&&(0,t.jsxs)("div",{className:"bg-white rounded-lg p-5 border border-neutral-200 mb-6",children:[(0,t.jsx)("h3",{className:"text-sm font-semibold text-neutral-700 mb-4 uppercase tracking-wide",children:"Indicadores de Processo (CSO)"}),(0,t.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-xs text-neutral-500 mb-1",children:"Ativacao"}),(0,t.jsx)("p",{className:"text-lg font-semibold text-neutral-900",children:null!==a.cso.activation_level?a.cso.activation_level.toFixed(1):"-"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-xs text-neutral-500 mb-1",children:"Rigidez Cognitiva"}),(0,t.jsx)("p",{className:"text-lg font-semibold text-neutral-900",children:null!==a.cso.cognitive_rigidity?a.cso.cognitive_rigidity.toFixed(1):"-"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-xs text-neutral-500 mb-1",children:"Carga Emocional"}),(0,t.jsx)("p",{className:"text-lg font-semibold text-neutral-900",children:null!==a.cso.emotional_load?a.cso.emotional_load.toFixed(1):"-"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-xs text-neutral-500 mb-1",children:"Tendencia"}),(0,t.jsx)("p",{className:"text-lg font-semibold text-neutral-900",children:"improving"===a.cso.flex_trend?"↑ Melhora":"declining"===a.cso.flex_trend?"↓ Declinio":"→ Estavel"})]})]})]}),!a.has_transcription&&(0,t.jsxs)("div",{className:"bg-amber-50 rounded-lg p-4 border border-amber-200 flex items-center gap-3",children:[(0,t.jsx)(m,{className:"w-5 h-5 text-amber-600"}),(0,t.jsx)("p",{className:"text-sm text-amber-700",children:"Nenhuma transcricao disponivel para esta sessao."})]}),(0,t.jsx)("div",{className:"mt-4 pt-4 border-t border-neutral-200",children:(0,t.jsx)("p",{className:"text-xs text-neutral-400 text-center",children:"Este relatório descreve eventos pontuais da sessão. Não contém inferência diagnóstica ou interpretação psicológica."})})]})}function p({params:e}){let{id:o}=(0,r.use)(e),i=(0,a.useRouter)(),{isLoaded:d,userId:c}=(0,s.useAuth)(),[u,m]=(0,r.useState)(null),[p,h]=(0,r.useState)(null),[f,b]=(0,r.useState)(null),[g,j]=(0,r.useState)(!0),[v,y]=(0,r.useState)(!1),[N,w]=(0,r.useState)(!1),[k,E]=(0,r.useState)(!1),[_,S]=(0,r.useState)(""),[C,O]=(0,r.useState)(!1),[R,T]=(0,r.useState)(0),[L,M]=(0,r.useState)([]),[P,F]=(0,r.useState)(!1),[A,D]=(0,r.useState)(""),[B,V]=(0,r.useState)(.5),[z,$]=(0,r.useState)(""),[I,U]=(0,r.useState)(!1),[W,J]=(0,r.useState)(!1),[H,K]=(0,r.useState)(null),[X,Y]=(0,r.useState)(null),q=(0,r.useRef)(null),Q=(0,r.useRef)([]),G=(0,r.useRef)(null);(0,r.useEffect)(()=>{d&&c&&Z()},[d,c,o]),(0,r.useEffect)(()=>()=>{G.current&&clearInterval(G.current)},[]);let Z=async()=>{try{j(!0);let e=await fetch(`/api/sessions/${o}`);if(e.ok){let t=await e.json();m(t.session),t.transcript&&h(t.transcript)}else i.push("/sessoes")}catch(e){console.error(e)}finally{j(!1)}},ee=async()=>{try{y(!0);let e=await fetch(`/api/sessions/${o}/finish`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({notes:_})});if(e.ok){let t=await e.json();t.pipeline&&K(t.pipeline),Z()}}catch(e){console.error(e)}finally{y(!1)}},et=async e=>{try{w(!0),Y({type:"status",message:"Enviando audio...",percent:0});let t=await fetch("/api/transcribe",{method:"POST",body:e}),r=t.headers.get("content-type")||"";if(r.includes("application/json")){if(t.ok){let e=await t.json();h(e.transcript),Y(null)}else{let e=await t.json();alert(e.error||"Erro"),Y(null)}return}if(r.includes("text/event-stream")){let e=t.body?.getReader(),r=new TextDecoder;if(!e){alert("Erro ao ler resposta"),Y(null);return}let s="";for(;;){let{done:t,value:a}=await e.read();if(t)break;let n=(s+=r.decode(a,{stream:!0})).split("\n\n");for(let e of(s=n.pop()||"",n))if(e.startsWith("data: "))try{let t=JSON.parse(e.slice(6));("progress"===t.type||"status"===t.type)&&Y(t),"done"===t.type&&t.transcript&&(h(t.transcript),Y(null)),"error"===t.type&&(alert(t.message||"Erro na transcricao"),Y(null))}catch(e){console.error("Erro ao parsear progresso:",e)}}return}alert("Resposta inesperada do servidor"),Y(null)}catch(e){console.error(e),alert("Erro ao enviar audio"),Y(null)}finally{w(!1)}},er=async e=>{let t=e.target.files?.[0];if(!t||!u)return;let r=new FormData;r.append("audio",t),r.append("session_id",u.id),r.append("patient_id",u.patient_id),await et(r)},es=async()=>{try{let e=await navigator.mediaDevices.getUserMedia({audio:!0}),t=new MediaRecorder(e,{mimeType:"audio/webm"});q.current=t,Q.current=[],t.ondataavailable=e=>{e.data.size>0&&Q.current.push(e.data)},t.onstop=async()=>{e.getTracks().forEach(e=>e.stop());let t=new Blob(Q.current,{type:"audio/webm"});await ea(t)},t.start(),O(!0),T(0),G.current=setInterval(()=>T(e=>e+1),1e3)}catch(e){alert("Erro ao acessar microfone")}},ea=async e=>{if(!u)return;let t=new File([e],"gravacao.webm",{type:"audio/webm"}),r=new FormData;r.append("audio",t),r.append("session_id",u.id),r.append("patient_id",u.patient_id),await et(r)},en=async()=>{if(p&&u)try{E(!0);let e=await fetch("/api/analyze-tcc",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({transcript_id:p.id,text:p.text,session_id:u.id,patient_id:u.patient_id})});if(e.ok){let t=await e.json();b(t.analysis)}}catch(e){console.error(e)}finally{E(!1)}},el=async()=>{if(u)try{U(!0),(await fetch("/api/events/create",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({patient_id:u.patient_id,event_type:A,payload:{intensity:B,note:z,context:"session"},related_entity_id:u.id})})).ok&&(M(e=>[...e,{type:A,intensity:B,note:z,created_at:new Date().toISOString()}]),F(!1))}catch(e){console.error(e)}finally{U(!1)}},eo=e=>{switch(e){case"AVOIDANCE_OBSERVED":return"Evitou";case"CONFRONTATION_OBSERVED":return"Enfrentou";case"ADJUSTMENT_OBSERVED":return"Ajustou";case"RECOVERY_OBSERVED":return"Recuperou";default:return e}};return!d||g?(0,t.jsxs)("div",{className:"min-h-screen bg-white",children:[(0,t.jsx)(l.default,{}),(0,t.jsx)("main",{className:"md:ml-20 min-h-screen flex items-center justify-center",children:(0,t.jsx)("div",{className:"w-6 h-6 border-2 border-sky-500 border-t-transparent rounded-full animate-spin"})})]}):u?(0,t.jsxs)("div",{className:"min-h-screen bg-white",children:[(0,t.jsx)(l.default,{}),(0,t.jsx)("main",{className:"md:ml-20 min-h-screen pb-20 md:pb-8",children:(0,t.jsx)("div",{className:"px-4 md:px-8 lg:px-12 xl:px-16 pt-6",children:(0,t.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,t.jsxs)(n.default,{href:"/sessoes",className:"inline-flex items-center gap-2 text-slate-500 hover:text-sky-600 transition-colors mb-6 text-sm",children:[(0,t.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Voltar"]}),(0,t.jsxs)("header",{className:"flex items-start justify-between mb-8",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("h1",{className:"text-lg font-normal text-slate-400 tracking-tight mb-0",children:["Sessão #",u.session_number]}),(0,t.jsx)("p",{className:"text-base text-slate-400 italic font-light",children:u.patient_name})]}),(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[u.google_meet_link&&(0,t.jsxs)("a",{href:u.google_meet_link,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 px-4 py-2 bg-emerald-50 text-emerald-600 border border-emerald-200 rounded-lg hover:bg-emerald-100 transition-colors text-sm font-medium",children:[(0,t.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"})}),"Entrar no Meet"]}),"finalizada"===u.status&&(0,t.jsxs)("button",{onClick:()=>J(!W),className:"flex items-center gap-2 px-4 py-2 bg-slate-100 text-slate-700 rounded-lg hover:bg-slate-200 transition-colors text-sm font-medium",children:[(0,t.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Relatório"]}),(0,t.jsx)("span",{className:`px-3 py-1.5 rounded-lg text-sm font-medium border ${(e=>{switch(e){case"em_andamento":return"text-sky-600 bg-sky-50 border-sky-200";case"agendada":default:return"text-slate-600 bg-slate-50 border-slate-200";case"finalizada":return"text-slate-500 bg-slate-50 border-slate-200"}})(u.status)}`,children:(e=>{switch(e){case"em_andamento":return"Em andamento";case"agendada":return"Agendada";case"finalizada":return"Finalizada";default:return e}})(u.status)})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-3 gap-4 mb-8 pb-8 border-b border-slate-100",children:[(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("p",{className:"text-xs text-slate-400 uppercase tracking-wider mb-1",children:"Paciente"}),(0,t.jsx)("p",{className:"text-slate-900 font-medium",children:u.patient_name})]}),(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("p",{className:"text-xs text-slate-400 uppercase tracking-wider mb-1",children:"Data"}),(0,t.jsx)("p",{className:"text-slate-900 font-medium",children:new Date(u.scheduled_at).toLocaleDateString("pt-BR")})]}),(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("p",{className:"text-xs text-slate-400 uppercase tracking-wider mb-1",children:"Duração"}),(0,t.jsx)("p",{className:"text-slate-900 font-medium",children:u.duration_minutes?`${u.duration_minutes} min`:"agendada"===u.status?"Aguardando":"Em andamento"})]})]}),W&&(0,t.jsx)(x,{sessionId:o,onClose:()=>J(!1)}),"em_andamento"===u.status&&(0,t.jsxs)("section",{className:"mb-8 pb-8 border-b border-slate-100",children:[(0,t.jsx)("h2",{className:"text-sm font-medium text-slate-500 uppercase tracking-wide mb-2",children:"Micro-eventos de Flexibilidade"}),(0,t.jsx)("p",{className:"text-sm text-slate-400 mb-4",children:"Marque comportamentos observados durante a sessão"}),(0,t.jsx)("div",{className:"grid grid-cols-4 gap-3 mb-4",children:[{type:"AVOIDANCE_OBSERVED",label:"Evitou",color:"amber"},{type:"CONFRONTATION_OBSERVED",label:"Enfrentou",color:"emerald"},{type:"ADJUSTMENT_OBSERVED",label:"Ajustou",color:"sky"},{type:"RECOVERY_OBSERVED",label:"Recuperou",color:"violet"}].map(e=>(0,t.jsx)("button",{onClick:()=>{D(e.type),V(.5),$(""),F(!0)},className:`flex flex-col items-center gap-2 p-4 rounded-lg border-2 border-${e.color}-200 bg-${e.color}-50 hover:bg-${e.color}-100 transition-colors`,children:(0,t.jsx)("span",{className:`text-sm font-medium text-${e.color}-700`,children:e.label})},e.type))}),L.length>0&&(0,t.jsx)("div",{className:"flex flex-wrap gap-2",children:L.map((e,r)=>(0,t.jsxs)("span",{className:`inline-flex items-center gap-1 px-3 py-1 rounded-full text-xs font-medium border ${(e=>{switch(e){case"AVOIDANCE_OBSERVED":return"bg-amber-50 text-amber-700 border-amber-200";case"CONFRONTATION_OBSERVED":return"bg-emerald-50 text-emerald-700 border-emerald-200";case"ADJUSTMENT_OBSERVED":return"bg-sky-50 text-sky-700 border-sky-200";case"RECOVERY_OBSERVED":return"bg-violet-50 text-violet-700 border-violet-200";default:return"bg-slate-50 text-slate-700 border-slate-200"}})(e.type)}`,children:[eo(e.type)," (",(10*e.intensity).toFixed(0),"/10)",e.note&&(0,t.jsxs)("span",{className:"text-slate-400",children:["- ",e.note]})]},r))})]}),(0,t.jsxs)("section",{className:"mb-8 pb-8 border-b border-slate-100",children:[(0,t.jsx)("h2",{className:"text-sm font-medium text-slate-500 uppercase tracking-wide mb-4",children:"Transcrição"}),X&&(0,t.jsxs)("div",{className:"mb-4 p-4 bg-sky-50 rounded-lg border border-sky-200",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,t.jsx)("p",{className:"text-sm font-medium text-sky-800",children:X.message}),void 0!==X.percent&&(0,t.jsxs)("span",{className:"text-sm font-semibold text-sky-700",children:[X.percent,"%"]})]}),(0,t.jsx)("div",{className:"w-full bg-sky-100 rounded-full h-2.5",children:(0,t.jsx)("div",{className:"bg-sky-500 h-2.5 rounded-full transition-all duration-500",style:{width:`${X.percent||0}%`}})}),void 0!==X.minutesLeft&&X.minutesLeft>0&&(0,t.jsxs)("p",{className:"text-xs text-sky-600 mt-2",children:["Tempo estimado: ~",X.minutesLeft," min restante",X.minutesLeft>1?"s":""]})]}),p?(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"bg-slate-50 rounded-lg p-4 border border-slate-200 max-h-48 overflow-y-auto mb-4",children:(0,t.jsx)("p",{className:"whitespace-pre-wrap text-sm text-slate-700",children:p.text})}),(0,t.jsxs)("p",{className:"text-xs text-slate-400 mb-4",children:["Transcrito em ",new Date(p.created_at).toLocaleString("pt-BR")]}),!f&&(0,t.jsxs)("button",{onClick:en,disabled:k,className:"flex items-center gap-2 px-5 py-2.5 bg-violet-500 text-white rounded-lg hover:bg-violet-600 disabled:opacity-50 transition-colors text-sm font-medium",children:[k?(0,t.jsx)("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}):(0,t.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})}),k?"Analisando...":"Analisar TCC"]})]}):!X&&(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-slate-400 italic mb-4 text-sm",children:"Nenhuma transcrição"}),(0,t.jsxs)("div",{className:"flex gap-3",children:[C?(0,t.jsxs)("button",{onClick:()=>{q.current&&C&&(q.current.stop(),O(!1),G.current&&clearInterval(G.current))},className:"flex items-center gap-2 px-5 py-2.5 bg-slate-800 text-white rounded-lg animate-pulse text-sm font-medium",children:[(0,t.jsx)("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("rect",{x:"6",y:"6",width:"12",height:"12"})}),"Parar (",`${Math.floor(R/60).toString().padStart(2,"0")}:${(R%60).toString().padStart(2,"0")}`,")"]}):(0,t.jsxs)("button",{onClick:es,disabled:N,className:"flex items-center gap-2 px-5 py-2.5 bg-rose-50 text-rose-600 border border-rose-200 rounded-lg hover:bg-rose-100 disabled:opacity-50 transition-colors text-sm font-medium",children:[(0,t.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 11a7 7 0 01-7 7m0 0a7 7 0 01-7-7m7 7v4m0 0H8m4 0h4m-4-8a3 3 0 01-3-3V5a3 3 0 116 0v6a3 3 0 01-3 3z"})}),"Gravar"]}),(0,t.jsxs)("label",{className:`flex items-center gap-2 px-5 py-2.5 bg-sky-50 text-sky-600 border border-sky-200 rounded-lg cursor-pointer hover:bg-sky-100 transition-colors text-sm font-medium ${N?"opacity-50":""}`,children:[N?(0,t.jsx)("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}):(0,t.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"})}),N?"Enviando...":"Upload",(0,t.jsx)("input",{type:"file",accept:"audio/*",onChange:er,disabled:N,className:"hidden"})]})]})]})]}),f&&(0,t.jsxs)("section",{className:"mb-8 pb-8 border-b border-slate-100",children:[(0,t.jsx)("h2",{className:"text-sm font-medium text-slate-500 uppercase tracking-wide mb-4",children:"Análise TCC"}),(0,t.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,t.jsxs)("div",{className:"bg-sky-50 rounded-lg p-4 border border-sky-200",children:[(0,t.jsx)("h3",{className:"font-medium text-sky-800 mb-3 text-sm",children:"Fatos"}),(0,t.jsx)("ul",{className:"space-y-2",children:f.fatos.map((e,r)=>(0,t.jsx)("li",{className:"text-sm bg-white rounded p-2 border border-sky-100",children:e},r))})]}),(0,t.jsxs)("div",{className:"bg-amber-50 rounded-lg p-4 border border-amber-200",children:[(0,t.jsx)("h3",{className:"font-medium text-amber-800 mb-3 text-sm",children:"Pensamentos"}),(0,t.jsx)("ul",{className:"space-y-2",children:f.pensamentos.map((e,r)=>(0,t.jsx)("li",{className:"text-sm bg-white rounded p-2 border border-amber-100",children:e},r))})]}),(0,t.jsxs)("div",{className:"bg-rose-50 rounded-lg p-4 border border-rose-200",children:[(0,t.jsx)("h3",{className:"font-medium text-rose-800 mb-3 text-sm",children:"Emoções"}),(0,t.jsx)("ul",{className:"space-y-2",children:f.emocoes.map((e,r)=>(0,t.jsx)("li",{className:"text-sm bg-white rounded p-2 border border-rose-100",children:e},r))})]})]})]}),H&&(0,t.jsxs)("section",{className:"mb-8 pb-8 border-b border-slate-100",children:[(0,t.jsx)("h2",{className:"text-sm font-medium text-slate-500 uppercase tracking-wide mb-4",children:"Pipeline TCC Processado"}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[H.event_created?(0,t.jsx)("svg",{className:"w-4 h-4 text-emerald-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}):(0,t.jsx)("span",{className:"w-4 h-4 rounded-full bg-slate-200"}),(0,t.jsx)("span",{className:"text-slate-600",children:"Evento SESSION_END criado"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[H.cso_updated?(0,t.jsx)("svg",{className:"w-4 h-4 text-emerald-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}):(0,t.jsx)("span",{className:"w-4 h-4 rounded-full bg-slate-200"}),(0,t.jsx)("span",{className:"text-slate-600",children:"CSO atualizado"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[H.suggestion_generated?(0,t.jsx)("svg",{className:"w-4 h-4 text-emerald-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}):(0,t.jsx)("span",{className:"w-4 h-4 rounded-full bg-slate-200"}),(0,t.jsx)("span",{className:"text-slate-600",children:"Sugestão gerada"})]}),(0,t.jsx)("div",{className:"flex items-center gap-2",children:(0,t.jsxs)("span",{className:`px-2 py-1 rounded text-xs font-medium ${"up"===H.flex_trend?"bg-emerald-50 text-emerald-700":"down"===H.flex_trend?"bg-amber-50 text-amber-700":"bg-slate-50 text-slate-600"}`,children:["Flexibilidade: ",H.flex_trend]})})]}),H.micro_events.confrontations+H.micro_events.avoidances+H.micro_events.adjustments+H.micro_events.recoveries>0&&(0,t.jsxs)("div",{className:"mt-4 flex gap-3 text-xs",children:[(0,t.jsxs)("span",{className:"px-2 py-1 bg-emerald-50 rounded border border-emerald-200 text-emerald-700",children:["Enfrentou: ",H.micro_events.confrontations]}),(0,t.jsxs)("span",{className:"px-2 py-1 bg-amber-50 rounded border border-amber-200 text-amber-700",children:["Evitou: ",H.micro_events.avoidances]}),(0,t.jsxs)("span",{className:"px-2 py-1 bg-sky-50 rounded border border-sky-200 text-sky-700",children:["Ajustou: ",H.micro_events.adjustments]}),(0,t.jsxs)("span",{className:"px-2 py-1 bg-violet-50 rounded border border-violet-200 text-violet-700",children:["Recuperou: ",H.micro_events.recoveries]})]})]}),"em_andamento"===u.status&&(0,t.jsxs)("section",{children:[(0,t.jsx)("h2",{className:"text-sm font-medium text-slate-500 uppercase tracking-wide mb-4",children:"Finalizar Sessão"}),(0,t.jsx)("textarea",{value:_,onChange:e=>S(e.target.value),placeholder:"Observações finais...",className:"w-full px-4 py-3 border border-slate-200 rounded-lg mb-4 h-32 resize-none text-sm focus:outline-none focus:ring-2 focus:ring-sky-500 focus:border-transparent"}),(0,t.jsxs)("button",{onClick:ee,disabled:v,className:"flex items-center gap-2 px-5 py-2.5 bg-emerald-50 text-emerald-600 border border-emerald-200 rounded-lg hover:bg-emerald-100 disabled:opacity-50 transition-colors text-sm font-medium",children:[v?(0,t.jsx)("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}):(0,t.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),v?"Finalizando...":"Finalizar Sessão"]})]})]})})}),P&&(0,t.jsx)("div",{className:"fixed inset-0 bg-slate-900/50 flex items-center justify-center z-50 p-4",children:(0,t.jsxs)("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-md",children:[(0,t.jsx)("div",{className:"p-6 border-b border-slate-100",children:(0,t.jsxs)("h3",{className:"font-serif text-xl font-light text-slate-900",children:["Registrar: ",eo(A)]})}),(0,t.jsxs)("div",{className:"p-6 space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:["Intensidade: ",(10*B).toFixed(0),"/10"]}),(0,t.jsx)("input",{type:"range",min:"0",max:"1",step:"0.1",value:B,onChange:e=>V(parseFloat(e.target.value)),className:"w-full"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Nota curta (opcional)"}),(0,t.jsx)("input",{type:"text",value:z,onChange:e=>$(e.target.value),placeholder:"Ex: evitou contato visual ao falar do pai",className:"w-full px-3 py-2 border border-slate-200 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-sky-500",maxLength:200})]})]}),(0,t.jsxs)("div",{className:"flex gap-3 p-6 border-t border-slate-100 bg-slate-50 rounded-b-xl",children:[(0,t.jsx)("button",{onClick:()=>F(!1),className:"flex-1 px-4 py-2 border border-slate-200 rounded-lg hover:bg-slate-100 text-sm text-slate-600",children:"Cancelar"}),(0,t.jsx)("button",{onClick:el,disabled:I,className:"flex-1 px-4 py-2 bg-sky-500 text-white rounded-lg hover:bg-sky-600 disabled:opacity-50 text-sm font-medium",children:I?"Salvando...":"Salvar"})]})]})})]}):(0,t.jsxs)("div",{className:"min-h-screen bg-white",children:[(0,t.jsx)(l.default,{}),(0,t.jsx)("main",{className:"md:ml-20 min-h-screen flex items-center justify-center",children:(0,t.jsx)("p",{className:"text-slate-500 italic",children:"Sessão não encontrada"})})]})}e.s(["default",()=>p],34130)}]);